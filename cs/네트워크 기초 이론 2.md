## 네트워크 기초 이론 2

### 웹 서비스의 태동

- Tim Burners-Lee
- HTML(Hyper Text Markup Language): 문서(Text) + 링크 형태의 문서를 작성할 수 있는 문서 형식 고안
- HTTP(Hyper Text Transfer Protocol): HTML 문서를 인터넷을 통해 전달할 수 있는 방안 고안
- 문서들 간의 연결고리가 거미줄처럼 보인다하여 Web

구조

1. **자료구조, 데이터** : HTML
2. 데이터에 대한 **제어 체계** : JS
3. **인터페이스** : CSS

### 웹 서비스 작동원리 1 (HTML)

![network_2_10_1](https://github.com/zacinthepark/TIL/assets/86648892/a04b5b28-2dd5-481e-b7fc-159ec6cb4e22)

- TCP/IP 연결을 기초하여 HTTP 통신이 된다고 가정
- HTTP 통신 프로토콜은 **Stateless** 함
- 연결은 상태의 개념을 포함하는데 그 위에서 작동하는 HTTP는 상태의 개념이 없다

- 웹 클라이언트도 IP주소가 있고, 웹 서버도 IP 주소가 있을 때
- 클라이언트에서 URL(Uniform Resource Location)에 해당하는 Resource(HTML 문서)를 요청하면
    - DNS(Domain Name System)과 통신하여 해당 URL에 대한 서버의 IP 주소 획득
- 해당 IP 주소를 통해 TCP/IP 연결을 하고
- HTTP 통신 프로토콜이 작동하기 시작
    - http request가 가고
        - 이 때 request는 GET method를 통해 Read
    - http response가 와서 HTML 문서를 획득
    - 이에 대해서
        1. Parser를 통해서 구문분석을 하고 이를 통해 DOM 자료구조 생성
        2. 렌더링 엔진을 통해 렌더링
- 브라우저를 이루는 핵심 요소는 Parser와 렌더링 엔진
- 이 당시 브라우저의 정체성은 원격지문서뷰어 라고 할 수 있음

### 웹 서비스 작동원리 2 (HTML, CSS, JS)

![network_2_11_1](https://github.com/zacinthepark/TIL/assets/86648892/8fd96d88-dfb8-4982-85fc-ec2bf333cf7f)
![network_2_11_2](https://github.com/zacinthepark/TIL/assets/86648892/11069993-6563-4ac0-97fd-c5576ba8eecc)

- HTML, CSS
    - 정적 요소
    - HTML을 통해 문서를 파싱하고
    - 이후 CSS를 통해 스타일을 입히고
    - 이후 사진을 불러옴

- Script 언어
    - 동적 요소 제어
    - Mocha -> Live -> Javascript
    - 브라우저에서 **실행** 됨

브라우저를 이루는 3요소

1. 구문 분석을 위한 Parse (DOM 트리 생성)
2. 렌더링 엔진
3. 연산 주체가 되는 스크립트 엔진

- 양방향 작용을 하게 되면서 상태가 변하게 되고, 이를 기억(기록)할 필요가 있음
    - 클라이언트의 기억 수단: Cookie
    - 서버의 기억 수단: Database

### 웹 서비스 작동원리 3 (WAS, JVM, RESTful API)

![network_2_12_1](https://github.com/zacinthepark/TIL/assets/86648892/1a56e124-82dc-4603-828a-5f79b1175554)

- Web Server: 리소스 송수신 담당
- **WAS(Web Application Server)**: 처리 담당
- DB: 자료 담당

- WAS의 비즈니스 로직은 MVC 아키텍처로 구성
    - Model: 다루는 데이터, 자료구조
    - View: 웹 서버에서 가지고 있는 정적 데이터
    - Control: URL과 관련된 제어 체계

- WAS에서 처리할 때 프로그래밍 언어는 무엇을 쓸까?
- H/W 영역에서 컴퓨터를 이루는 핵심 구성 요소가 CPU이며, CPU가 무엇이냐에 따라 그 컴퓨터의 정체성이 결정됨
    - CPU를 다른 말로 Machine이라고도 함

- JAVA라는 프로그래밍 언어는 Platform Independent 언어임
    - Platform이란 운영체제와 CPU (H/W 영역 ~ Kernel mode 영역)을 말함
    - Platform Independent라는 것은 Platform이 무엇이 되었든 작동한다는 것
    - 이를 위해 CPU(Machine)를 User mode에서 Software로 구현함
    - JAVA에서는 이를 **JVM** 이라 한다
        - Java Virtual Machine: 자바라는 언어로만 작동하는(Java), 소프트웨어로 구현한(Virtual), CPU(Machine)
- JVM이 작동할 때는, 이 기계가 인식할 수 있는 기계어로 작동하며, 이것이 **JAVA byte code**

- **Middleware**
    - 프로그램을 개발할 때는 JVM에서 작동할 수 있는 모듈들(DB 다루는 기능, 입출력 기능, ...)을 모아서 하나의 새로운 소프트웨어를 만듬
    - 그 자체로 존재 의미가 있는 것이 아닌 다른 SW가 작동하기 좋게 어플리케이션 데이터 관리, 메시지 전송, 외부 서비스와의 통신 등 기능을 제공함
    - HW와 SW의 중개자 역할
    - WAS는 미들웨어의 한 형태 (클라이언트와 백엔드 시스템 사이의 중개자 역할)
        - 다음과 같은 역할 수행 가능
        - 요청 처리: HTTP 요청을 받아들이고, 요청에 따라 어플리케이션 코드를 실행. 실행 결과를 웹 페이지 형태로 가공하여 클라이언트에게 응답으로 보냄
        - 세션 관리: 사용자의 상태를 관리하는 세션 관리 기능 제공. 웹은 기본적으로 Stateless하기에 WAS는 사용자별로 세션을 생성하고 관리하여 사용자의 상태 정보를 유지할 수 있게 도와줌
        - 보안: WAS는 SSL(Secure Sockets Layer)과 같은 보안 프로토콜을 통해 데이터의 암호화 및 보안 통신을 지원. 또한 사용자 인증, 접근 제어 등의 보안 관련 기능을 제공하여 어플리케이션의 보안을 강화
        - 데이터베이스 연결: WAS는 데이터베이스와의 연결 및 통신을 관리하는 기능을 포함. JDBC(Java Database Connectivity), ODBC(Open Database Connectivity) 등의 API를 통해 데이터베이스 쿼리를 실행하고, 결과를 어플리케이션으로 전달
        - 어플리케이션 서비스: 트랜잭션 관리, 메시지 큐 관리, 리소스 풀링 등 다양한 어플리케이션 서비스를 제공. 이러한 서비스는 어플리케이션 성능과 안정성을 향상시키는데 도움을 줌
        - 로드 밸런싱 및 확장성: 대규모 트래픽을 처리하기 위해, WAS는 로드 밸런서와 함께 사용되어 요청을 여러 서버에 분산시킬 수 있음. 이는 어플리케이션의 확장성과 가용성을 높이는데 중요한 역할을 함

- 어쨌든 이런 미들웨어가 백엔드 시스템 구축에 제공하는 재료들을 바탕으로 SW 개발을 하는데, 그 사이에 **Framework** 를 넣어 이 프레임워크에 의해 개발이 이루어지도록 강제하여 시스템이 효율적으로 운영되도록 함
- 이 때 대중적인 프레임워크가 **Spring**, **Spring Boot**
- 백엔드 개발을 한다는 이것은 이 프레임워크를 바탕으로 한 SW 개발을 한다는 것
    - JAVA를 바탕으로 한 이 프레임워크 위에서 비즈니스 로직을 작성하는 것
- 이 상단의 비즈니스 로직을 JSP, PHP, ASP와 같은 스크립트 언어로도 해낼 수 있다
- WAS가 JavaScript로 작동하는 것이 있는데, 이 때 관련된 것이 node.js

- 결국 웹 서비스라고 하는 것을 이루고 있는 구성 요소를 보니 Web Server, WAS, Database가 있다
- 각각을 Tier라 한다
- Tier들이 연결되어 3-Tier Web Solution 이라 한다

- 성능은 어디서 결정되는가?
    1. DB에서의 응답속도
        - 성능을 높이기 위해 퍼포먼스 튜닝이라는 것을 한다
    2. WAS에서의 처리, 연산속도
        - 이 두 가지를 열심히 모니터링하는 솔루션이 **APM(Application Performance Management system)**
        - 대표적으로 Scouter APM이 있다
    3. http 통신에서의 속도
        - 네트워크 속도와 관련 있다

- RESTful API
    - 최근 웹에서는
    - HTTP 요청에 대하여 `JSON` 형식의 데이터만 주고 받음
    - UI가 애플, 안드로이드, 웹 등 환경이 다양해짐에 따라
        - 각각에 대한 HTML을 따로 서버 쪽에 준비하는 것이 아닌
        - 데이터만 보내고
    - 클라이언트 쪽에서 스스로 자신에게 알맞은 HTML을 받은 데이터와 생성
        - 이 때 사용하는 대표적인 프레임워크가 React.js, Vue.js
    - 클라이언트는 CRUD가 제공되는 기능을 Call하면 됨

- 보안
    - Web Server와 인터넷망이 붙을 때 항상 보안을 위해 3가지 요소가 들어간다
        - IPS: 침입 방지 시스템
        - SSL: 암호화 처리
        - WAF: Web Application Firewall
    - 이런 보안적 요소가 결합되어 실무에서 관련 이슈들을 겪을 수 있음
