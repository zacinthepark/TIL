# 전국 도시 공원 표준 데이터

https://www.data.go.kr/dataset/15012890/standard.do

* 전국 도시 공원 표준데이터에는 데이터를 전처리 해보기에 좋은 데이터가 많습니다.
* 시간, 결측치, 이상치, 수치형, 범주형 데이터를 고르게 볼 수 있으며 다양한 텍스트 데이터 처리를 해볼 수 있습니다.
* 또 정규표현식을 활용해서 텍스트 데이터 전처리와 데이터 마스킹 기법에 대해 다룹니다.
* 그리고 이렇게 전처리한 내용을 바탕으로 전국 도시공원에 대한 분포를 시각화해 봅니다.
* 어떤 공원이 어느 지역에 어떻게 분포되어 있는지를 위경도로 표현해 봅니다.

### 워드클라우드

[amueller/word_cloud: A little word cloud generator in Python](https://github.com/amueller/word_cloud)

* 다음 명령어로 설치가 가능합니다. conda prompt 혹은 터미널을 열어 설치해 주세요.
* conda : `conda install -c conda-forge wordcloud`
* pip : `pip install wordcloud`

## 분석에 사용할 도구를 불러옵니다.

```python
# 필요한 라이브러리를 로드합니다.
# pandas, numpy, seaborn, matplotlib

import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt

%matplotlib inline
```

## Seaborn 설정으로 시각화의 스타일, 폰트 설정하기

* [matplotlib.pyplot.rc — Matplotlib 3.1.3 documentation](https://matplotlib.org/3.1.3/api/_as_gen/matplotlib.pyplot.rc.html)

```python
# seaborn 의 set 기능을 통해 폰트, 마이너스 폰트 설정, 스타일 설정을 합니다.
# "Malgun Gothic"
sns.set(font="AppleGothic", 
        rc={"axes.unicode_minus":False},
        style='darkgrid')
```

## 데이터 로드

```python
# 데이터를 로드해서 df 라는 변수에 담습니다.

df = pd.read_csv("data/전국도시공원표준데이터.csv", encoding="cp949")
df.shape
```

<pre>
(18137, 20)
</pre>

```python
# 미리보기를 합니다.

df.head()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>관리번호</th>
      <th>공원명</th>
      <th>공원구분</th>
      <th>소재지도로명주소</th>
      <th>소재지지번주소</th>
      <th>위도</th>
      <th>경도</th>
      <th>공원면적</th>
      <th>공원보유시설(운동시설)</th>
      <th>공원보유시설(유희시설)</th>
      <th>공원보유시설(편익시설)</th>
      <th>공원보유시설(교양시설)</th>
      <th>공원보유시설(기타시설)</th>
      <th>지정고시일</th>
      <th>관리기관명</th>
      <th>전화번호</th>
      <th>데이터기준일자</th>
      <th>제공기관코드</th>
      <th>제공기관명</th>
      <th>Unnamed: 19</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>26440-00001</td>
      <td>구랑공원</td>
      <td>문화공원</td>
      <td>NaN</td>
      <td>부산광역시 강서구 구랑동 1199-7</td>
      <td>35.157215</td>
      <td>128.854935</td>
      <td>9137.0</td>
      <td>4</td>
      <td>NaN</td>
      <td>화장실</td>
      <td>NaN</td>
      <td>팔각정자, 파고라2, 평의자6, 앉음벽14.38m, 축구장(골대2), 컨테이너, 안...</td>
      <td>2011-09-02</td>
      <td>부산광역시 강서구청 녹지공원과</td>
      <td>051-970-4536</td>
      <td>2019-05-02</td>
      <td>3360000</td>
      <td>부산광역시 강서구</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>26440-00002</td>
      <td>압곡공원</td>
      <td>근린공원</td>
      <td>NaN</td>
      <td>부산광역시 강서구 구랑동 1219</td>
      <td>35.154655</td>
      <td>128.854727</td>
      <td>33756.0</td>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>배드민턴장, 족구장, 파고라4, 안내판, 볼라드7, 데크435.11㎡, 데크계단19...</td>
      <td>2008-02-28</td>
      <td>부산광역시 강서구청 녹지공원과</td>
      <td>051-970-4536</td>
      <td>2019-05-02</td>
      <td>3360000</td>
      <td>부산광역시 강서구</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>26440-00003</td>
      <td>서연정공원</td>
      <td>소공원</td>
      <td>NaN</td>
      <td>부산광역시 강서구 대저1동 1330-7</td>
      <td>35.216183</td>
      <td>128.969558</td>
      <td>646.0</td>
      <td>7</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>앉음벽13.57m, 트렐리스3, 안내판2, 플랜트2, 파고라, 평의자4</td>
      <td>2013-01-23</td>
      <td>부산광역시 강서구청 녹지공원과</td>
      <td>051-970-4536</td>
      <td>2019-05-02</td>
      <td>3360000</td>
      <td>부산광역시 강서구</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>26440-00004</td>
      <td>용두공원</td>
      <td>어린이공원</td>
      <td>NaN</td>
      <td>부산광역시 강서구 대저2동 1870-67</td>
      <td>35.183679</td>
      <td>128.956007</td>
      <td>1620.0</td>
      <td>NaN</td>
      <td>조합놀이기구, 그네</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>정자, 농구장, 평의자6</td>
      <td>1998-07-25</td>
      <td>부산광역시 강서구청 녹지공원과</td>
      <td>051-970-4536</td>
      <td>2019-05-02</td>
      <td>3360000</td>
      <td>부산광역시 강서구</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>26440-00005</td>
      <td>새동내공원</td>
      <td>어린이공원</td>
      <td>NaN</td>
      <td>부산광역시 강서구 대저2동 2407-1</td>
      <td>35.174568</td>
      <td>128.950612</td>
      <td>1009.0</td>
      <td>8</td>
      <td>조합놀이기구, 그네, 흔들놀이기구2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>정자, 평의자14, 트렐리스2, 안내판, 볼라드</td>
      <td>1995-04-07</td>
      <td>부산광역시 강서구청 녹지공원과</td>
      <td>051-970-4536</td>
      <td>2019-05-02</td>
      <td>3360000</td>
      <td>부산광역시 강서구</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

## 기본 정보 보기

```python
# info로 기본 정보를 봅니다.

df.info()
```

<pre>
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 18137 entries, 0 to 18136
Data columns (total 20 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   관리번호          18137 non-null  object 
 1   공원명           18137 non-null  object 
 2   공원구분          18137 non-null  object 
 3   소재지도로명주소      8039 non-null   object 
 4   소재지지번주소       17158 non-null  object 
 5   위도            18137 non-null  float64
 6   경도            18137 non-null  float64
 7   공원면적          18137 non-null  float64
 8   공원보유시설(운동시설)  4845 non-null   object 
 9   공원보유시설(유희시설)  6964 non-null   object 
 10  공원보유시설(편익시설)  5084 non-null   object 
 11  공원보유시설(교양시설)  1160 non-null   object 
 12  공원보유시설(기타시설)  3116 non-null   object 
 13  지정고시일         15225 non-null  object 
 14  관리기관명         17383 non-null  object 
 15  전화번호          16957 non-null  object 
 16  데이터기준일자       18137 non-null  object 
 17  제공기관코드        18137 non-null  object 
 18  제공기관명         18137 non-null  object 
 19  Unnamed: 19   0 non-null      float64
dtypes: float64(4), object(16)
memory usage: 2.8+ MB
</pre>

```python
# 결측치의 수를 구합니다.
df.isnull().sum()
```

<pre>
관리번호                0
공원명                 0
공원구분                0
소재지도로명주소        10098
소재지지번주소           979
위도                  0
경도                  0
공원면적                0
공원보유시설(운동시설)    13292
공원보유시설(유희시설)    11173
공원보유시설(편익시설)    13053
공원보유시설(교양시설)    16977
공원보유시설(기타시설)    15021
지정고시일            2912
관리기관명             754
전화번호             1180
데이터기준일자             0
제공기관코드              0
제공기관명               0
Unnamed: 19     18137
dtype: int64
</pre>

```python
# 결측치 비율 구하기
# 결측의 평균을 통해 비율을 구하고 100을 곱해줍니다.

round(df.isnull().mean() * 100, 2)
```

<pre>
관리번호              0.00
공원명               0.00
공원구분              0.00
소재지도로명주소         55.68
소재지지번주소           5.40
위도                0.00
경도                0.00
공원면적              0.00
공원보유시설(운동시설)     73.29
공원보유시설(유희시설)     61.60
공원보유시설(편익시설)     71.97
공원보유시설(교양시설)     93.60
공원보유시설(기타시설)     82.82
지정고시일            16.06
관리기관명             4.16
전화번호              6.51
데이터기준일자           0.00
제공기관코드            0.00
제공기관명             0.00
Unnamed: 19     100.00
dtype: float64
</pre>

## 결측치 시각화

* [ResidentMario/missingno: Missing data visualization module for Python.](https://github.com/ResidentMario/missingno)

```python
sns.set(font="AppleGothic", 
        rc={"axes.unicode_minus":False},
        style='darkgrid')
```

```python
# 이전 챕터에서 설치하지 않았다면 아나콘다에 missingno를 설치합니다. 
# !conda install -c conda-forge missingno
# 라이브러리를 로드합니다.

import missingno

missingno.matrix(df)
```

<img width="853" alt="park_output_1" src="https://github.com/zacinthepark/TIL/assets/86648892/41c559f0-6777-4fa3-98f9-2e7caaf74488">

* 그래프의 색상 선택 : [Choosing Colormaps in Matplotlib — Matplotlib 3.1.0 documentation](https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html)

```python
# seaborn을 통해 위와 같은 결측치 그래프를 그려봅니다.

null = df.isnull()

plt.figure(figsize=(15, 4))
sns.heatmap(null, cmap="Blues_r")
```

<img width="856" alt="park_output_2" src="https://github.com/zacinthepark/TIL/assets/86648892/21074e59-319a-42e2-b5bc-365f8928b436">

# 데이터 전처리

* 불필요한 컬럼 제거
* 시도 결측치 처리
    * 다른 데이터로 대체
    * 도로명 혹은 지번 둘 중 하나만 있다면 있는 데이터로 대체
* 아웃라이어 데이터 제거 혹은 대체
    * 위경도가 국내 범위를 벗어나는 데이터의 경우 제외하고 그리도록 처리

## 불필요한 컬럼 제거하기

```python
# 전체 컬럼명을 출력해 봅니다.

df.columns
```

<pre>
Index(['관리번호', '공원명', '공원구분', '소재지도로명주소', '소재지지번주소', '위도', '경도', '공원면적',
       '공원보유시설(운동시설)', '공원보유시설(유희시설)', '공원보유시설(편익시설)', '공원보유시설(교양시설)',
       '공원보유시설(기타시설)', '지정고시일', '관리기관명', '전화번호', '데이터기준일자', '제공기관코드', '제공기관명',
       'Unnamed: 19'],
      dtype='object')
</pre>

```python
# drop 으로 'Unnamed: 19' 를 제거하기

print(df.shape)
df = df.drop(["Unnamed: 19"], axis=1)
print(df.shape)
```

<pre>
(18137, 20)
(18137, 19)
</pre>

## 결측치 대체

### 도로명 주소와 지번 주소 

* 둘 중 하나만 있을 때 나머지 데이터로 결측치 대체하기

```python
# 도로명 주소의 널값 수

df['소재지도로명주소'].isnull().sum()
```

<pre>
10098
</pre>

```python
# 지번 주소의 널값 수

df['소재지지번주소'].isnull().sum()
```

<pre>
979
</pre>

```python
# "소재지도로명주소"와 "소재지지번주소"가 모두 결측치가 아닌 데이터를 찾습니다.

df[df['소재지도로명주소'].notnull() & df['소재지지번주소'].notnull()].shape
```

<pre>
(7060, 19)
</pre>

```python
# "소재지도로명주소"의 결측치를 fillna 를 통해 "소재지지번주소"로 채웁니다.
df['소재지도로명주소'] = df['소재지도로명주소'].fillna(df['소재지지번주소'])
```

```python
# "소재지도로명주소"의 결측치수를 세어봅니다.
df['소재지도로명주소'].isnull().sum()
```

<pre>
0
</pre>

```python
# "소재지도로명주소"와 "소재지지번주소"가 모두 결측치인 데이터를 찾습니다.

df[df['소재지도로명주소'].isnull() & df['소재지지번주소'].isnull()].shape
```

<pre>
(0, 19)
</pre>

## 파생변수 만들기

### 주소를 통한 시도, 구군 변수 생성하기

```python
df[['소재지도로명주소', '소재지지번주소']]
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>소재지도로명주소</th>
      <th>소재지지번주소</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>부산광역시 강서구 구랑동 1199-7</td>
      <td>부산광역시 강서구 구랑동 1199-7</td>
    </tr>
    <tr>
      <th>1</th>
      <td>부산광역시 강서구 구랑동 1219</td>
      <td>부산광역시 강서구 구랑동 1219</td>
    </tr>
    <tr>
      <th>2</th>
      <td>부산광역시 강서구 대저1동 1330-7</td>
      <td>부산광역시 강서구 대저1동 1330-7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>부산광역시 강서구 대저2동 1870-67</td>
      <td>부산광역시 강서구 대저2동 1870-67</td>
    </tr>
    <tr>
      <th>4</th>
      <td>부산광역시 강서구 대저2동 2407-1</td>
      <td>부산광역시 강서구 대저2동 2407-1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>18132</th>
      <td>인천광역시 동구 송림동 291-6</td>
      <td>인천광역시 동구 송림동 291-6</td>
    </tr>
    <tr>
      <th>18133</th>
      <td>경상북도 영양군 영양읍 서부리 123</td>
      <td>경상북도 영양군 영양읍 서부리 123</td>
    </tr>
    <tr>
      <th>18134</th>
      <td>경상북도 영양군 입암면 신구리 산27-5</td>
      <td>경상북도 영양군 입암면 신구리 산27-5</td>
    </tr>
    <tr>
      <th>18135</th>
      <td>경상북도 영양군 수비면 발리리 산48</td>
      <td>경상북도 영양군 수비면 발리리 산48</td>
    </tr>
    <tr>
      <th>18136</th>
      <td>경상북도 영양군 영양읍 삼지리 200</td>
      <td>경상북도 영양군 영양읍 삼지리 200</td>
    </tr>
  </tbody>
</table>
<p>18137 rows × 2 columns</p>
</div>

```python
# 소재지도로명주소로 시도, 구군 변수 생성하기
# .str.split(' ', expand=True)[0] 을 통해 공백문자로 분리하고 리스트의 첫번째 값을 가져오도록 하기
# expand=True는 문자열을 분리한 결과를 DataFrame으로 확장하여 반환하겠다는 것
# expand=False면 분리된 결과를 Series 형태로 반환하면, 리스트 형태의 데이터를 포함함
df["시도"] = df["소재지도로명주소"].str.split(expand=True)[0]
df[["소재지도로명주소", "시도"]].head(3)
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>소재지도로명주소</th>
      <th>시도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>부산광역시 강서구 구랑동 1199-7</td>
      <td>부산광역시</td>
    </tr>
    <tr>
      <th>1</th>
      <td>부산광역시 강서구 구랑동 1219</td>
      <td>부산광역시</td>
    </tr>
    <tr>
      <th>2</th>
      <td>부산광역시 강서구 대저1동 1330-7</td>
      <td>부산광역시</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 구군 가져오기
df["구군"] = df["소재지도로명주소"].str.split(expand=True)[1]
df[["소재지도로명주소", "시도", "구군"]].sample(3)
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>소재지도로명주소</th>
      <th>시도</th>
      <th>구군</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>15535</th>
      <td>울산광역시 중구 옥교8길 45 (학산동)</td>
      <td>울산광역시</td>
      <td>중구</td>
    </tr>
    <tr>
      <th>6438</th>
      <td>전라남도 순천시 해룡면 선월리 414-16</td>
      <td>전라남도</td>
      <td>순천시</td>
    </tr>
    <tr>
      <th>3713</th>
      <td>충청남도 서산시 동문동 331-5</td>
      <td>충청남도</td>
      <td>서산시</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 시도 데이터의 빈도수 세어보기
df["시도"].value_counts()
```

<pre>
시도
경기도        3318
전라남도       1882
경상남도       1825
서울특별시      1745
충청남도       1723
전라북도       1137
경상북도        917
충청북도        899
울산광역시       887
인천광역시       675
부산광역시       653
강원도         647
대구광역시       586
대전광역시       497
광주광역시       429
제주특별자치도     246
세종특별자치시      70
강원            1
Name: count, dtype: int64
</pre>

```python
# 강원은 "강원도"로 변경해줄 필요가 보입니다.
df["시도"] = df["시도"].replace("강원", "강원도")
df["시도"].value_counts()
```

<pre>
시도
경기도        3318
전라남도       1882
경상남도       1825
서울특별시      1745
충청남도       1723
전라북도       1137
경상북도        917
충청북도        899
울산광역시       887
인천광역시       675
부산광역시       653
강원도         648
대구광역시       586
대전광역시       497
광주광역시       429
제주특별자치도     246
세종특별자치시      70
Name: count, dtype: int64
</pre>

## 이상치 제거

* 경도, 위도의 이상치 처리하기

```python
# 위경도 시각화
sns.scatterplot(data=df, x="경도", y="위도")
```

<img width="855" alt="park_output_3" src="https://github.com/zacinthepark/TIL/assets/86648892/566056a0-5841-4d77-8629-5ee1580af5e7">

```python
# 위 지도로 위도와 경도의 아웃라이어 데이터를 제외하고 출력해 봅니다.
# 좀 더 정확하게 출력하려면 대한민국 위경도 데이터 범위를 다시 넣어줍니다. 
# 이상치를 제거한 데이터를 df_park 라는 새로운 변수에 담습니다.
df_park = df[(df["경도"] < 132) & 
             (df["위도"] > 32)].copy()
```

```python
# 위도 경도의 아웃라이어 데이터가 제거되었는지 확인함

sns.scatterplot(data=df_park, x="경도", y="위도")
```

<img width="856" alt="park_output_4" src="https://github.com/zacinthepark/TIL/assets/86648892/79c2fda3-768a-498a-8539-2aaf938ae0a5">

```python
df[["위도", "경도"]].describe()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>위도</th>
      <th>경도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>18137.000000</td>
      <td>18137.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>36.335922</td>
      <td>127.543937</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.051835</td>
      <td>0.892670</td>
    </tr>
    <tr>
      <th>min</th>
      <td>27.551606</td>
      <td>125.430955</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>35.275430</td>
      <td>126.872301</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>36.364729</td>
      <td>127.130926</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>37.404278</td>
      <td>128.466193</td>
    </tr>
    <tr>
      <th>max</th>
      <td>38.224926</td>
      <td>137.202661</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 위경도가 잘못입력된 데이터를 봅니다.
# 주소가 잘못되지는 않았습니다.
# 주소를 통해 위경도를 다시 받아올 필요가 있습니다.
df[(df["경도"] > 132) | (df["위도"] < 32)]
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>관리번호</th>
      <th>공원명</th>
      <th>공원구분</th>
      <th>소재지도로명주소</th>
      <th>소재지지번주소</th>
      <th>위도</th>
      <th>경도</th>
      <th>공원면적</th>
      <th>공원보유시설(운동시설)</th>
      <th>공원보유시설(유희시설)</th>
      <th>...</th>
      <th>공원보유시설(교양시설)</th>
      <th>공원보유시설(기타시설)</th>
      <th>지정고시일</th>
      <th>관리기관명</th>
      <th>전화번호</th>
      <th>데이터기준일자</th>
      <th>제공기관코드</th>
      <th>제공기관명</th>
      <th>시도</th>
      <th>구군</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>374</th>
      <td>11440-00004</td>
      <td>와우공원</td>
      <td>근린공원</td>
      <td>서울특별시 마포구 창전동3-231 등 59필지</td>
      <td>서울특별시 마포구 창전동3-231 등 59필지</td>
      <td>27.551606</td>
      <td>126.929047</td>
      <td>73590.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1940-03-12</td>
      <td>서울특별시 마포구</td>
      <td>02-3153-9553</td>
      <td>2019-07-22</td>
      <td>3130000</td>
      <td>서울특별시 마포구</td>
      <td>서울특별시</td>
      <td>마포구</td>
    </tr>
    <tr>
      <th>12926</th>
      <td>43113-00080</td>
      <td>근린공원5(만수공원)</td>
      <td>근린공원</td>
      <td>충청북도 청주시 흥덕구 오송읍 만수리 512</td>
      <td>충청북도 청주시 흥덕구 오송읍 만수리 512</td>
      <td>36.374204</td>
      <td>137.202661</td>
      <td>33258.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2003-04-18</td>
      <td>충청북도 청주시 푸른도시사업본부 공원관리과</td>
      <td>043-201-4433</td>
      <td>2019-06-21</td>
      <td>5710000</td>
      <td>충청북도 청주시</td>
      <td>충청북도</td>
      <td>청주시</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 21 columns</p>
</div>

## 날짜 데이터 다루기

```python
# 지정고시일의 데이터 타입을 봅니다.
df["지정고시일"].head(1)
```

<pre>
0    2011-09-02
Name: 지정고시일, dtype: object
</pre>

```python
# 지정고시일의 데이터 타입을 datetime 형태로 변경합니다.
df["지정고시일"] = pd.to_datetime(df["지정고시일"])
df["지정고시일"].head(1)
```

<pre>
0   2011-09-02
Name: 지정고시일, dtype: datetime64[ns]
</pre>

```python
# 고시연도와 고시월을 지정고시일에서 추출해서 파생변수를 만듭니다.
df["고시연도"] = df["지정고시일"].dt.year
df["고시월"] = df["지정고시일"].dt.month

df[["지정고시일", "고시연도", "고시월"]].head()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>지정고시일</th>
      <th>고시연도</th>
      <th>고시월</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2011-09-02</td>
      <td>2011.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2008-02-28</td>
      <td>2008.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2013-01-23</td>
      <td>2013.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1998-07-25</td>
      <td>1998.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1995-04-07</td>
      <td>1995.0</td>
      <td>4.0</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 화랑공원의 고시연도를 찾아봅니다. 데이터 전처리가 맞게 되었는지 확인해 봅니다.
df.loc[df["공원명"].str.contains("화랑"), ["공원명", "고시연도"]]
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>공원명</th>
      <th>고시연도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3077</th>
      <td>판교제8호(화랑)공원</td>
      <td>2004.0</td>
    </tr>
    <tr>
      <th>4310</th>
      <td>화랑공원</td>
      <td>2010.0</td>
    </tr>
    <tr>
      <th>7316</th>
      <td>화랑공원</td>
      <td>1972.0</td>
    </tr>
    <tr>
      <th>10490</th>
      <td>화랑</td>
      <td>2004.0</td>
    </tr>
    <tr>
      <th>10763</th>
      <td>화랑공원</td>
      <td>1980.0</td>
    </tr>
    <tr>
      <th>15066</th>
      <td>화랑</td>
      <td>1991.0</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 고시연도의 분포를 distplot 으로 그립니다.
# 이 때, 결측치가 있으면 오류가 나기 때문에 결측치가 없는 데이터만 따로 모아 그립니다.
sns.distplot(df.loc[df["고시연도"].notnull(), "고시연도"], rug=True)
```

<img width="855" alt="park_output_5" src="https://github.com/zacinthepark/TIL/assets/86648892/15d7389b-dcb9-46ed-b40c-83ec8deed2cf">

* 판다스 스타일링 : [Styling — pandas documentation](https://pandas.pydata.org/pandas-docs/stable/user_guide/style.html)
* 숫자의 많고 적음에 따라 heatmap 처럼 스타일을 표현 가능 합니다.

```python
# 연도와 월별 고시 현황을 pivot_table로 그려봅니다.
# year_month 라는 변수에 담아 재사용 합니다.
# 데이터가 많기 때문에 2000년보다 크고 2019년보다 작은 연도의 데이터만 봅니다.
year_month = pd.pivot_table(df, index="고시연도", columns="고시월", 
               values="공원명", aggfunc="count")
year_month = year_month[(year_month.index > 2000) & 
                        (year_month.index < 2019)]
year_month.style.background_gradient()
```

<table id="T_72b10">
  <thead>
    <tr>
      <th class="index_name level0" >고시월</th>
      <th id="T_72b10_level0_col0" class="col_heading level0 col0" >1.000000</th>
      <th id="T_72b10_level0_col1" class="col_heading level0 col1" >2.000000</th>
      <th id="T_72b10_level0_col2" class="col_heading level0 col2" >3.000000</th>
      <th id="T_72b10_level0_col3" class="col_heading level0 col3" >4.000000</th>
      <th id="T_72b10_level0_col4" class="col_heading level0 col4" >5.000000</th>
      <th id="T_72b10_level0_col5" class="col_heading level0 col5" >6.000000</th>
      <th id="T_72b10_level0_col6" class="col_heading level0 col6" >7.000000</th>
      <th id="T_72b10_level0_col7" class="col_heading level0 col7" >8.000000</th>
      <th id="T_72b10_level0_col8" class="col_heading level0 col8" >9.000000</th>
      <th id="T_72b10_level0_col9" class="col_heading level0 col9" >10.000000</th>
      <th id="T_72b10_level0_col10" class="col_heading level0 col10" >11.000000</th>
      <th id="T_72b10_level0_col11" class="col_heading level0 col11" >12.000000</th>
    </tr>
    <tr>
      <th class="index_name level0" >고시연도</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
      <th class="blank col9" >&nbsp;</th>
      <th class="blank col10" >&nbsp;</th>
      <th class="blank col11" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_72b10_level0_row0" class="row_heading level0 row0" >2001.000000</th>
      <td id="T_72b10_row0_col0" class="data row0 col0" >48.000000</td>
      <td id="T_72b10_row0_col1" class="data row0 col1" >12.000000</td>
      <td id="T_72b10_row0_col2" class="data row0 col2" >7.000000</td>
      <td id="T_72b10_row0_col3" class="data row0 col3" >42.000000</td>
      <td id="T_72b10_row0_col4" class="data row0 col4" >21.000000</td>
      <td id="T_72b10_row0_col5" class="data row0 col5" >16.000000</td>
      <td id="T_72b10_row0_col6" class="data row0 col6" >6.000000</td>
      <td id="T_72b10_row0_col7" class="data row0 col7" >16.000000</td>
      <td id="T_72b10_row0_col8" class="data row0 col8" >30.000000</td>
      <td id="T_72b10_row0_col9" class="data row0 col9" >36.000000</td>
      <td id="T_72b10_row0_col10" class="data row0 col10" >37.000000</td>
      <td id="T_72b10_row0_col11" class="data row0 col11" >40.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row1" class="row_heading level0 row1" >2002.000000</th>
      <td id="T_72b10_row1_col0" class="data row1 col0" >38.000000</td>
      <td id="T_72b10_row1_col1" class="data row1 col1" >19.000000</td>
      <td id="T_72b10_row1_col2" class="data row1 col2" >18.000000</td>
      <td id="T_72b10_row1_col3" class="data row1 col3" >10.000000</td>
      <td id="T_72b10_row1_col4" class="data row1 col4" >18.000000</td>
      <td id="T_72b10_row1_col5" class="data row1 col5" >14.000000</td>
      <td id="T_72b10_row1_col6" class="data row1 col6" >49.000000</td>
      <td id="T_72b10_row1_col7" class="data row1 col7" >17.000000</td>
      <td id="T_72b10_row1_col8" class="data row1 col8" >7.000000</td>
      <td id="T_72b10_row1_col9" class="data row1 col9" >7.000000</td>
      <td id="T_72b10_row1_col10" class="data row1 col10" >59.000000</td>
      <td id="T_72b10_row1_col11" class="data row1 col11" >55.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row2" class="row_heading level0 row2" >2003.000000</th>
      <td id="T_72b10_row2_col0" class="data row2 col0" >21.000000</td>
      <td id="T_72b10_row2_col1" class="data row2 col1" >13.000000</td>
      <td id="T_72b10_row2_col2" class="data row2 col2" >17.000000</td>
      <td id="T_72b10_row2_col3" class="data row2 col3" >19.000000</td>
      <td id="T_72b10_row2_col4" class="data row2 col4" >10.000000</td>
      <td id="T_72b10_row2_col5" class="data row2 col5" >23.000000</td>
      <td id="T_72b10_row2_col6" class="data row2 col6" >4.000000</td>
      <td id="T_72b10_row2_col7" class="data row2 col7" >8.000000</td>
      <td id="T_72b10_row2_col8" class="data row2 col8" >7.000000</td>
      <td id="T_72b10_row2_col9" class="data row2 col9" >18.000000</td>
      <td id="T_72b10_row2_col10" class="data row2 col10" >48.000000</td>
      <td id="T_72b10_row2_col11" class="data row2 col11" >38.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row3" class="row_heading level0 row3" >2004.000000</th>
      <td id="T_72b10_row3_col0" class="data row3 col0" >48.000000</td>
      <td id="T_72b10_row3_col1" class="data row3 col1" >18.000000</td>
      <td id="T_72b10_row3_col2" class="data row3 col2" >16.000000</td>
      <td id="T_72b10_row3_col3" class="data row3 col3" >18.000000</td>
      <td id="T_72b10_row3_col4" class="data row3 col4" >13.000000</td>
      <td id="T_72b10_row3_col5" class="data row3 col5" >24.000000</td>
      <td id="T_72b10_row3_col6" class="data row3 col6" >7.000000</td>
      <td id="T_72b10_row3_col7" class="data row3 col7" >48.000000</td>
      <td id="T_72b10_row3_col8" class="data row3 col8" >10.000000</td>
      <td id="T_72b10_row3_col9" class="data row3 col9" >24.000000</td>
      <td id="T_72b10_row3_col10" class="data row3 col10" >59.000000</td>
      <td id="T_72b10_row3_col11" class="data row3 col11" >135.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row4" class="row_heading level0 row4" >2005.000000</th>
      <td id="T_72b10_row4_col0" class="data row4 col0" >55.000000</td>
      <td id="T_72b10_row4_col1" class="data row4 col1" >32.000000</td>
      <td id="T_72b10_row4_col2" class="data row4 col2" >18.000000</td>
      <td id="T_72b10_row4_col3" class="data row4 col3" >23.000000</td>
      <td id="T_72b10_row4_col4" class="data row4 col4" >43.000000</td>
      <td id="T_72b10_row4_col5" class="data row4 col5" >33.000000</td>
      <td id="T_72b10_row4_col6" class="data row4 col6" >16.000000</td>
      <td id="T_72b10_row4_col7" class="data row4 col7" >62.000000</td>
      <td id="T_72b10_row4_col8" class="data row4 col8" >18.000000</td>
      <td id="T_72b10_row4_col9" class="data row4 col9" >34.000000</td>
      <td id="T_72b10_row4_col10" class="data row4 col10" >60.000000</td>
      <td id="T_72b10_row4_col11" class="data row4 col11" >105.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row5" class="row_heading level0 row5" >2006.000000</th>
      <td id="T_72b10_row5_col0" class="data row5 col0" >84.000000</td>
      <td id="T_72b10_row5_col1" class="data row5 col1" >34.000000</td>
      <td id="T_72b10_row5_col2" class="data row5 col2" >69.000000</td>
      <td id="T_72b10_row5_col3" class="data row5 col3" >31.000000</td>
      <td id="T_72b10_row5_col4" class="data row5 col4" >54.000000</td>
      <td id="T_72b10_row5_col5" class="data row5 col5" >32.000000</td>
      <td id="T_72b10_row5_col6" class="data row5 col6" >18.000000</td>
      <td id="T_72b10_row5_col7" class="data row5 col7" >33.000000</td>
      <td id="T_72b10_row5_col8" class="data row5 col8" >24.000000</td>
      <td id="T_72b10_row5_col9" class="data row5 col9" >36.000000</td>
      <td id="T_72b10_row5_col10" class="data row5 col10" >119.000000</td>
      <td id="T_72b10_row5_col11" class="data row5 col11" >120.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row6" class="row_heading level0 row6" >2007.000000</th>
      <td id="T_72b10_row6_col0" class="data row6 col0" >69.000000</td>
      <td id="T_72b10_row6_col1" class="data row6 col1" >12.000000</td>
      <td id="T_72b10_row6_col2" class="data row6 col2" >9.000000</td>
      <td id="T_72b10_row6_col3" class="data row6 col3" >42.000000</td>
      <td id="T_72b10_row6_col4" class="data row6 col4" >16.000000</td>
      <td id="T_72b10_row6_col5" class="data row6 col5" >46.000000</td>
      <td id="T_72b10_row6_col6" class="data row6 col6" >62.000000</td>
      <td id="T_72b10_row6_col7" class="data row6 col7" >66.000000</td>
      <td id="T_72b10_row6_col8" class="data row6 col8" >84.000000</td>
      <td id="T_72b10_row6_col9" class="data row6 col9" >164.000000</td>
      <td id="T_72b10_row6_col10" class="data row6 col10" >245.000000</td>
      <td id="T_72b10_row6_col11" class="data row6 col11" >106.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row7" class="row_heading level0 row7" >2008.000000</th>
      <td id="T_72b10_row7_col0" class="data row7 col0" >163.000000</td>
      <td id="T_72b10_row7_col1" class="data row7 col1" >45.000000</td>
      <td id="T_72b10_row7_col2" class="data row7 col2" >77.000000</td>
      <td id="T_72b10_row7_col3" class="data row7 col3" >42.000000</td>
      <td id="T_72b10_row7_col4" class="data row7 col4" >30.000000</td>
      <td id="T_72b10_row7_col5" class="data row7 col5" >102.000000</td>
      <td id="T_72b10_row7_col6" class="data row7 col6" >15.000000</td>
      <td id="T_72b10_row7_col7" class="data row7 col7" >61.000000</td>
      <td id="T_72b10_row7_col8" class="data row7 col8" >32.000000</td>
      <td id="T_72b10_row7_col9" class="data row7 col9" >20.000000</td>
      <td id="T_72b10_row7_col10" class="data row7 col10" >24.000000</td>
      <td id="T_72b10_row7_col11" class="data row7 col11" >126.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row8" class="row_heading level0 row8" >2009.000000</th>
      <td id="T_72b10_row8_col0" class="data row8 col0" >59.000000</td>
      <td id="T_72b10_row8_col1" class="data row8 col1" >31.000000</td>
      <td id="T_72b10_row8_col2" class="data row8 col2" >162.000000</td>
      <td id="T_72b10_row8_col3" class="data row8 col3" >135.000000</td>
      <td id="T_72b10_row8_col4" class="data row8 col4" >57.000000</td>
      <td id="T_72b10_row8_col5" class="data row8 col5" >60.000000</td>
      <td id="T_72b10_row8_col6" class="data row8 col6" >36.000000</td>
      <td id="T_72b10_row8_col7" class="data row8 col7" >23.000000</td>
      <td id="T_72b10_row8_col8" class="data row8 col8" >96.000000</td>
      <td id="T_72b10_row8_col9" class="data row8 col9" >27.000000</td>
      <td id="T_72b10_row8_col10" class="data row8 col10" >73.000000</td>
      <td id="T_72b10_row8_col11" class="data row8 col11" >100.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row9" class="row_heading level0 row9" >2010.000000</th>
      <td id="T_72b10_row9_col0" class="data row9 col0" >25.000000</td>
      <td id="T_72b10_row9_col1" class="data row9 col1" >28.000000</td>
      <td id="T_72b10_row9_col2" class="data row9 col2" >77.000000</td>
      <td id="T_72b10_row9_col3" class="data row9 col3" >48.000000</td>
      <td id="T_72b10_row9_col4" class="data row9 col4" >48.000000</td>
      <td id="T_72b10_row9_col5" class="data row9 col5" >49.000000</td>
      <td id="T_72b10_row9_col6" class="data row9 col6" >36.000000</td>
      <td id="T_72b10_row9_col7" class="data row9 col7" >25.000000</td>
      <td id="T_72b10_row9_col8" class="data row9 col8" >26.000000</td>
      <td id="T_72b10_row9_col9" class="data row9 col9" >37.000000</td>
      <td id="T_72b10_row9_col10" class="data row9 col10" >80.000000</td>
      <td id="T_72b10_row9_col11" class="data row9 col11" >73.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row10" class="row_heading level0 row10" >2011.000000</th>
      <td id="T_72b10_row10_col0" class="data row10 col0" >37.000000</td>
      <td id="T_72b10_row10_col1" class="data row10 col1" >23.000000</td>
      <td id="T_72b10_row10_col2" class="data row10 col2" >19.000000</td>
      <td id="T_72b10_row10_col3" class="data row10 col3" >17.000000</td>
      <td id="T_72b10_row10_col4" class="data row10 col4" >19.000000</td>
      <td id="T_72b10_row10_col5" class="data row10 col5" >20.000000</td>
      <td id="T_72b10_row10_col6" class="data row10 col6" >32.000000</td>
      <td id="T_72b10_row10_col7" class="data row10 col7" >41.000000</td>
      <td id="T_72b10_row10_col8" class="data row10 col8" >29.000000</td>
      <td id="T_72b10_row10_col9" class="data row10 col9" >52.000000</td>
      <td id="T_72b10_row10_col10" class="data row10 col10" >28.000000</td>
      <td id="T_72b10_row10_col11" class="data row10 col11" >79.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row11" class="row_heading level0 row11" >2012.000000</th>
      <td id="T_72b10_row11_col0" class="data row11 col0" >19.000000</td>
      <td id="T_72b10_row11_col1" class="data row11 col1" >28.000000</td>
      <td id="T_72b10_row11_col2" class="data row11 col2" >18.000000</td>
      <td id="T_72b10_row11_col3" class="data row11 col3" >16.000000</td>
      <td id="T_72b10_row11_col4" class="data row11 col4" >18.000000</td>
      <td id="T_72b10_row11_col5" class="data row11 col5" >46.000000</td>
      <td id="T_72b10_row11_col6" class="data row11 col6" >64.000000</td>
      <td id="T_72b10_row11_col7" class="data row11 col7" >35.000000</td>
      <td id="T_72b10_row11_col8" class="data row11 col8" >11.000000</td>
      <td id="T_72b10_row11_col9" class="data row11 col9" >18.000000</td>
      <td id="T_72b10_row11_col10" class="data row11 col10" >38.000000</td>
      <td id="T_72b10_row11_col11" class="data row11 col11" >44.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row12" class="row_heading level0 row12" >2013.000000</th>
      <td id="T_72b10_row12_col0" class="data row12 col0" >23.000000</td>
      <td id="T_72b10_row12_col1" class="data row12 col1" >14.000000</td>
      <td id="T_72b10_row12_col2" class="data row12 col2" >17.000000</td>
      <td id="T_72b10_row12_col3" class="data row12 col3" >32.000000</td>
      <td id="T_72b10_row12_col4" class="data row12 col4" >19.000000</td>
      <td id="T_72b10_row12_col5" class="data row12 col5" >18.000000</td>
      <td id="T_72b10_row12_col6" class="data row12 col6" >43.000000</td>
      <td id="T_72b10_row12_col7" class="data row12 col7" >12.000000</td>
      <td id="T_72b10_row12_col8" class="data row12 col8" >10.000000</td>
      <td id="T_72b10_row12_col9" class="data row12 col9" >30.000000</td>
      <td id="T_72b10_row12_col10" class="data row12 col10" >19.000000</td>
      <td id="T_72b10_row12_col11" class="data row12 col11" >61.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row13" class="row_heading level0 row13" >2014.000000</th>
      <td id="T_72b10_row13_col0" class="data row13 col0" >17.000000</td>
      <td id="T_72b10_row13_col1" class="data row13 col1" >22.000000</td>
      <td id="T_72b10_row13_col2" class="data row13 col2" >17.000000</td>
      <td id="T_72b10_row13_col3" class="data row13 col3" >14.000000</td>
      <td id="T_72b10_row13_col4" class="data row13 col4" >14.000000</td>
      <td id="T_72b10_row13_col5" class="data row13 col5" >9.000000</td>
      <td id="T_72b10_row13_col6" class="data row13 col6" >16.000000</td>
      <td id="T_72b10_row13_col7" class="data row13 col7" >12.000000</td>
      <td id="T_72b10_row13_col8" class="data row13 col8" >15.000000</td>
      <td id="T_72b10_row13_col9" class="data row13 col9" >17.000000</td>
      <td id="T_72b10_row13_col10" class="data row13 col10" >20.000000</td>
      <td id="T_72b10_row13_col11" class="data row13 col11" >97.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row14" class="row_heading level0 row14" >2015.000000</th>
      <td id="T_72b10_row14_col0" class="data row14 col0" >43.000000</td>
      <td id="T_72b10_row14_col1" class="data row14 col1" >11.000000</td>
      <td id="T_72b10_row14_col2" class="data row14 col2" >14.000000</td>
      <td id="T_72b10_row14_col3" class="data row14 col3" >7.000000</td>
      <td id="T_72b10_row14_col4" class="data row14 col4" >9.000000</td>
      <td id="T_72b10_row14_col5" class="data row14 col5" >21.000000</td>
      <td id="T_72b10_row14_col6" class="data row14 col6" >8.000000</td>
      <td id="T_72b10_row14_col7" class="data row14 col7" >7.000000</td>
      <td id="T_72b10_row14_col8" class="data row14 col8" >14.000000</td>
      <td id="T_72b10_row14_col9" class="data row14 col9" >2.000000</td>
      <td id="T_72b10_row14_col10" class="data row14 col10" >21.000000</td>
      <td id="T_72b10_row14_col11" class="data row14 col11" >17.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row15" class="row_heading level0 row15" >2016.000000</th>
      <td id="T_72b10_row15_col0" class="data row15 col0" >30.000000</td>
      <td id="T_72b10_row15_col1" class="data row15 col1" >22.000000</td>
      <td id="T_72b10_row15_col2" class="data row15 col2" >3.000000</td>
      <td id="T_72b10_row15_col3" class="data row15 col3" >19.000000</td>
      <td id="T_72b10_row15_col4" class="data row15 col4" >15.000000</td>
      <td id="T_72b10_row15_col5" class="data row15 col5" >17.000000</td>
      <td id="T_72b10_row15_col6" class="data row15 col6" >13.000000</td>
      <td id="T_72b10_row15_col7" class="data row15 col7" >9.000000</td>
      <td id="T_72b10_row15_col8" class="data row15 col8" >32.000000</td>
      <td id="T_72b10_row15_col9" class="data row15 col9" >14.000000</td>
      <td id="T_72b10_row15_col10" class="data row15 col10" >5.000000</td>
      <td id="T_72b10_row15_col11" class="data row15 col11" >43.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row16" class="row_heading level0 row16" >2017.000000</th>
      <td id="T_72b10_row16_col0" class="data row16 col0" >8.000000</td>
      <td id="T_72b10_row16_col1" class="data row16 col1" >3.000000</td>
      <td id="T_72b10_row16_col2" class="data row16 col2" >10.000000</td>
      <td id="T_72b10_row16_col3" class="data row16 col3" >20.000000</td>
      <td id="T_72b10_row16_col4" class="data row16 col4" >5.000000</td>
      <td id="T_72b10_row16_col5" class="data row16 col5" >16.000000</td>
      <td id="T_72b10_row16_col6" class="data row16 col6" >13.000000</td>
      <td id="T_72b10_row16_col7" class="data row16 col7" >10.000000</td>
      <td id="T_72b10_row16_col8" class="data row16 col8" >10.000000</td>
      <td id="T_72b10_row16_col9" class="data row16 col9" >5.000000</td>
      <td id="T_72b10_row16_col10" class="data row16 col10" >24.000000</td>
      <td id="T_72b10_row16_col11" class="data row16 col11" >9.000000</td>
    </tr>
    <tr>
      <th id="T_72b10_level0_row17" class="row_heading level0 row17" >2018.000000</th>
      <td id="T_72b10_row17_col0" class="data row17 col0" >5.000000</td>
      <td id="T_72b10_row17_col1" class="data row17 col1" >5.000000</td>
      <td id="T_72b10_row17_col2" class="data row17 col2" >4.000000</td>
      <td id="T_72b10_row17_col3" class="data row17 col3" >2.000000</td>
      <td id="T_72b10_row17_col4" class="data row17 col4" >5.000000</td>
      <td id="T_72b10_row17_col5" class="data row17 col5" >17.000000</td>
      <td id="T_72b10_row17_col6" class="data row17 col6" >1.000000</td>
      <td id="T_72b10_row17_col7" class="data row17 col7" >4.000000</td>
      <td id="T_72b10_row17_col8" class="data row17 col8" >13.000000</td>
      <td id="T_72b10_row17_col9" class="data row17 col9" >27.000000</td>
      <td id="T_72b10_row17_col10" class="data row17 col10" >4.000000</td>
      <td id="T_72b10_row17_col11" class="data row17 col11" >40.000000</td>
    </tr>
  </tbody>
</table>

## 텍스트 데이터 다루기

### 정규표현식 

* [정규 표현식 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%EC%A0%95%EA%B7%9C_%ED%91%9C%ED%98%84%EC%8B%9D)
* 파이썬 공식문서 정규표현식 참고하기 : 
    * https://docs.python.org/3.8/library/re.html#re.sub
* 문자열 바꾸기 : re.sub("찾고자 하는 규칙", "replace 패턴", "데이터")
    * https://docs.python.org/3.8/library/re.html#text-munging
* 정규표현식 문자열 패턴
    * https://docs.python.org/3.8/howto/regex.html#matching-characters
* `[    ]` : 일치시킬 문자 세트의 패턴
* `[가나다]` : 가 or 나 or 다 중에 하나를 포함하고 있는지
* `[가-힣]` : 한글 가부터 힣까의 문자 중 하나를 포함하고 있는지
* `[0-9]` : 0~9까지의 숫자 중 하나를 포함하고 있는지
* `[^0-9]` : 숫자를 포함하고 있지 않음
* `[^가-힣]` : 한글이 포함되어 있지 않음
* `[가-힣+]` : 한글이 하나 이상 포함되는지

| 클래스 | 표현식 | 설명 |

|----|-----|----|

|\d | [0-9]|십진수와 일치|

|\D| [^0-9] | 숫자가 아닌 문자와 일치|

|\s |[\t\n\r\f\v] | 공백 문자와 일치 |

|\S |[^\t\n\r\f\v]| 공백이 아닌 문자와 일치|

| \w| [a-zA-Z0-9_] | 모든 숫자 영문자와 일치|

| \W| [^a-zA-Z0-9_]| 영문자, 숫자가 아닌 것과 일치|

표현식	설명

|표현식 | 설명 |	

|----|-----|

|^x	| 문자열의 시작을 표현하며 x 문자로 시작|

|x$	| 문자열의 종료를 표현하며 x 문자로 종료|

|.x	| 임의의 한 문자의 자리수를 표현하며 문자열이 x 로 끝남|

|x+	| 반복을 표현하며 x 문자가 한번 이상 반복됨|

|x*	| 반복여부를 표현하며 x 문자가 0번 또는 그 이상 반복됨|

|x?	| 존재여부를 표현하며 x 문자가 존재할 수도, 존재하지 않을 수도 있음|

|x\|y	| or 를 표현하며 x 또는 y 문자가 존재함|

|(x)	| 그룹을 표현하며 x 를 그룹으로 처리함|

|(x)(y)	| 그룹들의 집합을 표현하며 순서대로 번호를 부여하여 x, y 는 각 그룹의 데이터로 관리|

|(x)(?:y)	| 그룹들의 집합에 대한 예외를 표현하며 그룹 집합으로 관리되지 않음|

|x{n}	| 반복을 표현하며 x 문자가 n번 반복됨|

|x{n,}	| 반복을 표현하며 x 문자가 n번 이상 반복됨

|x{n,m}	| 반복을 표현하며 x 문자가 최소 n번 이상 최대 m 번 이하로 반복됨|

```python
# 정규표현식 라이브러리를 로드합니다.
# 설치가 필요 없이 파이썬에 내장되어 있는 라이브러리 입니다.
# 파이썬에 배터리 포함됨 이라는 특징이 있는데 이런 여러 표준 라이브러리가 잘 갖춰져 있습니다.
import re
```

### 공원 보유시설

```python
# 컬럼이 너무 많으면 끝까지 보이지 않습니다. 
# options.display 를 사용해 max_columns 값을 채워줍니다.

pd.options.display.max_columns = 100
```

```python
# 데이터를 미리보기 합니다.
df.head(1)
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>관리번호</th>
      <th>공원명</th>
      <th>공원구분</th>
      <th>소재지도로명주소</th>
      <th>소재지지번주소</th>
      <th>위도</th>
      <th>경도</th>
      <th>공원면적</th>
      <th>공원보유시설(운동시설)</th>
      <th>공원보유시설(유희시설)</th>
      <th>공원보유시설(편익시설)</th>
      <th>공원보유시설(교양시설)</th>
      <th>공원보유시설(기타시설)</th>
      <th>지정고시일</th>
      <th>관리기관명</th>
      <th>전화번호</th>
      <th>데이터기준일자</th>
      <th>제공기관코드</th>
      <th>제공기관명</th>
      <th>시도</th>
      <th>구군</th>
      <th>고시연도</th>
      <th>고시월</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>26440-00001</td>
      <td>구랑공원</td>
      <td>문화공원</td>
      <td>부산광역시 강서구 구랑동 1199-7</td>
      <td>부산광역시 강서구 구랑동 1199-7</td>
      <td>35.157215</td>
      <td>128.854935</td>
      <td>9137.0</td>
      <td>4</td>
      <td>NaN</td>
      <td>화장실</td>
      <td>NaN</td>
      <td>팔각정자, 파고라2, 평의자6, 앉음벽14.38m, 축구장(골대2), 컨테이너, 안...</td>
      <td>2011-09-02</td>
      <td>부산광역시 강서구청 녹지공원과</td>
      <td>051-970-4536</td>
      <td>2019-05-02</td>
      <td>3360000</td>
      <td>부산광역시 강서구</td>
      <td>부산광역시</td>
      <td>강서구</td>
      <td>2011.0</td>
      <td>9.0</td>
    </tr>
  </tbody>
</table>
</div>

### 운동시설

* 텍스트 데이터의 빈도수를 구합니다.
* 한 컬럼에 여러 텍스트가 , 혹은 - 등의 특수문자로 구분되어 있습니다.
* 데이터 전처리를 통해 텍스트의 빈도수를 구합니다.

```python
df["공원보유시설(운동시설)"].value_counts(sort=False).tail(5)
```

<pre>
공원보유시설(운동시설)
축구장, 족구장겸농구장, 육상트랙                                     1
농구장, 다리말아올리기, 몸체말아올리기, 윗몸일으키기, 허리돌리기, 역기대, 의자겸팔굽혀펴기    1
팔굽혀펴기, 허리돌리기, 배드민턴코드, 철봉, 인라인트랙, 자전거발전기                1
복합형운동기구, 온몸노젓기                                         1
플웨이트, 스텝사이클, 크라임스템퍼                                    1
Name: count, dtype: int64
</pre>

```python
# "공원보유시설(운동시설)"의 unique 값을 구하고 리스트 형태로 만듭니다.
# 그리고 다시 str 형태로 변경하고 gym 이라는 변수에 담습니다.
gym = df["공원보유시설(운동시설)"].unique().tolist()
gym = str(gym)
gym[:1000]
```

<pre>
"['4', '7', nan, '8', '5', '6', '3', '10', '14', '9', '30', '2', '13', '12', '40', '17', '-', '농구장', '궁도장', '풋살구장', '풋살구장, 농구장, 인라인스케이트장', '축구장', '족구장', '게이트볼장', '운동기구14개, 농구장2개소, 족구장1개소', '운동기구6개, 족구장1개소', '운동기구10개', '운동기구4개', '운동기구7개', '에어로빅장, 농구장', '테니스장, 씨름장, 농구장', '바디싣업1,스트레칭롤러1,전신돌리기1,허리안마기1,허리비틀기1', 'TM스탭사이클1,TM체어웨이트1,TM트윈바디싣업1,TM트윈트위스트1,TM크로스컨트리1,TM풀웨이트1', '철봉1', '하늘걷기1,마라톤운동1,허리돌리기1,3단철봉,윗몸일으키기1', '철봉1,팔굽혀펴기1,몸통돌리기1,허리좌우로흔들기1', '스트레칭롤러1,풀웨이트1,바웨이트1', '하늘걷기1,온몸허리돌리기1,스트레칭기1,거꾸로매달리기1', '하늘걷기1,온몸허리돌리기1,등허리지압기1,철봉3', '스탭싸이클1,풀웨이트1,트리플트위스트2,트윈바디싣업1,크로스컨트리1,스트레칭롤러1,트윈워밍암1', '하늘걷기2,스탭싸이클1,체어폴1,철봉1,트리플트위스트2,트윈바디싣업1', '윗몸일으키기1,온몸허리돌리기1,팔굽혀펴기1,다리뻗치기1,온몸허리돌리기1,거꾸로매달리기1', '하늘걷기1,온몸허리돌리기1,옆파도타기1', '크로스워킹+스카이워킹1,파워프레스+풀웨이트1,싸이클론+트위스트1,스탠드업+마사지롤1,사이드스윙+터닝암1,푸시웨이트+레그프레스1', '평행봉1', '트윈바디싣업1,트윈트위스트1,스탭싸이클1,크로스컨트리1,체어풀1', '크로스컨트리1,자전거팔뻗기2,등안마기1,트윈워밍암1,체어웨이트1,오버턴스트레칭1', '크로스컨트리1,롤링웨이스트1,레그프레스1,트윈트위스트1,체어웨이트1', '족구장1,역기1', '등지압기1,마라톤운동+공중걷기운동1,허리돌리기+온몸돌리기1, 온몸역기올리기+온몸근육풀기1', '트리플트위스트1,트윈바디싣업1,크로스컨트"
</pre>

```python
# replace
gym = gym.replace("+", ",").replace("'", ",").replace(" ", ",").replace("/", ",")
gym[:1000]
```

<pre>
'[,4,,,,7,,,nan,,,8,,,,5,,,,6,,,,3,,,,10,,,,14,,,,9,,,,30,,,,2,,,,13,,,,12,,,,40,,,,17,,,,-,,,,농구장,,,,궁도장,,,,풋살구장,,,,풋살구장,,농구장,,인라인스케이트장,,,,축구장,,,,족구장,,,,게이트볼장,,,,운동기구14개,,농구장2개소,,족구장1개소,,,,운동기구6개,,족구장1개소,,,,운동기구10개,,,,운동기구4개,,,,운동기구7개,,,,에어로빅장,,농구장,,,,테니스장,,씨름장,,농구장,,,,바디싣업1,스트레칭롤러1,전신돌리기1,허리안마기1,허리비틀기1,,,,TM스탭사이클1,TM체어웨이트1,TM트윈바디싣업1,TM트윈트위스트1,TM크로스컨트리1,TM풀웨이트1,,,,철봉1,,,,하늘걷기1,마라톤운동1,허리돌리기1,3단철봉,윗몸일으키기1,,,,철봉1,팔굽혀펴기1,몸통돌리기1,허리좌우로흔들기1,,,,스트레칭롤러1,풀웨이트1,바웨이트1,,,,하늘걷기1,온몸허리돌리기1,스트레칭기1,거꾸로매달리기1,,,,하늘걷기1,온몸허리돌리기1,등허리지압기1,철봉3,,,,스탭싸이클1,풀웨이트1,트리플트위스트2,트윈바디싣업1,크로스컨트리1,스트레칭롤러1,트윈워밍암1,,,,하늘걷기2,스탭싸이클1,체어폴1,철봉1,트리플트위스트2,트윈바디싣업1,,,,윗몸일으키기1,온몸허리돌리기1,팔굽혀펴기1,다리뻗치기1,온몸허리돌리기1,거꾸로매달리기1,,,,하늘걷기1,온몸허리돌리기1,옆파도타기1,,,,크로스워킹,스카이워킹1,파워프레스,풀웨이트1,싸이클론,트위스트1,스탠드업,마사지롤1,사이드스윙,터닝암1,푸시웨이트,레그프레스1,,,,평행봉1,,,,트윈바디싣업1,트윈트위스트1,스탭싸이클1,크로스컨트리1,체어풀1,,,,크로스컨트리1,자전거팔뻗기2,등안마기1,트윈워밍암1,체어웨이트1,오버턴스트레칭1,,,,크로스컨트리1,롤링웨이스트1,레그프레스1,트윈트위스트1,체어웨이트1,,,,족구장1,역기1,,,,등지압기1,마라톤운동,공중걷기운동1,허리돌리기,온몸돌리기1,,온몸역기올리기,온몸근육풀기1,,,,트리플트위스트1,트윈바디싣업1,크로스컨트'
</pre>

```python
# 제거할 특수문자를 빈문자로 대체합니다.
# re.sub('[?.,;:|\)*~`’!^\-_+<>@\#$%&-=#}※]', '', text)

# 정규표현식에서 +, *, . 등은 특별한 의미를 갖습니다. 
# 이런 문자를 제거할 때는 \를 통해 예외처리를 합니다. 
# 예를들어 .이라면 \. 으로 사용합니다.
# 여기에서는 숫자와 .을 제거하도록 합니다.

# []: 해당 패턴들에 대해서, \[: 대괄호 여는 것, \d: 숫자, \-: 대쉬 제거, nan: nan 제거, \]: 대괄호 닫는 것
gym = re.sub("[\[\d\-nan\.\]]", "", gym)
# ,{2,}: ,가 2번 이상 반복될 때
gym = re.sub(",{2,}", ",", gym)
gym[:1000]
```

<pre>
',농구장,궁도장,풋살구장,풋살구장,농구장,인라인스케이트장,축구장,족구장,게이트볼장,운동기구개,농구장개소,족구장개소,운동기구개,족구장개소,운동기구개,운동기구개,운동기구개,에어로빅장,농구장,테니스장,씨름장,농구장,바디싣업,스트레칭롤러,전신돌리기,허리안마기,허리비틀기,TM스탭사이클,TM체어웨이트,TM트윈바디싣업,TM트윈트위스트,TM크로스컨트리,TM풀웨이트,철봉,하늘걷기,마라톤운동,허리돌리기,단철봉,윗몸일으키기,철봉,팔굽혀펴기,몸통돌리기,허리좌우로흔들기,스트레칭롤러,풀웨이트,바웨이트,하늘걷기,온몸허리돌리기,스트레칭기,거꾸로매달리기,하늘걷기,온몸허리돌리기,등허리지압기,철봉,스탭싸이클,풀웨이트,트리플트위스트,트윈바디싣업,크로스컨트리,스트레칭롤러,트윈워밍암,하늘걷기,스탭싸이클,체어폴,철봉,트리플트위스트,트윈바디싣업,윗몸일으키기,온몸허리돌리기,팔굽혀펴기,다리뻗치기,온몸허리돌리기,거꾸로매달리기,하늘걷기,온몸허리돌리기,옆파도타기,크로스워킹,스카이워킹,파워프레스,풀웨이트,싸이클론,트위스트,스탠드업,마사지롤,사이드스윙,터닝암,푸시웨이트,레그프레스,평행봉,트윈바디싣업,트윈트위스트,스탭싸이클,크로스컨트리,체어풀,크로스컨트리,자전거팔뻗기,등안마기,트윈워밍암,체어웨이트,오버턴스트레칭,크로스컨트리,롤링웨이스트,레그프레스,트윈트위스트,체어웨이트,족구장,역기,등지압기,마라톤운동,공중걷기운동,허리돌리기,온몸돌리기,온몸역기올리기,온몸근육풀기,트리플트위스트,트윈바디싣업,크로스컨트리,체어웨이트,롤링웨이스트,레그프레스,오버턴스트레칭,윗몸일으키기,트리플트위스트,평행봉,크로스컨트리,레그프레스,체어웨이트,롤링웨이스트,트윈바디싣업,레그스트레칭,크로스컨트리,어깨근육풀기,체어웨이트,트윈바디싣업(구형),트리플트위스트(구형),게이트볼장,운동시설,축구장,족구장,족구장,운동기구,운동기구,축구장,배드민턴장,농구장,배드민턴장,족구장,농구대,배드민턴장,배드민턴장,농구대,농구장,개소,배드민턴장,게이트볼장,개소,체력단련시설,개소,기,등,배드민턴장,개소,체력단련시설,개소,개,배드민턴장,개소,농구장,개소,체력단련시설,개소,개,다목적'
</pre>

```python
# split을 사용해 문자열을 ,로 리스트형태로 만든 후에 
# 판다스의 시리즈 형태로 데이터를 만들면 빈도수를 구할 수 있습니다.
# 빈도수는 gym_count 라는 변수에 담습니다.

gym_count = pd.Series(gym.split(",")).value_counts()
gym_count
```

<pre>
배드민턴장       221
농구장         216
운동기구        185
게이트볼장       156
체력단련시설      148
           ... 
멀티스포츠센터       1
생활운동시설        1
다목적은동장        1
배드민터운동기구      1
크라임스템퍼        1
Name: count, Length: 604, dtype: int64
</pre>

```python
# 빈도수를 구한 gym_count 변수에서 head를 통해 상위 50개 단어에 대한 그래프를 그립니다.
gym_count.head(50).plot.bar(figsize=(15, 4))
```

<img width="850" alt="park_output_6" src="https://github.com/zacinthepark/TIL/assets/86648892/66bbfa6c-9bc7-41a7-9b0e-92be05f53ce0">

### 워드클라우드로 빈도수 표현하기

[amueller/word_cloud: A little word cloud generator in Python](https://github.com/amueller/word_cloud)

* 별도의 설치가 필요합니다. 
* 다음 명령어로 설치가 가능합니다. conda prompt 혹은 터미널을 열어 설치해 주세요.
* conda 사용시 : `conda install -c conda-forge wordcloud`
* pip 사용시 : `pip install wordcloud`

```python
# 공식문서의 튜토리얼을 보고 wordcloud를 그리는 함수를 만들어 봅니다.
# 이때 폰트 설정시 폰트명이 아닌 폰트의 설치 경로를 입력해 주셔야 합니다.
# 윈도우 : r"C:\Windows\Fonts\malgun.ttf" 해당 경로에 폰트가 있는지 확인을 해주세요.
# 맥 : r"/Library/Fonts/AppleGothic.ttf"
# 나눔고딕 등의 폰트를 설치했다면 : '/Library/Fonts/NanumBarunGothic.ttf'

from wordcloud import WordCloud

def wordcloud(data, width=1200, height=500):
    word_draw = WordCloud(
        font_path=r"/Library/Fonts/AppleGothic.ttf",
        width=width, height=height,
        stopwords=["운동기구", "개소", "외종"], 
        background_color="white",
        random_state=42
    )
    word_draw.generate(data)

    plt.figure(figsize=(15, 7))
    plt.imshow(word_draw)  # image show
    plt.axis("off")
    plt.show()
```

```python
# 위에서 만든 함수에 전처리한 text인 gym을 넣어 그려봅니다.
wordcloud(gym, width=1200, height=700)
```

<img width="856" alt="park_output_7" src="https://github.com/zacinthepark/TIL/assets/86648892/fed6b690-e1f7-4eee-828a-709bb6462445">

### 편익시설

```python
conv = df["공원보유시설(운동시설)"].unique().tolist()
conv = str(conv)
conv[:1000]
```

<pre>
"['4', '7', nan, '8', '5', '6', '3', '10', '14', '9', '30', '2', '13', '12', '40', '17', '-', '농구장', '궁도장', '풋살구장', '풋살구장, 농구장, 인라인스케이트장', '축구장', '족구장', '게이트볼장', '운동기구14개, 농구장2개소, 족구장1개소', '운동기구6개, 족구장1개소', '운동기구10개', '운동기구4개', '운동기구7개', '에어로빅장, 농구장', '테니스장, 씨름장, 농구장', '바디싣업1,스트레칭롤러1,전신돌리기1,허리안마기1,허리비틀기1', 'TM스탭사이클1,TM체어웨이트1,TM트윈바디싣업1,TM트윈트위스트1,TM크로스컨트리1,TM풀웨이트1', '철봉1', '하늘걷기1,마라톤운동1,허리돌리기1,3단철봉,윗몸일으키기1', '철봉1,팔굽혀펴기1,몸통돌리기1,허리좌우로흔들기1', '스트레칭롤러1,풀웨이트1,바웨이트1', '하늘걷기1,온몸허리돌리기1,스트레칭기1,거꾸로매달리기1', '하늘걷기1,온몸허리돌리기1,등허리지압기1,철봉3', '스탭싸이클1,풀웨이트1,트리플트위스트2,트윈바디싣업1,크로스컨트리1,스트레칭롤러1,트윈워밍암1', '하늘걷기2,스탭싸이클1,체어폴1,철봉1,트리플트위스트2,트윈바디싣업1', '윗몸일으키기1,온몸허리돌리기1,팔굽혀펴기1,다리뻗치기1,온몸허리돌리기1,거꾸로매달리기1', '하늘걷기1,온몸허리돌리기1,옆파도타기1', '크로스워킹+스카이워킹1,파워프레스+풀웨이트1,싸이클론+트위스트1,스탠드업+마사지롤1,사이드스윙+터닝암1,푸시웨이트+레그프레스1', '평행봉1', '트윈바디싣업1,트윈트위스트1,스탭싸이클1,크로스컨트리1,체어풀1', '크로스컨트리1,자전거팔뻗기2,등안마기1,트윈워밍암1,체어웨이트1,오버턴스트레칭1', '크로스컨트리1,롤링웨이스트1,레그프레스1,트윈트위스트1,체어웨이트1', '족구장1,역기1', '등지압기1,마라톤운동+공중걷기운동1,허리돌리기+온몸돌리기1, 온몸역기올리기+온몸근육풀기1', '트리플트위스트1,트윈바디싣업1,크로스컨트"
</pre>

```python
# 편익시설에서 필요 없는 문자를 제거하고
# 토큰화를 위해 각 시설을 "," 로 구분하도록 전처리를 하는 함수를 구현합니다. 
# 함수명은 get_string 으로 합니다.

def get_string(text):
    # 결측치 처리
    # 결측치일 시 바로 반환
    if pd.isna(text):
        return text

    # 숫자 . ' - nan [ ] / 제거
    # (nan)은 nan이라는 그룹을 처리
    text = re.sub("[\d\.'\-(nan)\[\]\/]", "", text)
    # 공백 없애기
    text = re.sub(" ", "", text)
    # ,가 2번 이상 반복되면 , 1개로 변경
    text = re.sub(",{2,}", ",", text)
    return text
```

```python
# 함수가 잘 구현되었는지 확인해 봅니다.
# 다음의 문자를 전처리 했을 때  
# "[1. '화장실' 5, 2. 주차장, -, nan]" 전처리 후 '화장실,주차장,' 가 출력되는지 확인해 주세요.

get_string("[1. '화장실' 5, 2. 주차장, -, nan, /]")
```

<pre>
'화장실,주차장,'
</pre>

```python
# 결측치를 넣어봅니다. 오류가 나지 않는지 확인해 주세요.

get_string(np.nan)
```

<pre>
nan
</pre>

```python
# map을 통해 위에서 구현한 함수를 적용해 줍니다.
# 원본과 비교해 보기 위해 "편익시설"이라는 새로운 컬럼을 만듭니다.

df["편익시설"] = df["공원보유시설(편익시설)"].map(get_string)
df["편익시설"].head()
```

<pre>
0    화장실
1    NaN
2    NaN
3    NaN
4    NaN
Name: 편익시설, dtype: object
</pre>

```python
# 편익시설 확인
df["편익시설"].value_counts()
```

<pre>
편익시설
화장실                      1086
                          213
벤치                        193
정자,벤치                     165
주차장,화장실                   141
                         ... 
파고라,전망데크,벤치,화장실             1
주차장,매점,화장실,음수대등             1
자전거보관대,파고라,벤치,안내판           1
자전거보관대,하고라,벤치,안내판,파고라       1
주차장,화장실,음수대,공중전화            1
Name: count, Length: 730, dtype: int64
</pre>

```python
type(np.nan)
```

<pre>
float
</pre>

```python
# 문자열을 연결해 주는 join 으로 편익시설을 연결해 주는 방법이 있습니다.
# 이 때, 결측치가 있으면 결측치는 숫자형태이기 때문에 문자와 연결되지 않아 오류가 납니다.
# 따라서 결측치를 제외한 값만 가져와서 연결합니다.

fac = ",".join(df.loc[df["편익시설"].notnull(), "편익시설"])
fac = get_string(fac)
fac[:100]
```

<pre>
'화장실,화장실,화장실,주차장,관리사무소,화장실,화장실,화장실,주차장,화장실,주차장,화장실,주차장,문화회관,화장실,화장실,화장실,음수전,음수전,주차장,주차장,화장실,화장실,주차장,화'
</pre>

```python
# 위에서 전처리한 "편익시설" 컬럼을 리스트 형태로 만들고 다시 str 으로 변환 합니다. 
# 위에서 만든 get_string 함수로 전처리를 합니다.
fac = str(df["편익시설"].tolist())
fac = get_string(fac)
fac[:100]
```

<pre>
'화장실,화장실,화장실,주차장,관리사무소,화장실,화장실,화장실,주차장,화장실,주차장,화장실,주차장,문화회관,화장실,화장실,화장실,음수전,음수전,주차장,주차장,화장실,화장실,주차장,화'
</pre>

```python
# ,가 2개 이상 들어가면 하나로 변경합니다.
# '화장실,주차장,,,' 텍스트를 정규표현식으로 바꿔봅니다.

re.sub(",{2,}", ",", '화장실,주차장,,,')
```

<pre>
'화장실,주차장,'
</pre>

```python
# 다시 ","로 텍스트를 분리하고 판다스의 Series 형태로 만들고 value_counts 로 빈도수를 계산합니다.

fac_count = pd.Series(fac.split(",")).value_counts()
fac_count.head()
```

<pre>
화장실    1921
파고라     817
벤치      650
정자      535
주차장     502
Name: count, dtype: int64
</pre>

```python
# 상위 50개 단어에 대해 막대그래프를 그려봅니다.

fac_count.head(50).plot.bar(figsize=(15, 4))
```

<img width="857" alt="park_output_8" src="https://github.com/zacinthepark/TIL/assets/86648892/ad98995a-04e2-4548-9609-1b4c841aced8">

```python
wordcloud(fac)
```

<img width="858" alt="park_output_9" src="https://github.com/zacinthepark/TIL/assets/86648892/29ce2650-1596-4ded-b653-dadf0b08697f">

### 키워드 별 빈도수 구하기

* 위에서 빈도수를 구해보니 "파고라", "파고라등" 이라는 두 개의 단어가 다른 빈도로 세어졌습니다.
* "화장실"도 "화장실동", "공중화장실" 등 다양한 텍스트가 있는 것을 볼 수 있습니다.
* 일일이 전처리를 해주면 좋지만 데이터 전처리에는 많은 예외가 등장합니다.
* 그래서 때로는 보고자 하는 키워드를 넣고 빈도수를 구하는게 전처리를 하는 작업보다 빠를 때도 있습니다.
* 여기에서는 운동시설이나 편의시설이 있는데 특정 시설을 키워드에 넣고 구하는 방법을 사용해 봅니다.

```python
# "공원보유시설(편익시설)" 에서 문자열 처리를 하기 위해 결측치를 제외한 값을 가져옵니다.
# df_fac 이라는 변수에 담습니다.
facilities = ["화장실", "주차장", "음수대", "파고라", "정자", 
              "벤치", "의자", "놀이터", "축구장", "야영장", "CCTV"]

# 편익시설이 있는 데이터
df_fac = df[df["공원보유시설(편익시설)"].notnull()]
```

```python
# facilities 리스트에 있는 값으로 for문을 활용해 컬럼을 만듭니다.
# 해당 단어가 들어가면 True, 아니면 False로 값이 표현되도록 합니다.

for f in facilities:
    df[f] = df_fac["공원보유시설(편익시설)"].str.contains(f)
```

```python
# facilities 리스트로 만든 각 컬럼의 빈도수를 구합니다. 
display(df[facilities])
df[facilities].sum()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>화장실</th>
      <th>주차장</th>
      <th>음수대</th>
      <th>파고라</th>
      <th>정자</th>
      <th>벤치</th>
      <th>의자</th>
      <th>놀이터</th>
      <th>축구장</th>
      <th>야영장</th>
      <th>CCTV</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>18132</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>18133</th>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>18134</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>18135</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>18136</th>
      <td>True</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>18137 rows × 11 columns</p>
</div>

<pre>
화장실     2208
주차장      611
음수대      493
파고라     1032
정자       648
벤치       850
의자       949
놀이터       21
축구장        6
야영장        3
CCTV       6
dtype: object
</pre>

## 특정 정보 마스킹

### 전화번호 마스킹

```python
# 가운데가 4자리일 때 번호 마스킹 "010-1234-5678"

# re.sub("규칙", "패턴", "데이터")

# 규칙
# (\d{3}) 는 숫자 3자리를 의미합니다.
# (\d{1,2}) 는 숫자 1~2자리를 의미합니다.

# 패턴
# r"\1-\2**-**\5" 의 "\숫자"는 앞에서 () 안에 정의한 값의 순서를 의미합니다. 
# 변수의 순서라고 생각해도 됩니다.
# 여기에서 \3, \4는 쓰지 않고 * 로 대체했습니다.
# r은 raw를 의미합니다.

re.sub("(\d{3})-(\d{2})(\d{2})-(\d{2})(\d{2})", r"\1-\2**-**\5", "010-1234-5678")
```

<pre>
'010-12**-**78'
</pre>

```python
# 가운데가 3자리일 때 번호 마스킹이 잘 동작하는지 확인 "010-123-5678"

re.sub("(\d{3})-(\d{1,2})(\d{2})-(\d{2})(\d{2})", r"\1-\2**-**\5", "010-123-5678")
```

<pre>
'010-1**-**78'
</pre>

```python
# 가운데가 2자리일 때는 마스킹 없이 보이는지 확인하기 "010-12-5678"
# 전체적인 패턴이 맞아야 마스킹 처리됨

re.sub("(\d{3})-(\d{1,2})(\d{2})-(\d{2})(\d{2})", r"\1-\2**-**\5", "010-12-5678")
```

<pre>
'010-12-5678'
</pre>

```python
# 국가 번호가 들어갈 때 확인하기 "+82-10-1234-5678"
# - 가 들어가거나 여러 예외사항이 있을 때 마스킹 되지 않을 수 있음 그렇다면 함수를 만들어서 해결해 보기

re.sub("(\d{3})-(\d{1,2})(\d{2})-(\d{2})(\d{2})", r"\1-\2**-**\5", "+82-10-1234-5678")
```

<pre>
'+82-10-1234-5678'
</pre>

```python
# 함수를 통해 가운데 들어오는 번호를 마스킹 하도록 처리
# 국제번호 등 다양한 형식의 번호가 들어왔을 때 
# - 를 기준으로 뒤에서 두 번째 항목을 마스킹 처리 하되, 
# 마지막 자리는 앞 두자리만 마스킹 합니다.
# 함수명은 mask_phone_number 로 합니다.

phone = "+82-10-1234-5678"

def mask_phone_number(phone):
    # 결측치 체크
    if pd.isnull(phone):
        return phone
    
    num = phone.split("-")  # [+82, 10, 1234, 5678]
    num_len = len(num) // 2

    # \w: 모든 숫자 영문자와 일치
    num[num_len] = re.sub("\w", "*", num[num_len])  # 1234 모두 마스킹 처리
    num[-1] = re.sub("(\d{2})(\d{2})", r"**\2", num[-1])  # 5678 앞에 2자리 마스킹 처리
    
    return "-".join(num)

mask_phone_number(phone)
```

<pre>
'+82-10-****-**78'
</pre>

```python
# 결측치가 들어갔을 때 오류가 날 수 있기 때문에 결측치를 체크합니다.

mask_phone_number(np.nan)
```

<pre>
nan
</pre>

```python
# 위에서 만든 함수를 map을 통해 적용합니다.

df["전화번호(전처리)"] = df["전화번호"].map(mask_phone_number)
df[["공원명", "전화번호", "전화번호(전처리)"]].sample(10)
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>공원명</th>
      <th>전화번호</th>
      <th>전화번호(전처리)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>13636</th>
      <td>검다메2길 공원</td>
      <td>063-454-2982</td>
      <td>063-***-**82</td>
    </tr>
    <tr>
      <th>12037</th>
      <td>상동공원</td>
      <td>053-666-2902</td>
      <td>053-***-**02</td>
    </tr>
    <tr>
      <th>10941</th>
      <td>가흥제3공원</td>
      <td>054-639-6674</td>
      <td>054-***-**74</td>
    </tr>
    <tr>
      <th>10893</th>
      <td>염소자리공원</td>
      <td>032-560-4805</td>
      <td>032-***-**05</td>
    </tr>
    <tr>
      <th>10480</th>
      <td>샛별</td>
      <td>02-2241-3668</td>
      <td>02-****-**68</td>
    </tr>
    <tr>
      <th>4703</th>
      <td>효자3</td>
      <td>054-270-5564</td>
      <td>054-***-**64</td>
    </tr>
    <tr>
      <th>4140</th>
      <td>서문공원(홍성10호)</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5482</th>
      <td>용광공원</td>
      <td>032-453-2850</td>
      <td>032-***-**50</td>
    </tr>
    <tr>
      <th>2165</th>
      <td>상금천공원</td>
      <td>061-659-4627</td>
      <td>061-***-**27</td>
    </tr>
    <tr>
      <th>16250</th>
      <td>우아구역</td>
      <td>063-270-6389</td>
      <td>063-***-**89</td>
    </tr>
  </tbody>
</table>
</div>

### 이메일 주소 마스킹

* 해당 데이터에는 이메일 주소가 없지만 정규표현식을 더 연습해 보기 위해 이메일주소도 마스킹처리를 해봅니다.

```python
# 이메일 주소의 형식만 남기고 모두 마스크처리 합니다.
email = "address@mail.com"

# @ 와 . 을 포함하지 않는 패턴
re.sub("[^@.]", "x", email)
```

<pre>
'xxxxxxx@xxxx.xxx'
</pre>

```python
# 이메일 주소 아이디의 일부만 마스크처리 합니다. 
# 이 때 맨 앞과 맨 뒤 문자는 그대로 놔두고 나머지 문자에 대해 마스크 처리리를 합니다.
email = "address@mail.com"

address, domain = email.split("@")
mask = re.sub("\w", "*", address[1:-1])
print(f"{address[0]}{mask}{address[-1]}@{domain}")
print(email)
```

<pre>
a*****s@mail.com
address@mail.com
</pre>

```python
# 위에서 작성한 예제를 함수로 만듭니다.
def mask_email(email):
    address, domain = email.split("@")
    mask = re.sub("\w", "*", address[1:-1])
    return f"{address[0]}{mask}{address[-1]}@{domain}"
    
mask_email(email)
```

<pre>
'a*****s@mail.com'
</pre>

```python
# "1234address_123@gmail.com"를 마스킹 처리 합니다.

mask_email("1234address_123@gmail.com")
```

<pre>
'1*************3@gmail.com'
</pre>

### 자동차 등록번호 마스킹

* 역시나 해당 데이터에는 자동차 등록번호가 없지만 정규표현식을 더 연습해 보기 위해 마스킹처리를 해봅니다.

```python
# 자동차 등록번호를 마스킹 합니다.
# r'*\2\3**\5' 여기에서 \1 에 해당되는 한글 앞의 숫자는 몇 자리가 들어가든 한글 바로 앞의 마지막 한자리만 봅니다.
# 따라서 앞에 있는 숫자는 마지막 번호만 마스킹 하게 됩니다.
car_num = "32가1234"

# ([0-9])([가-힣])([\d])([\d]{2})([\d]): 십진수 한글 십진수 십진수2번반복 십진수
re.sub("([0-9])([가-힣])([\d])([\d]{2})([\d])", r"*\2\3**\5", car_num)
```

<pre>
'3*가1**4'
</pre>

```python
# 자동차 등록번호를 마스킹 합니다. 
car_num = "안녕하세요. 자동차 등록 번호는 132가1234 입니다."

re.sub("([0-9])([가-힣])([\d])([\d]{2})([\d])", r"*\2\3**\5", car_num)
```

<pre>
'안녕하세요. 자동차 등록 번호는 13*가1**4 입니다.'
</pre>

# 데이터 요약하기

### 수치형, 범주형 변수 구분하기

```python
# data_types 변수에 데이터 타입만 따로 모으기

data_types = df.dtypes
data_types[:5]
```

<pre>
관리번호        object
공원명         object
공원구분        object
소재지도로명주소    object
소재지지번주소     object
dtype: object
</pre>

## 수치형 변수 요약

```python
# 수치형 변수 구하기
# var_numbers 변수에 담습니다.

var_numbers = data_types[data_types != "object"]
var_numbers = var_numbers.index.tolist()
var_numbers
```

<pre>
['위도', '경도', '공원면적', '지정고시일', '고시연도', '고시월']
</pre>

```python
# 히스토그램을 그리면 수치형 변수에 대한 빈도수 분포를 확인할 수 있습니다.
# 빈도수 분포 => 도수 분포표를 시각화 합니다.

h = df.hist(figsize=(12, 10))
```

<img width="852" alt="park_output_10" src="https://github.com/zacinthepark/TIL/assets/86648892/cf9f035c-56c4-4a5d-b7b4-b7ff0e562a03">

```python
# describe 를 통해 요약합니다.

df.describe()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>위도</th>
      <th>경도</th>
      <th>공원면적</th>
      <th>지정고시일</th>
      <th>고시연도</th>
      <th>고시월</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>18137.000000</td>
      <td>18137.000000</td>
      <td>1.813700e+04</td>
      <td>15225</td>
      <td>15225.000000</td>
      <td>15225.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>36.335922</td>
      <td>127.543937</td>
      <td>3.781196e+04</td>
      <td>1997-10-15 01:47:32.334975232</td>
      <td>1997.238555</td>
      <td>7.097274</td>
    </tr>
    <tr>
      <th>min</th>
      <td>27.551606</td>
      <td>125.430955</td>
      <td>0.000000e+00</td>
      <td>1905-06-19 00:00:00</td>
      <td>1905.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>35.275430</td>
      <td>126.872301</td>
      <td>1.503000e+03</td>
      <td>1989-08-07 00:00:00</td>
      <td>1989.000000</td>
      <td>4.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>36.364729</td>
      <td>127.130926</td>
      <td>2.159000e+03</td>
      <td>2000-06-30 00:00:00</td>
      <td>2000.000000</td>
      <td>7.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>37.404278</td>
      <td>128.466193</td>
      <td>1.025460e+04</td>
      <td>2008-05-08 00:00:00</td>
      <td>2008.000000</td>
      <td>11.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>38.224926</td>
      <td>137.202661</td>
      <td>8.703000e+06</td>
      <td>2019-05-04 00:00:00</td>
      <td>2019.000000</td>
      <td>12.000000</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.051835</td>
      <td>0.892670</td>
      <td>2.203052e+05</td>
      <td>NaN</td>
      <td>13.592078</td>
      <td>3.753724</td>
    </tr>
  </tbody>
</table>
</div>

## 범주형 변수 요약

```python
# 범주형 변수 구하기
# var_objects 라는 변수에 저장합니다.

var_objects = data_types[data_types == "object"]
var_objects = var_objects.index.tolist()
var_objects[:5]
```

<pre>
['관리번호', '공원명', '공원구분', '소재지도로명주소', '소재지지번주소']
</pre>

```python
# 문자열 타입의 데이터 describe 로 요약하기

df.describe(include="object")
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>관리번호</th>
      <th>공원명</th>
      <th>공원구분</th>
      <th>소재지도로명주소</th>
      <th>소재지지번주소</th>
      <th>공원보유시설(운동시설)</th>
      <th>공원보유시설(유희시설)</th>
      <th>공원보유시설(편익시설)</th>
      <th>공원보유시설(교양시설)</th>
      <th>공원보유시설(기타시설)</th>
      <th>관리기관명</th>
      <th>전화번호</th>
      <th>데이터기준일자</th>
      <th>제공기관코드</th>
      <th>제공기관명</th>
      <th>시도</th>
      <th>구군</th>
      <th>편익시설</th>
      <th>화장실</th>
      <th>주차장</th>
      <th>음수대</th>
      <th>파고라</th>
      <th>정자</th>
      <th>벤치</th>
      <th>의자</th>
      <th>놀이터</th>
      <th>축구장</th>
      <th>야영장</th>
      <th>CCTV</th>
      <th>전화번호(전처리)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>18137</td>
      <td>18137</td>
      <td>18137</td>
      <td>18137</td>
      <td>17158</td>
      <td>4845</td>
      <td>6964</td>
      <td>5084</td>
      <td>1160</td>
      <td>3116</td>
      <td>17383</td>
      <td>16957</td>
      <td>18137</td>
      <td>18137</td>
      <td>18137</td>
      <td>18137</td>
      <td>18137</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>5084</td>
      <td>16957</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>14710</td>
      <td>12423</td>
      <td>10</td>
      <td>15186</td>
      <td>14419</td>
      <td>1485</td>
      <td>1237</td>
      <td>1102</td>
      <td>378</td>
      <td>993</td>
      <td>279</td>
      <td>497</td>
      <td>112</td>
      <td>219</td>
      <td>219</td>
      <td>17</td>
      <td>232</td>
      <td>730</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>395</td>
    </tr>
    <tr>
      <th>top</th>
      <td>31110-60001</td>
      <td>공원</td>
      <td>어린이공원</td>
      <td>전라남도 무안군 삼향읍 남악리 미지정 간척지</td>
      <td>전라남도 무안군 삼향읍 남악리 미지정 간척지</td>
      <td>운동기구</td>
      <td>조합놀이대</td>
      <td>화장실</td>
      <td>-</td>
      <td>-</td>
      <td>경상남도 창원시청</td>
      <td>055-212-4501</td>
      <td>2019-09-24</td>
      <td>5670000</td>
      <td>경상남도 창원시</td>
      <td>경기도</td>
      <td>창원시</td>
      <td>화장실</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>055-***-**01</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>124</td>
      <td>145</td>
      <td>9987</td>
      <td>18</td>
      <td>18</td>
      <td>360</td>
      <td>1526</td>
      <td>1037</td>
      <td>250</td>
      <td>141</td>
      <td>1176</td>
      <td>344</td>
      <td>1344</td>
      <td>1176</td>
      <td>1176</td>
      <td>3318</td>
      <td>1176</td>
      <td>1086</td>
      <td>2876</td>
      <td>4473</td>
      <td>4591</td>
      <td>4052</td>
      <td>4436</td>
      <td>4234</td>
      <td>4135</td>
      <td>5063</td>
      <td>5078</td>
      <td>5081</td>
      <td>5078</td>
      <td>696</td>
    </tr>
  </tbody>
</table>
</div>

## crosstab

* 범주형 변수끼리의 빈도수 구하기
* 수치형 변수는 pivot_table 사용

```python
# 관리기관과 공원구분에 따른 빈도수를 구합니다.
# 결과가 많기 때문에 "체육공원"을 5개 이상 관리하는 기관명만 따로 뽑습니다.
# 숫자의 많고 적음 표시를 위해 style.background_gradient() 를 사용합니다.
# 결과를 manage_category 변수에 담습니다.

manage_category = pd.crosstab(index=df["관리기관명"], columns=df["공원구분"])
display(manage_category.loc[manage_category["체육공원"] > 5])
manage_category[manage_category["체육공원"] > 5].style.background_gradient()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>공원구분</th>
      <th>근린공원</th>
      <th>기타</th>
      <th>도시농업공원</th>
      <th>묘지공원</th>
      <th>문화공원</th>
      <th>소공원</th>
      <th>수변공원</th>
      <th>어린이공원</th>
      <th>역사공원</th>
      <th>체육공원</th>
    </tr>
    <tr>
      <th>관리기관명</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>경기도 김포시 체육과</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>7</td>
    </tr>
    <tr>
      <th>경기도 남양주시청</th>
      <td>33</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>5</td>
      <td>25</td>
      <td>4</td>
      <td>68</td>
      <td>4</td>
      <td>6</td>
    </tr>
    <tr>
      <th>경기도 시흥시청</th>
      <td>37</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>7</td>
      <td>6</td>
      <td>3</td>
      <td>72</td>
      <td>0</td>
      <td>6</td>
    </tr>
    <tr>
      <th>경상남도 창원시청</th>
      <td>224</td>
      <td>0</td>
      <td>0</td>
      <td>8</td>
      <td>8</td>
      <td>100</td>
      <td>0</td>
      <td>816</td>
      <td>0</td>
      <td>20</td>
    </tr>
    <tr>
      <th>대전광역시 대덕구청</th>
      <td>11</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>0</td>
      <td>50</td>
      <td>1</td>
      <td>6</td>
    </tr>
    <tr>
      <th>성남시 공원과</th>
      <td>50</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>6</td>
    </tr>
    <tr>
      <th>전라남도 장성군청</th>
      <td>14</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>118</td>
      <td>2</td>
      <td>10</td>
      <td>2</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>

<table id="T_031cd">
  <thead>
    <tr>
      <th class="index_name level0" >공원구분</th>
      <th id="T_031cd_level0_col0" class="col_heading level0 col0" >근린공원</th>
      <th id="T_031cd_level0_col1" class="col_heading level0 col1" >기타</th>
      <th id="T_031cd_level0_col2" class="col_heading level0 col2" >도시농업공원</th>
      <th id="T_031cd_level0_col3" class="col_heading level0 col3" >묘지공원</th>
      <th id="T_031cd_level0_col4" class="col_heading level0 col4" >문화공원</th>
      <th id="T_031cd_level0_col5" class="col_heading level0 col5" >소공원</th>
      <th id="T_031cd_level0_col6" class="col_heading level0 col6" >수변공원</th>
      <th id="T_031cd_level0_col7" class="col_heading level0 col7" >어린이공원</th>
      <th id="T_031cd_level0_col8" class="col_heading level0 col8" >역사공원</th>
      <th id="T_031cd_level0_col9" class="col_heading level0 col9" >체육공원</th>
    </tr>
    <tr>
      <th class="index_name level0" >관리기관명</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
      <th class="blank col9" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_031cd_level0_row0" class="row_heading level0 row0" >경기도 김포시 체육과</th>
      <td id="T_031cd_row0_col0" class="data row0 col0" >0</td>
      <td id="T_031cd_row0_col1" class="data row0 col1" >0</td>
      <td id="T_031cd_row0_col2" class="data row0 col2" >0</td>
      <td id="T_031cd_row0_col3" class="data row0 col3" >0</td>
      <td id="T_031cd_row0_col4" class="data row0 col4" >0</td>
      <td id="T_031cd_row0_col5" class="data row0 col5" >0</td>
      <td id="T_031cd_row0_col6" class="data row0 col6" >0</td>
      <td id="T_031cd_row0_col7" class="data row0 col7" >0</td>
      <td id="T_031cd_row0_col8" class="data row0 col8" >0</td>
      <td id="T_031cd_row0_col9" class="data row0 col9" >7</td>
    </tr>
    <tr>
      <th id="T_031cd_level0_row1" class="row_heading level0 row1" >경기도 남양주시청</th>
      <td id="T_031cd_row1_col0" class="data row1 col0" >33</td>
      <td id="T_031cd_row1_col1" class="data row1 col1" >0</td>
      <td id="T_031cd_row1_col2" class="data row1 col2" >0</td>
      <td id="T_031cd_row1_col3" class="data row1 col3" >2</td>
      <td id="T_031cd_row1_col4" class="data row1 col4" >5</td>
      <td id="T_031cd_row1_col5" class="data row1 col5" >25</td>
      <td id="T_031cd_row1_col6" class="data row1 col6" >4</td>
      <td id="T_031cd_row1_col7" class="data row1 col7" >68</td>
      <td id="T_031cd_row1_col8" class="data row1 col8" >4</td>
      <td id="T_031cd_row1_col9" class="data row1 col9" >6</td>
    </tr>
    <tr>
      <th id="T_031cd_level0_row2" class="row_heading level0 row2" >경기도 시흥시청</th>
      <td id="T_031cd_row2_col0" class="data row2 col0" >37</td>
      <td id="T_031cd_row2_col1" class="data row2 col1" >0</td>
      <td id="T_031cd_row2_col2" class="data row2 col2" >1</td>
      <td id="T_031cd_row2_col3" class="data row2 col3" >0</td>
      <td id="T_031cd_row2_col4" class="data row2 col4" >7</td>
      <td id="T_031cd_row2_col5" class="data row2 col5" >6</td>
      <td id="T_031cd_row2_col6" class="data row2 col6" >3</td>
      <td id="T_031cd_row2_col7" class="data row2 col7" >72</td>
      <td id="T_031cd_row2_col8" class="data row2 col8" >0</td>
      <td id="T_031cd_row2_col9" class="data row2 col9" >6</td>
    </tr>
    <tr>
      <th id="T_031cd_level0_row3" class="row_heading level0 row3" >경상남도 창원시청</th>
      <td id="T_031cd_row3_col0" class="data row3 col0" >224</td>
      <td id="T_031cd_row3_col1" class="data row3 col1" >0</td>
      <td id="T_031cd_row3_col2" class="data row3 col2" >0</td>
      <td id="T_031cd_row3_col3" class="data row3 col3" >8</td>
      <td id="T_031cd_row3_col4" class="data row3 col4" >8</td>
      <td id="T_031cd_row3_col5" class="data row3 col5" >100</td>
      <td id="T_031cd_row3_col6" class="data row3 col6" >0</td>
      <td id="T_031cd_row3_col7" class="data row3 col7" >816</td>
      <td id="T_031cd_row3_col8" class="data row3 col8" >0</td>
      <td id="T_031cd_row3_col9" class="data row3 col9" >20</td>
    </tr>
    <tr>
      <th id="T_031cd_level0_row4" class="row_heading level0 row4" >대전광역시 대덕구청</th>
      <td id="T_031cd_row4_col0" class="data row4 col0" >11</td>
      <td id="T_031cd_row4_col1" class="data row4 col1" >1</td>
      <td id="T_031cd_row4_col2" class="data row4 col2" >0</td>
      <td id="T_031cd_row4_col3" class="data row4 col3" >0</td>
      <td id="T_031cd_row4_col4" class="data row4 col4" >3</td>
      <td id="T_031cd_row4_col5" class="data row4 col5" >8</td>
      <td id="T_031cd_row4_col6" class="data row4 col6" >0</td>
      <td id="T_031cd_row4_col7" class="data row4 col7" >50</td>
      <td id="T_031cd_row4_col8" class="data row4 col8" >1</td>
      <td id="T_031cd_row4_col9" class="data row4 col9" >6</td>
    </tr>
    <tr>
      <th id="T_031cd_level0_row5" class="row_heading level0 row5" >성남시 공원과</th>
      <td id="T_031cd_row5_col0" class="data row5 col0" >50</td>
      <td id="T_031cd_row5_col1" class="data row5 col1" >0</td>
      <td id="T_031cd_row5_col2" class="data row5 col2" >0</td>
      <td id="T_031cd_row5_col3" class="data row5 col3" >1</td>
      <td id="T_031cd_row5_col4" class="data row5 col4" >0</td>
      <td id="T_031cd_row5_col5" class="data row5 col5" >0</td>
      <td id="T_031cd_row5_col6" class="data row5 col6" >0</td>
      <td id="T_031cd_row5_col7" class="data row5 col7" >0</td>
      <td id="T_031cd_row5_col8" class="data row5 col8" >2</td>
      <td id="T_031cd_row5_col9" class="data row5 col9" >6</td>
    </tr>
    <tr>
      <th id="T_031cd_level0_row6" class="row_heading level0 row6" >전라남도 장성군청</th>
      <td id="T_031cd_row6_col0" class="data row6 col0" >14</td>
      <td id="T_031cd_row6_col1" class="data row6 col1" >0</td>
      <td id="T_031cd_row6_col2" class="data row6 col2" >0</td>
      <td id="T_031cd_row6_col3" class="data row6 col3" >0</td>
      <td id="T_031cd_row6_col4" class="data row6 col4" >4</td>
      <td id="T_031cd_row6_col5" class="data row6 col5" >118</td>
      <td id="T_031cd_row6_col6" class="data row6 col6" >2</td>
      <td id="T_031cd_row6_col7" class="data row6 col7" >10</td>
      <td id="T_031cd_row6_col8" class="data row6 col8" >2</td>
      <td id="T_031cd_row6_col9" class="data row6 col9" >6</td>
    </tr>
  </tbody>
</table>

```python
# "시도" 별 "공원구분" 의 수를 구합니다.

city_category = pd.crosstab(index=df["시도"], columns=df["공원구분"])
display(city_category)
city_category.style.background_gradient()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>공원구분</th>
      <th>근린공원</th>
      <th>기타</th>
      <th>도시농업공원</th>
      <th>묘지공원</th>
      <th>문화공원</th>
      <th>소공원</th>
      <th>수변공원</th>
      <th>어린이공원</th>
      <th>역사공원</th>
      <th>체육공원</th>
    </tr>
    <tr>
      <th>시도</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>강원도</th>
      <td>141</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>8</td>
      <td>85</td>
      <td>10</td>
      <td>391</td>
      <td>4</td>
      <td>6</td>
    </tr>
    <tr>
      <th>경기도</th>
      <td>806</td>
      <td>17</td>
      <td>1</td>
      <td>8</td>
      <td>91</td>
      <td>406</td>
      <td>61</td>
      <td>1821</td>
      <td>34</td>
      <td>73</td>
    </tr>
    <tr>
      <th>경상남도</th>
      <td>390</td>
      <td>0</td>
      <td>3</td>
      <td>8</td>
      <td>25</td>
      <td>178</td>
      <td>17</td>
      <td>1161</td>
      <td>12</td>
      <td>31</td>
    </tr>
    <tr>
      <th>경상북도</th>
      <td>178</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>18</td>
      <td>100</td>
      <td>26</td>
      <td>575</td>
      <td>11</td>
      <td>6</td>
    </tr>
    <tr>
      <th>광주광역시</th>
      <td>97</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>18</td>
      <td>5</td>
      <td>305</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>대구광역시</th>
      <td>125</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>57</td>
      <td>6</td>
      <td>381</td>
      <td>2</td>
      <td>10</td>
    </tr>
    <tr>
      <th>대전광역시</th>
      <td>99</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>12</td>
      <td>47</td>
      <td>12</td>
      <td>315</td>
      <td>1</td>
      <td>9</td>
    </tr>
    <tr>
      <th>부산광역시</th>
      <td>144</td>
      <td>16</td>
      <td>1</td>
      <td>2</td>
      <td>14</td>
      <td>96</td>
      <td>9</td>
      <td>365</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>서울특별시</th>
      <td>332</td>
      <td>70</td>
      <td>4</td>
      <td>1</td>
      <td>19</td>
      <td>183</td>
      <td>4</td>
      <td>1117</td>
      <td>11</td>
      <td>4</td>
    </tr>
    <tr>
      <th>세종특별자치시</th>
      <td>23</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>2</td>
      <td>3</td>
      <td>34</td>
      <td>3</td>
      <td>1</td>
    </tr>
    <tr>
      <th>울산광역시</th>
      <td>93</td>
      <td>28</td>
      <td>0</td>
      <td>3</td>
      <td>4</td>
      <td>152</td>
      <td>8</td>
      <td>582</td>
      <td>8</td>
      <td>9</td>
    </tr>
    <tr>
      <th>인천광역시</th>
      <td>183</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>6</td>
      <td>41</td>
      <td>4</td>
      <td>431</td>
      <td>1</td>
      <td>8</td>
    </tr>
    <tr>
      <th>전라남도</th>
      <td>360</td>
      <td>97</td>
      <td>0</td>
      <td>5</td>
      <td>43</td>
      <td>651</td>
      <td>75</td>
      <td>600</td>
      <td>22</td>
      <td>29</td>
    </tr>
    <tr>
      <th>전라북도</th>
      <td>396</td>
      <td>1</td>
      <td>1</td>
      <td>7</td>
      <td>28</td>
      <td>147</td>
      <td>14</td>
      <td>527</td>
      <td>11</td>
      <td>5</td>
    </tr>
    <tr>
      <th>제주특별자치도</th>
      <td>78</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>152</td>
      <td>3</td>
      <td>6</td>
    </tr>
    <tr>
      <th>충청남도</th>
      <td>462</td>
      <td>18</td>
      <td>1</td>
      <td>5</td>
      <td>29</td>
      <td>332</td>
      <td>20</td>
      <td>809</td>
      <td>27</td>
      <td>20</td>
    </tr>
    <tr>
      <th>충청북도</th>
      <td>263</td>
      <td>9</td>
      <td>0</td>
      <td>1</td>
      <td>11</td>
      <td>151</td>
      <td>26</td>
      <td>421</td>
      <td>10</td>
      <td>7</td>
    </tr>
  </tbody>
</table>
</div>

<table id="T_43dc2">
  <thead>
    <tr>
      <th class="index_name level0" >공원구분</th>
      <th id="T_43dc2_level0_col0" class="col_heading level0 col0" >근린공원</th>
      <th id="T_43dc2_level0_col1" class="col_heading level0 col1" >기타</th>
      <th id="T_43dc2_level0_col2" class="col_heading level0 col2" >도시농업공원</th>
      <th id="T_43dc2_level0_col3" class="col_heading level0 col3" >묘지공원</th>
      <th id="T_43dc2_level0_col4" class="col_heading level0 col4" >문화공원</th>
      <th id="T_43dc2_level0_col5" class="col_heading level0 col5" >소공원</th>
      <th id="T_43dc2_level0_col6" class="col_heading level0 col6" >수변공원</th>
      <th id="T_43dc2_level0_col7" class="col_heading level0 col7" >어린이공원</th>
      <th id="T_43dc2_level0_col8" class="col_heading level0 col8" >역사공원</th>
      <th id="T_43dc2_level0_col9" class="col_heading level0 col9" >체육공원</th>
    </tr>
    <tr>
      <th class="index_name level0" >시도</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
      <th class="blank col3" >&nbsp;</th>
      <th class="blank col4" >&nbsp;</th>
      <th class="blank col5" >&nbsp;</th>
      <th class="blank col6" >&nbsp;</th>
      <th class="blank col7" >&nbsp;</th>
      <th class="blank col8" >&nbsp;</th>
      <th class="blank col9" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_43dc2_level0_row0" class="row_heading level0 row0" >강원도</th>
      <td id="T_43dc2_row0_col0" class="data row0 col0" >141</td>
      <td id="T_43dc2_row0_col1" class="data row0 col1" >0</td>
      <td id="T_43dc2_row0_col2" class="data row0 col2" >2</td>
      <td id="T_43dc2_row0_col3" class="data row0 col3" >1</td>
      <td id="T_43dc2_row0_col4" class="data row0 col4" >8</td>
      <td id="T_43dc2_row0_col5" class="data row0 col5" >85</td>
      <td id="T_43dc2_row0_col6" class="data row0 col6" >10</td>
      <td id="T_43dc2_row0_col7" class="data row0 col7" >391</td>
      <td id="T_43dc2_row0_col8" class="data row0 col8" >4</td>
      <td id="T_43dc2_row0_col9" class="data row0 col9" >6</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row1" class="row_heading level0 row1" >경기도</th>
      <td id="T_43dc2_row1_col0" class="data row1 col0" >806</td>
      <td id="T_43dc2_row1_col1" class="data row1 col1" >17</td>
      <td id="T_43dc2_row1_col2" class="data row1 col2" >1</td>
      <td id="T_43dc2_row1_col3" class="data row1 col3" >8</td>
      <td id="T_43dc2_row1_col4" class="data row1 col4" >91</td>
      <td id="T_43dc2_row1_col5" class="data row1 col5" >406</td>
      <td id="T_43dc2_row1_col6" class="data row1 col6" >61</td>
      <td id="T_43dc2_row1_col7" class="data row1 col7" >1821</td>
      <td id="T_43dc2_row1_col8" class="data row1 col8" >34</td>
      <td id="T_43dc2_row1_col9" class="data row1 col9" >73</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row2" class="row_heading level0 row2" >경상남도</th>
      <td id="T_43dc2_row2_col0" class="data row2 col0" >390</td>
      <td id="T_43dc2_row2_col1" class="data row2 col1" >0</td>
      <td id="T_43dc2_row2_col2" class="data row2 col2" >3</td>
      <td id="T_43dc2_row2_col3" class="data row2 col3" >8</td>
      <td id="T_43dc2_row2_col4" class="data row2 col4" >25</td>
      <td id="T_43dc2_row2_col5" class="data row2 col5" >178</td>
      <td id="T_43dc2_row2_col6" class="data row2 col6" >17</td>
      <td id="T_43dc2_row2_col7" class="data row2 col7" >1161</td>
      <td id="T_43dc2_row2_col8" class="data row2 col8" >12</td>
      <td id="T_43dc2_row2_col9" class="data row2 col9" >31</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row3" class="row_heading level0 row3" >경상북도</th>
      <td id="T_43dc2_row3_col0" class="data row3 col0" >178</td>
      <td id="T_43dc2_row3_col1" class="data row3 col1" >3</td>
      <td id="T_43dc2_row3_col2" class="data row3 col2" >0</td>
      <td id="T_43dc2_row3_col3" class="data row3 col3" >0</td>
      <td id="T_43dc2_row3_col4" class="data row3 col4" >18</td>
      <td id="T_43dc2_row3_col5" class="data row3 col5" >100</td>
      <td id="T_43dc2_row3_col6" class="data row3 col6" >26</td>
      <td id="T_43dc2_row3_col7" class="data row3 col7" >575</td>
      <td id="T_43dc2_row3_col8" class="data row3 col8" >11</td>
      <td id="T_43dc2_row3_col9" class="data row3 col9" >6</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row4" class="row_heading level0 row4" >광주광역시</th>
      <td id="T_43dc2_row4_col0" class="data row4 col0" >97</td>
      <td id="T_43dc2_row4_col1" class="data row4 col1" >0</td>
      <td id="T_43dc2_row4_col2" class="data row4 col2" >0</td>
      <td id="T_43dc2_row4_col3" class="data row4 col3" >0</td>
      <td id="T_43dc2_row4_col4" class="data row4 col4" >0</td>
      <td id="T_43dc2_row4_col5" class="data row4 col5" >18</td>
      <td id="T_43dc2_row4_col6" class="data row4 col6" >5</td>
      <td id="T_43dc2_row4_col7" class="data row4 col7" >305</td>
      <td id="T_43dc2_row4_col8" class="data row4 col8" >1</td>
      <td id="T_43dc2_row4_col9" class="data row4 col9" >3</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row5" class="row_heading level0 row5" >대구광역시</th>
      <td id="T_43dc2_row5_col0" class="data row5 col0" >125</td>
      <td id="T_43dc2_row5_col1" class="data row5 col1" >0</td>
      <td id="T_43dc2_row5_col2" class="data row5 col2" >0</td>
      <td id="T_43dc2_row5_col3" class="data row5 col3" >0</td>
      <td id="T_43dc2_row5_col4" class="data row5 col4" >5</td>
      <td id="T_43dc2_row5_col5" class="data row5 col5" >57</td>
      <td id="T_43dc2_row5_col6" class="data row5 col6" >6</td>
      <td id="T_43dc2_row5_col7" class="data row5 col7" >381</td>
      <td id="T_43dc2_row5_col8" class="data row5 col8" >2</td>
      <td id="T_43dc2_row5_col9" class="data row5 col9" >10</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row6" class="row_heading level0 row6" >대전광역시</th>
      <td id="T_43dc2_row6_col0" class="data row6 col0" >99</td>
      <td id="T_43dc2_row6_col1" class="data row6 col1" >1</td>
      <td id="T_43dc2_row6_col2" class="data row6 col2" >0</td>
      <td id="T_43dc2_row6_col3" class="data row6 col3" >1</td>
      <td id="T_43dc2_row6_col4" class="data row6 col4" >12</td>
      <td id="T_43dc2_row6_col5" class="data row6 col5" >47</td>
      <td id="T_43dc2_row6_col6" class="data row6 col6" >12</td>
      <td id="T_43dc2_row6_col7" class="data row6 col7" >315</td>
      <td id="T_43dc2_row6_col8" class="data row6 col8" >1</td>
      <td id="T_43dc2_row6_col9" class="data row6 col9" >9</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row7" class="row_heading level0 row7" >부산광역시</th>
      <td id="T_43dc2_row7_col0" class="data row7 col0" >144</td>
      <td id="T_43dc2_row7_col1" class="data row7 col1" >16</td>
      <td id="T_43dc2_row7_col2" class="data row7 col2" >1</td>
      <td id="T_43dc2_row7_col3" class="data row7 col3" >2</td>
      <td id="T_43dc2_row7_col4" class="data row7 col4" >14</td>
      <td id="T_43dc2_row7_col5" class="data row7 col5" >96</td>
      <td id="T_43dc2_row7_col6" class="data row7 col6" >9</td>
      <td id="T_43dc2_row7_col7" class="data row7 col7" >365</td>
      <td id="T_43dc2_row7_col8" class="data row7 col8" >3</td>
      <td id="T_43dc2_row7_col9" class="data row7 col9" >3</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row8" class="row_heading level0 row8" >서울특별시</th>
      <td id="T_43dc2_row8_col0" class="data row8 col0" >332</td>
      <td id="T_43dc2_row8_col1" class="data row8 col1" >70</td>
      <td id="T_43dc2_row8_col2" class="data row8 col2" >4</td>
      <td id="T_43dc2_row8_col3" class="data row8 col3" >1</td>
      <td id="T_43dc2_row8_col4" class="data row8 col4" >19</td>
      <td id="T_43dc2_row8_col5" class="data row8 col5" >183</td>
      <td id="T_43dc2_row8_col6" class="data row8 col6" >4</td>
      <td id="T_43dc2_row8_col7" class="data row8 col7" >1117</td>
      <td id="T_43dc2_row8_col8" class="data row8 col8" >11</td>
      <td id="T_43dc2_row8_col9" class="data row8 col9" >4</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row9" class="row_heading level0 row9" >세종특별자치시</th>
      <td id="T_43dc2_row9_col0" class="data row9 col0" >23</td>
      <td id="T_43dc2_row9_col1" class="data row9 col1" >0</td>
      <td id="T_43dc2_row9_col2" class="data row9 col2" >0</td>
      <td id="T_43dc2_row9_col3" class="data row9 col3" >0</td>
      <td id="T_43dc2_row9_col4" class="data row9 col4" >4</td>
      <td id="T_43dc2_row9_col5" class="data row9 col5" >2</td>
      <td id="T_43dc2_row9_col6" class="data row9 col6" >3</td>
      <td id="T_43dc2_row9_col7" class="data row9 col7" >34</td>
      <td id="T_43dc2_row9_col8" class="data row9 col8" >3</td>
      <td id="T_43dc2_row9_col9" class="data row9 col9" >1</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row10" class="row_heading level0 row10" >울산광역시</th>
      <td id="T_43dc2_row10_col0" class="data row10 col0" >93</td>
      <td id="T_43dc2_row10_col1" class="data row10 col1" >28</td>
      <td id="T_43dc2_row10_col2" class="data row10 col2" >0</td>
      <td id="T_43dc2_row10_col3" class="data row10 col3" >3</td>
      <td id="T_43dc2_row10_col4" class="data row10 col4" >4</td>
      <td id="T_43dc2_row10_col5" class="data row10 col5" >152</td>
      <td id="T_43dc2_row10_col6" class="data row10 col6" >8</td>
      <td id="T_43dc2_row10_col7" class="data row10 col7" >582</td>
      <td id="T_43dc2_row10_col8" class="data row10 col8" >8</td>
      <td id="T_43dc2_row10_col9" class="data row10 col9" >9</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row11" class="row_heading level0 row11" >인천광역시</th>
      <td id="T_43dc2_row11_col0" class="data row11 col0" >183</td>
      <td id="T_43dc2_row11_col1" class="data row11 col1" >0</td>
      <td id="T_43dc2_row11_col2" class="data row11 col2" >0</td>
      <td id="T_43dc2_row11_col3" class="data row11 col3" >1</td>
      <td id="T_43dc2_row11_col4" class="data row11 col4" >6</td>
      <td id="T_43dc2_row11_col5" class="data row11 col5" >41</td>
      <td id="T_43dc2_row11_col6" class="data row11 col6" >4</td>
      <td id="T_43dc2_row11_col7" class="data row11 col7" >431</td>
      <td id="T_43dc2_row11_col8" class="data row11 col8" >1</td>
      <td id="T_43dc2_row11_col9" class="data row11 col9" >8</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row12" class="row_heading level0 row12" >전라남도</th>
      <td id="T_43dc2_row12_col0" class="data row12 col0" >360</td>
      <td id="T_43dc2_row12_col1" class="data row12 col1" >97</td>
      <td id="T_43dc2_row12_col2" class="data row12 col2" >0</td>
      <td id="T_43dc2_row12_col3" class="data row12 col3" >5</td>
      <td id="T_43dc2_row12_col4" class="data row12 col4" >43</td>
      <td id="T_43dc2_row12_col5" class="data row12 col5" >651</td>
      <td id="T_43dc2_row12_col6" class="data row12 col6" >75</td>
      <td id="T_43dc2_row12_col7" class="data row12 col7" >600</td>
      <td id="T_43dc2_row12_col8" class="data row12 col8" >22</td>
      <td id="T_43dc2_row12_col9" class="data row12 col9" >29</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row13" class="row_heading level0 row13" >전라북도</th>
      <td id="T_43dc2_row13_col0" class="data row13 col0" >396</td>
      <td id="T_43dc2_row13_col1" class="data row13 col1" >1</td>
      <td id="T_43dc2_row13_col2" class="data row13 col2" >1</td>
      <td id="T_43dc2_row13_col3" class="data row13 col3" >7</td>
      <td id="T_43dc2_row13_col4" class="data row13 col4" >28</td>
      <td id="T_43dc2_row13_col5" class="data row13 col5" >147</td>
      <td id="T_43dc2_row13_col6" class="data row13 col6" >14</td>
      <td id="T_43dc2_row13_col7" class="data row13 col7" >527</td>
      <td id="T_43dc2_row13_col8" class="data row13 col8" >11</td>
      <td id="T_43dc2_row13_col9" class="data row13 col9" >5</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row14" class="row_heading level0 row14" >제주특별자치도</th>
      <td id="T_43dc2_row14_col0" class="data row14 col0" >78</td>
      <td id="T_43dc2_row14_col1" class="data row14 col1" >0</td>
      <td id="T_43dc2_row14_col2" class="data row14 col2" >0</td>
      <td id="T_43dc2_row14_col3" class="data row14 col3" >0</td>
      <td id="T_43dc2_row14_col4" class="data row14 col4" >5</td>
      <td id="T_43dc2_row14_col5" class="data row14 col5" >1</td>
      <td id="T_43dc2_row14_col6" class="data row14 col6" >1</td>
      <td id="T_43dc2_row14_col7" class="data row14 col7" >152</td>
      <td id="T_43dc2_row14_col8" class="data row14 col8" >3</td>
      <td id="T_43dc2_row14_col9" class="data row14 col9" >6</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row15" class="row_heading level0 row15" >충청남도</th>
      <td id="T_43dc2_row15_col0" class="data row15 col0" >462</td>
      <td id="T_43dc2_row15_col1" class="data row15 col1" >18</td>
      <td id="T_43dc2_row15_col2" class="data row15 col2" >1</td>
      <td id="T_43dc2_row15_col3" class="data row15 col3" >5</td>
      <td id="T_43dc2_row15_col4" class="data row15 col4" >29</td>
      <td id="T_43dc2_row15_col5" class="data row15 col5" >332</td>
      <td id="T_43dc2_row15_col6" class="data row15 col6" >20</td>
      <td id="T_43dc2_row15_col7" class="data row15 col7" >809</td>
      <td id="T_43dc2_row15_col8" class="data row15 col8" >27</td>
      <td id="T_43dc2_row15_col9" class="data row15 col9" >20</td>
    </tr>
    <tr>
      <th id="T_43dc2_level0_row16" class="row_heading level0 row16" >충청북도</th>
      <td id="T_43dc2_row16_col0" class="data row16 col0" >263</td>
      <td id="T_43dc2_row16_col1" class="data row16 col1" >9</td>
      <td id="T_43dc2_row16_col2" class="data row16 col2" >0</td>
      <td id="T_43dc2_row16_col3" class="data row16 col3" >1</td>
      <td id="T_43dc2_row16_col4" class="data row16 col4" >11</td>
      <td id="T_43dc2_row16_col5" class="data row16 col5" >151</td>
      <td id="T_43dc2_row16_col6" class="data row16 col6" >26</td>
      <td id="T_43dc2_row16_col7" class="data row16 col7" >421</td>
      <td id="T_43dc2_row16_col8" class="data row16 col8" >10</td>
      <td id="T_43dc2_row16_col9" class="data row16 col9" >7</td>
    </tr>
  </tbody>
</table>

# 시도별 공원 분포

## 시도별 공원 비율

```python
# 시도별로 합계 데이터를 출력
city_count = df["시도"].value_counts().to_frame()
city_mean = df["시도"].value_counts(normalize=True).to_frame()
display(city_count.head())
display(city_mean.head())
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
    </tr>
    <tr>
      <th>시도</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>경기도</th>
      <td>3318</td>
    </tr>
    <tr>
      <th>전라남도</th>
      <td>1882</td>
    </tr>
    <tr>
      <th>경상남도</th>
      <td>1825</td>
    </tr>
    <tr>
      <th>서울특별시</th>
      <td>1745</td>
    </tr>
    <tr>
      <th>충청남도</th>
      <td>1723</td>
    </tr>
  </tbody>
</table>
</div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>proportion</th>
    </tr>
    <tr>
      <th>시도</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>경기도</th>
      <td>0.182941</td>
    </tr>
    <tr>
      <th>전라남도</th>
      <td>0.103766</td>
    </tr>
    <tr>
      <th>경상남도</th>
      <td>0.100623</td>
    </tr>
    <tr>
      <th>서울특별시</th>
      <td>0.096212</td>
    </tr>
    <tr>
      <th>충청남도</th>
      <td>0.094999</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 합계와 비율을 함께 구합니다.
# city 라는 변수에 담습니다.

city = city_count.merge(city_mean, left_index=True, right_index=True)
city.columns = ["합계", "비율"]
display(city)
city.style.background_gradient()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>합계</th>
      <th>비율</th>
    </tr>
    <tr>
      <th>시도</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>경기도</th>
      <td>3318</td>
      <td>0.182941</td>
    </tr>
    <tr>
      <th>전라남도</th>
      <td>1882</td>
      <td>0.103766</td>
    </tr>
    <tr>
      <th>경상남도</th>
      <td>1825</td>
      <td>0.100623</td>
    </tr>
    <tr>
      <th>서울특별시</th>
      <td>1745</td>
      <td>0.096212</td>
    </tr>
    <tr>
      <th>충청남도</th>
      <td>1723</td>
      <td>0.094999</td>
    </tr>
    <tr>
      <th>전라북도</th>
      <td>1137</td>
      <td>0.062690</td>
    </tr>
    <tr>
      <th>경상북도</th>
      <td>917</td>
      <td>0.050560</td>
    </tr>
    <tr>
      <th>충청북도</th>
      <td>899</td>
      <td>0.049567</td>
    </tr>
    <tr>
      <th>울산광역시</th>
      <td>887</td>
      <td>0.048906</td>
    </tr>
    <tr>
      <th>인천광역시</th>
      <td>675</td>
      <td>0.037217</td>
    </tr>
    <tr>
      <th>부산광역시</th>
      <td>653</td>
      <td>0.036004</td>
    </tr>
    <tr>
      <th>강원도</th>
      <td>648</td>
      <td>0.035728</td>
    </tr>
    <tr>
      <th>대구광역시</th>
      <td>586</td>
      <td>0.032310</td>
    </tr>
    <tr>
      <th>대전광역시</th>
      <td>497</td>
      <td>0.027403</td>
    </tr>
    <tr>
      <th>광주광역시</th>
      <td>429</td>
      <td>0.023653</td>
    </tr>
    <tr>
      <th>제주특별자치도</th>
      <td>246</td>
      <td>0.013563</td>
    </tr>
    <tr>
      <th>세종특별자치시</th>
      <td>70</td>
      <td>0.003860</td>
    </tr>
  </tbody>
</table>
</div>

<table id="T_fde50">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_fde50_level0_col0" class="col_heading level0 col0" >합계</th>
      <th id="T_fde50_level0_col1" class="col_heading level0 col1" >비율</th>
    </tr>
    <tr>
      <th class="index_name level0" >시도</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_fde50_level0_row0" class="row_heading level0 row0" >경기도</th>
      <td id="T_fde50_row0_col0" class="data row0 col0" >3318</td>
      <td id="T_fde50_row0_col1" class="data row0 col1" >0.182941</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row1" class="row_heading level0 row1" >전라남도</th>
      <td id="T_fde50_row1_col0" class="data row1 col0" >1882</td>
      <td id="T_fde50_row1_col1" class="data row1 col1" >0.103766</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row2" class="row_heading level0 row2" >경상남도</th>
      <td id="T_fde50_row2_col0" class="data row2 col0" >1825</td>
      <td id="T_fde50_row2_col1" class="data row2 col1" >0.100623</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row3" class="row_heading level0 row3" >서울특별시</th>
      <td id="T_fde50_row3_col0" class="data row3 col0" >1745</td>
      <td id="T_fde50_row3_col1" class="data row3 col1" >0.096212</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row4" class="row_heading level0 row4" >충청남도</th>
      <td id="T_fde50_row4_col0" class="data row4 col0" >1723</td>
      <td id="T_fde50_row4_col1" class="data row4 col1" >0.094999</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row5" class="row_heading level0 row5" >전라북도</th>
      <td id="T_fde50_row5_col0" class="data row5 col0" >1137</td>
      <td id="T_fde50_row5_col1" class="data row5 col1" >0.062690</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row6" class="row_heading level0 row6" >경상북도</th>
      <td id="T_fde50_row6_col0" class="data row6 col0" >917</td>
      <td id="T_fde50_row6_col1" class="data row6 col1" >0.050560</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row7" class="row_heading level0 row7" >충청북도</th>
      <td id="T_fde50_row7_col0" class="data row7 col0" >899</td>
      <td id="T_fde50_row7_col1" class="data row7 col1" >0.049567</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row8" class="row_heading level0 row8" >울산광역시</th>
      <td id="T_fde50_row8_col0" class="data row8 col0" >887</td>
      <td id="T_fde50_row8_col1" class="data row8 col1" >0.048906</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row9" class="row_heading level0 row9" >인천광역시</th>
      <td id="T_fde50_row9_col0" class="data row9 col0" >675</td>
      <td id="T_fde50_row9_col1" class="data row9 col1" >0.037217</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row10" class="row_heading level0 row10" >부산광역시</th>
      <td id="T_fde50_row10_col0" class="data row10 col0" >653</td>
      <td id="T_fde50_row10_col1" class="data row10 col1" >0.036004</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row11" class="row_heading level0 row11" >강원도</th>
      <td id="T_fde50_row11_col0" class="data row11 col0" >648</td>
      <td id="T_fde50_row11_col1" class="data row11 col1" >0.035728</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row12" class="row_heading level0 row12" >대구광역시</th>
      <td id="T_fde50_row12_col0" class="data row12 col0" >586</td>
      <td id="T_fde50_row12_col1" class="data row12 col1" >0.032310</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row13" class="row_heading level0 row13" >대전광역시</th>
      <td id="T_fde50_row13_col0" class="data row13 col0" >497</td>
      <td id="T_fde50_row13_col1" class="data row13 col1" >0.027403</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row14" class="row_heading level0 row14" >광주광역시</th>
      <td id="T_fde50_row14_col0" class="data row14 col0" >429</td>
      <td id="T_fde50_row14_col1" class="data row14 col1" >0.023653</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row15" class="row_heading level0 row15" >제주특별자치도</th>
      <td id="T_fde50_row15_col0" class="data row15 col0" >246</td>
      <td id="T_fde50_row15_col1" class="data row15 col1" >0.013563</td>
    </tr>
    <tr>
      <th id="T_fde50_level0_row16" class="row_heading level0 row16" >세종특별자치시</th>
      <td id="T_fde50_row16_col0" class="data row16 col0" >70</td>
      <td id="T_fde50_row16_col1" class="data row16 col1" >0.003860</td>
    </tr>
  </tbody>
</table>

## 공원구분별 분포

```python
# "공원구분"별로 색상을 다르게 표현하고 "공원면적"에 따라 원의 크기를 다르게 그립니다.
# 제주도는 해안선과 유사한 모습으로 공원이 배치되어 있는 모습이 인상적입니다.
# df에는 전체 데이터프레임이, df_park에는 위경도의 이상치를 제거한 데이터가 들어있습니다.
plt.figure(figsize=(8, 9))
sns.scatterplot(data=df_park, x="경도", y="위도", 
                hue="공원구분", size="공원면적", sizes=(10, 100))
```

<img width="854" alt="park_output_11" src="https://github.com/zacinthepark/TIL/assets/86648892/fee23cf3-bf77-4c4b-b0c0-a434615dd09c">

## 시도별 공원분포

```python
# 시도별로 scatterplot 의 색상을 다르게 표현하고 공원면적에 따라 원의 크기를 다르게 그립니다.

plt.figure(figsize=(8, 9))
sns.scatterplot(data=df_park, x="경도", y="위도", 
                hue="시도", size="공원면적", sizes=(10, 100))
```

<img width="858" alt="park_output_12" src="https://github.com/zacinthepark/TIL/assets/86648892/48a99dba-2a27-4a8f-ab58-d754af3fcf4b">

```python
city_count.index
```

<pre>
Index(['경기도', '전라남도', '경상남도', '서울특별시', '충청남도', '전라북도', '경상북도', '충청북도', '울산광역시',
       '인천광역시', '부산광역시', '강원도', '대구광역시', '대전광역시', '광주광역시', '제주특별자치도',
       '세종특별자치시'],
      dtype='object', name='시도')
</pre>

```python
# countplot 으로 시도별 빈도수를 그립니다.
plt.figure(figsize=(9, 7))
sns.countplot(data=df, y="시도", order=city_count.index, palette="Greens_r")
```

<img width="856" alt="park_output_13" src="https://github.com/zacinthepark/TIL/assets/86648892/fcda8d65-40d9-482f-894b-533c7ec55a03">

## 특정 공원구분 가져오기

```python
# "공원구분"별로 빈도수를 구합니다.

df["공원구분"].value_counts()
```

<pre>
공원구분
어린이공원     9987
근린공원      4170
소공원       2647
문화공원       322
수변공원       301
기타         260
체육공원       230
역사공원       164
묘지공원        43
도시농업공원      13
Name: count, dtype: int64
</pre>

```python
# str.match를 통해 특정 텍스트가 들어가는 공원만 가져오기.
# . 은 모든 문자, * 은 0번 이상 반복.
# ".*"는 앞뒤로 어떤 문자가 등장하든 상관없다는 의미입니다.
# 따라서 아래의 정규표현식 대신 r'(역사|체육|수변|문화)공원'를 사용해도 똑같이 동작합니다.
park_type = r'.*((역사|체육|수변|문화)공원).*'

park = df[df["공원구분"].str.match(park_type)]
park.shape
```

<pre>
(1017, 36)
</pre>

```python
# 위에서 정의한 var_numbers 라는 변수를 가져옵니다.
var_numbers
```

<pre>
['위도', '경도', '공원면적', '지정고시일', '고시연도', '고시월']
</pre>

```python
# 리스트 다루기: var_pair 라는 변수에 리스트를 만들어서 값을 추가하고 삭제해 봅니다.
# 기존 리스트에 "공원구분" 원소 추가하기 "공원구분"에 따라 색상을 다르게 표현해 보기 위함.
# var_pair 라는 변수에 담습니다. 
var_pair = var_numbers
var_pair.append("공원구분")
var_pair
```

<pre>
['위도', '경도', '공원면적', '지정고시일', '고시연도', '고시월', '공원구분']
</pre>

```python
# 기존 리스트의 원소를 제거하기; '지정고시일', '고시연도', '고시월'
# 제거 한 후 다시 제거하려고 하면 다음과 같은 오류가 발생할 수 있습니다.
# ValueError: list.remove(x): x not in list
var_pair.remove("지정고시일")
var_pair.remove("고시연도")
var_pair.remove("고시월")
var_pair
```

<pre>
['위도', '경도', '공원면적', '공원구분']
</pre>

```python
# 위에서 가져온 var_pair 라는 변수에 담긴 리스트에 있는 컬럼을 사용해 pairplot을 그립니다.

sns.pairplot(park[var_pair], hue="공원구분")
```

<img width="860" alt="park_output_14" src="https://github.com/zacinthepark/TIL/assets/86648892/ff567cbb-bcca-456d-a61b-12ed58fa714f">

## 피봇테이블로 시도별 공원수와 평균면적 구하기

```python
# 시도별 공원수와 "공원면적" 컬럼의 평균값, 중앙값을 구합니다.
# style.background_gradient()를 사용해서 값의 많고 적음에 따라 다른 색상으로 표현되도록 합니다.
park_size = pd.pivot_table(df, index="시도", values="공원면적", 
               aggfunc=["count", "mean", "median"])
park_size.style.background_gradient()
```

<table id="T_fa337">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_fa337_level0_col0" class="col_heading level0 col0" >count</th>
      <th id="T_fa337_level0_col1" class="col_heading level0 col1" >mean</th>
      <th id="T_fa337_level0_col2" class="col_heading level0 col2" >median</th>
    </tr>
    <tr>
      <th class="blank level1" >&nbsp;</th>
      <th id="T_fa337_level1_col0" class="col_heading level1 col0" >공원면적</th>
      <th id="T_fa337_level1_col1" class="col_heading level1 col1" >공원면적</th>
      <th id="T_fa337_level1_col2" class="col_heading level1 col2" >공원면적</th>
    </tr>
    <tr>
      <th class="index_name level0" >시도</th>
      <th class="blank col0" >&nbsp;</th>
      <th class="blank col1" >&nbsp;</th>
      <th class="blank col2" >&nbsp;</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_fa337_level0_row0" class="row_heading level0 row0" >강원도</th>
      <td id="T_fa337_row0_col0" class="data row0 col0" >648</td>
      <td id="T_fa337_row0_col1" class="data row0 col1" >29539.004630</td>
      <td id="T_fa337_row0_col2" class="data row0 col2" >1886.500000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row1" class="row_heading level0 row1" >경기도</th>
      <td id="T_fa337_row1_col0" class="data row1 col0" >3318</td>
      <td id="T_fa337_row1_col1" class="data row1 col1" >27628.744093</td>
      <td id="T_fa337_row1_col2" class="data row1 col2" >2527.900000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row2" class="row_heading level0 row2" >경상남도</th>
      <td id="T_fa337_row2_col0" class="data row2 col0" >1825</td>
      <td id="T_fa337_row2_col1" class="data row2 col1" >51390.226795</td>
      <td id="T_fa337_row2_col2" class="data row2 col2" >2163.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row3" class="row_heading level0 row3" >경상북도</th>
      <td id="T_fa337_row3_col0" class="data row3 col0" >917</td>
      <td id="T_fa337_row3_col1" class="data row3 col1" >29771.096947</td>
      <td id="T_fa337_row3_col2" class="data row3 col2" >2146.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row4" class="row_heading level0 row4" >광주광역시</th>
      <td id="T_fa337_row4_col0" class="data row4 col0" >429</td>
      <td id="T_fa337_row4_col1" class="data row4 col1" >20571.033333</td>
      <td id="T_fa337_row4_col2" class="data row4 col2" >2192.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row5" class="row_heading level0 row5" >대구광역시</th>
      <td id="T_fa337_row5_col0" class="data row5 col0" >586</td>
      <td id="T_fa337_row5_col1" class="data row5 col1" >28622.956143</td>
      <td id="T_fa337_row5_col2" class="data row5 col2" >2044.150000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row6" class="row_heading level0 row6" >대전광역시</th>
      <td id="T_fa337_row6_col0" class="data row6 col0" >497</td>
      <td id="T_fa337_row6_col1" class="data row6 col1" >36507.091952</td>
      <td id="T_fa337_row6_col2" class="data row6 col2" >2069.100000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row7" class="row_heading level0 row7" >부산광역시</th>
      <td id="T_fa337_row7_col0" class="data row7 col0" >653</td>
      <td id="T_fa337_row7_col1" class="data row7 col1" >54162.930521</td>
      <td id="T_fa337_row7_col2" class="data row7 col2" >2158.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row8" class="row_heading level0 row8" >서울특별시</th>
      <td id="T_fa337_row8_col0" class="data row8 col0" >1745</td>
      <td id="T_fa337_row8_col1" class="data row8 col1" >36221.846802</td>
      <td id="T_fa337_row8_col2" class="data row8 col2" >1500.300000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row9" class="row_heading level0 row9" >세종특별자치시</th>
      <td id="T_fa337_row9_col0" class="data row9 col0" >70</td>
      <td id="T_fa337_row9_col1" class="data row9 col1" >39879.471429</td>
      <td id="T_fa337_row9_col2" class="data row9 col2" >5685.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row10" class="row_heading level0 row10" >울산광역시</th>
      <td id="T_fa337_row10_col0" class="data row10 col0" >887</td>
      <td id="T_fa337_row10_col1" class="data row10 col1" >52505.699662</td>
      <td id="T_fa337_row10_col2" class="data row10 col2" >1971.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row11" class="row_heading level0 row11" >인천광역시</th>
      <td id="T_fa337_row11_col0" class="data row11 col0" >675</td>
      <td id="T_fa337_row11_col1" class="data row11 col1" >34680.567259</td>
      <td id="T_fa337_row11_col2" class="data row11 col2" >2965.500000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row12" class="row_heading level0 row12" >전라남도</th>
      <td id="T_fa337_row12_col0" class="data row12 col0" >1882</td>
      <td id="T_fa337_row12_col1" class="data row12 col1" >39475.294687</td>
      <td id="T_fa337_row12_col2" class="data row12 col2" >1947.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row13" class="row_heading level0 row13" >전라북도</th>
      <td id="T_fa337_row13_col0" class="data row13 col0" >1137</td>
      <td id="T_fa337_row13_col1" class="data row13 col1" >75732.256566</td>
      <td id="T_fa337_row13_col2" class="data row13 col2" >2891.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row14" class="row_heading level0 row14" >제주특별자치도</th>
      <td id="T_fa337_row14_col0" class="data row14 col0" >246</td>
      <td id="T_fa337_row14_col1" class="data row14 col1" >39689.574797</td>
      <td id="T_fa337_row14_col2" class="data row14 col2" >2920.000000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row15" class="row_heading level0 row15" >충청남도</th>
      <td id="T_fa337_row15_col0" class="data row15 col0" >1723</td>
      <td id="T_fa337_row15_col1" class="data row15 col1" >23843.134185</td>
      <td id="T_fa337_row15_col2" class="data row15 col2" >2432.600000</td>
    </tr>
    <tr>
      <th id="T_fa337_level0_row16" class="row_heading level0 row16" >충청북도</th>
      <td id="T_fa337_row16_col0" class="data row16 col0" >899</td>
      <td id="T_fa337_row16_col1" class="data row16 col1" >30654.360400</td>
      <td id="T_fa337_row16_col2" class="data row16 col2" >2567.000000</td>
    </tr>
  </tbody>
</table>

## 내가 사는 지역의 공원을 지도에 표시해 보기

```python
# 경기도 성남시에 위치한 공원만 출력해 봅니다.
# df_sn 이라는 변수에 담아서 재사용 합니다.

df_sn = df[(df["시도"] == "경기도") & (df["구군"] == "성남시")]
df_sn.shape
```

<pre>
(194, 36)
</pre>

```python
# "시도", "구군", "공원명" 컬럼만 미리보기 합니다.

df_sn[["시도", "구군", "공원명"]].head()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시도</th>
      <th>구군</th>
      <th>공원명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2990</th>
      <td>경기도</td>
      <td>성남시</td>
      <td>삼평공원</td>
    </tr>
    <tr>
      <th>2991</th>
      <td>경기도</td>
      <td>성남시</td>
      <td>양지공원</td>
    </tr>
    <tr>
      <th>2992</th>
      <td>경기도</td>
      <td>성남시</td>
      <td>단대공원</td>
    </tr>
    <tr>
      <th>2993</th>
      <td>경기도</td>
      <td>성남시</td>
      <td>영장공원</td>
    </tr>
    <tr>
      <th>2994</th>
      <td>경기도</td>
      <td>성남시</td>
      <td>희망대공원</td>
    </tr>
  </tbody>
</table>
</div>

### 특정 공원 정보 찾아보기

* 판교의 화랑공원을 찾아봅니다.

```python
# str.contains 로 "공원명"에 "화랑"이 들어가는 데이터를 찾습니다.

df_sn.loc[df_sn["공원명"].str.contains("화랑"), ["공원명", "위도", "경도"]]
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>공원명</th>
      <th>위도</th>
      <th>경도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3077</th>
      <td>판교제8호(화랑)공원</td>
      <td>37.397084</td>
      <td>127.106226</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 데이터프레임에서 컬럼명을 긁어왔을 때 tab 문자로 분리되었음을 확인
"공원보유시설(운동시설)	공원보유시설(유희시설)	공원보유시설(편익시설)	공원보유시설(교양시설)	공원보유시설(기타시설)"
```

<pre>
'공원보유시설(운동시설)\t공원보유시설(유희시설)\t공원보유시설(편익시설)\t공원보유시설(교양시설)\t공원보유시설(기타시설)'
</pre>

```python
# cols 컬럼에 특정 컬럼만 불러와서 봅니다.

cols = "공원보유시설(운동시설)	공원보유시설(유희시설)	공원보유시설(편익시설)	공원보유시설(교양시설)	공원보유시설(기타시설)"
cols = cols.split("\t")
df_sn.loc[df_sn["공원명"].str.contains("화랑"), cols]
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>공원보유시설(운동시설)</th>
      <th>공원보유시설(유희시설)</th>
      <th>공원보유시설(편익시설)</th>
      <th>공원보유시설(교양시설)</th>
      <th>공원보유시설(기타시설)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3077</th>
      <td>체력단련장, 배드민턴장</td>
      <td>NaN</td>
      <td>음수전</td>
      <td>생태학습원, 야외음악당</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

###  지도에 표현하기

* 다음의 문서를 활용해서 지도를 표현합니다.
* https://nbviewer.jupyter.org/github/python-visualization/folium/blob/master/examples/Quickstart.ipynb
* Folium 사용예제 : http://nbviewer.jupyter.org/github/python-visualization/folium/tree/master/examples/

```python
# folium 으로 지도에 표현해 봅니다.
# 지도에서 한글이 깨지면 html 문서로 저장해서 보세요.
import folium

m = folium.Map([37.397084, 127.106226], zoom_start=13)

for n in df_sn.index:
    lat = df_sn.loc[n, "위도"]
    long = df_sn.loc[n, "경도"]
    tooltip = df_sn.loc[n, "공원명"] + " " + df_sn.loc[n, "소재지도로명주소"]
    
    folium.Marker([lat, long], tooltip=tooltip).add_to(m)

# m.save('index.html')
m
```

<img width="861" alt="park_output_15" src="https://github.com/zacinthepark/TIL/assets/86648892/7b0e2904-10a4-4e3f-bde0-14a8a237b91d">
