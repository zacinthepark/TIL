# 버스 정류장 데이터

```python
# 필요 라이브러리부터 설치합니다.
# %pip install pandas seaborn
```

[기본 데이터]

* 1.1 bus_station_boarding_month_202401.csv

* 서울시 버스노선별 정류장별 승하차 인원 정보
* https://data.seoul.go.kr/dataList/OA-12912/S/1/datasetView.do

[추가 데이터]

* 1.1 bus_station_202401.xlsx

* 서울시 버스정류장 위치정보
* https://data.seoul.go.kr/dataList/OA-15067/S/1/datasetView.do

---

# 1.데이터 불러오기

###  데이터 프레임을 불러오고 변수로 저장(CSV 기준으로 진행)

* csv : pd.read_csv("파일이름. csv")
* txt : pd.read_csv("파일이름. csv", sep="구분자")
* xlsx : pd.read_excel('파일이름.xlsx')
* pickle : pd.read_pickle("파일이름.pkl") <br>

[참고] pickle은 sklearn 라이브러리를 통해 모델을 학습시키고 저장할 때 많이 사용, 파이썬의 모든 객체를 파일로 저장할 수 있다.

#### [실습문제1] 데이터 로딩

```python
# 아래 실습코드를 실행해주세요.
import sys
import numpy as np
import pandas as pd
```

```python
# 아래에 실습코드를 작성하고 결과를 확인합니다.

bus_station = pd.read_csv('1.1 bus_station_boarding_month_202401.csv', sep=",", encoding="cp949")
```

```python
# 데이터 프레임의 Shape을 확인합니다.

bus_station.shape
```

<pre>
(1048575, 8)
</pre>

---

# 2.기본 정보 확인 및 클렌징

- 데이터 클렌징 : 결측치, 이상치 등을 제거하여 데이터 분석 결과가 왜곡 되는 문제를 방지하기 위한 정제 과정

#### [실습문제2] 기본 정보 확인하기

* 'bus_station' 데이터의 정보를 확인해보세요.
* 'describe', 'info', 'head' 등 전부 활용해 보세요.

```python
# head()
bus_station.head()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>사용일자</th>
      <th>노선번호</th>
      <th>노선명</th>
      <th>버스정류장ARS번호</th>
      <th>역명</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
      <th>등록일자</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>20240101</td>
      <td>101</td>
      <td>101번(화계사~동대문)</td>
      <td>6178</td>
      <td>대광고등학교앞(00055)</td>
      <td>39</td>
      <td>76</td>
      <td>20240104</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20240101</td>
      <td>9408</td>
      <td>9408번(구미동차고지~고속터미널)</td>
      <td>22337</td>
      <td>헌인마을.서울농업기술센터(00042)</td>
      <td>1</td>
      <td>0</td>
      <td>20240104</td>
    </tr>
    <tr>
      <th>2</th>
      <td>20240101</td>
      <td>9408</td>
      <td>9408번(구미동차고지~고속터미널)</td>
      <td>22336</td>
      <td>헌인마을.서울농업기술센터(00078)</td>
      <td>2</td>
      <td>0</td>
      <td>20240104</td>
    </tr>
    <tr>
      <th>3</th>
      <td>20240101</td>
      <td>9408</td>
      <td>9408번(구미동차고지~고속터미널)</td>
      <td>22334</td>
      <td>헌인릉.강남서초과학화예비군훈련장(00043)</td>
      <td>0</td>
      <td>2</td>
      <td>20240104</td>
    </tr>
    <tr>
      <th>4</th>
      <td>20240101</td>
      <td>9408</td>
      <td>9408번(구미동차고지~고속터미널)</td>
      <td>22333</td>
      <td>헌인릉.강남서초과학화예비군훈련장(00076)</td>
      <td>2</td>
      <td>1</td>
      <td>20240104</td>
    </tr>
  </tbody>
</table>
</div>

```python
# tail()
bus_station.tail()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>사용일자</th>
      <th>노선번호</th>
      <th>노선명</th>
      <th>버스정류장ARS번호</th>
      <th>역명</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
      <th>등록일자</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1048570</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1837</td>
      <td>스위스대사관(00025)</td>
      <td>1</td>
      <td>19</td>
      <td>20240129</td>
    </tr>
    <tr>
      <th>1048571</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1831</td>
      <td>월암공원(00024)</td>
      <td>25</td>
      <td>21</td>
      <td>20240129</td>
    </tr>
    <tr>
      <th>1048572</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1514</td>
      <td>적십자병원후문앞(00002)</td>
      <td>9</td>
      <td>6</td>
      <td>20240129</td>
    </tr>
    <tr>
      <th>1048573</th>
      <td>20240126</td>
      <td>성북07</td>
      <td>성북07(정릉4동종점~길음역)</td>
      <td>8454</td>
      <td>정릉4동종점(00014)</td>
      <td>0</td>
      <td>181</td>
      <td>20240129</td>
    </tr>
    <tr>
      <th>1048574</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1587</td>
      <td>신학대학교총회본부(00011)</td>
      <td>13</td>
      <td>68</td>
      <td>20240129</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 아래에 실습코드를 작성하고 결과를 확인합니다.
# info()

bus_station.info()
```

<pre>
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 1048575 entries, 0 to 1048574
Data columns (total 8 columns):
 #   Column      Non-Null Count    Dtype 
---  ------      --------------    ----- 
 0   사용일자        1048575 non-null  int64 
 1   노선번호        1048575 non-null  object
 2   노선명         1048575 non-null  object
 3   버스정류장ARS번호  1048575 non-null  object
 4   역명          1048575 non-null  object
 5   승차총승객수      1048575 non-null  int64 
 6   하차총승객수      1048575 non-null  int64 
 7   등록일자        1048575 non-null  int64 
dtypes: int64(4), object(4)
memory usage: 64.0+ MB
</pre>

```python
# 아래에 실습코드를 작성하고 결과를 확인합니다.
# describe()

bus_station.describe()
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>사용일자</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
      <th>등록일자</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1.048575e+06</td>
      <td>1.048575e+06</td>
      <td>1.048575e+06</td>
      <td>1.048575e+06</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2.024011e+07</td>
      <td>1.030953e+02</td>
      <td>1.010178e+02</td>
      <td>2.024012e+07</td>
    </tr>
    <tr>
      <th>std</th>
      <td>7.455044e+00</td>
      <td>1.486801e+02</td>
      <td>1.348374e+02</td>
      <td>7.455044e+00</td>
    </tr>
    <tr>
      <th>min</th>
      <td>2.024010e+07</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>2.024010e+07</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2.024011e+07</td>
      <td>1.300000e+01</td>
      <td>1.600000e+01</td>
      <td>2.024011e+07</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2.024011e+07</td>
      <td>5.700000e+01</td>
      <td>6.200000e+01</td>
      <td>2.024012e+07</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2.024012e+07</td>
      <td>1.370000e+02</td>
      <td>1.370000e+02</td>
      <td>2.024012e+07</td>
    </tr>
    <tr>
      <th>max</th>
      <td>2.024013e+07</td>
      <td>5.027000e+03</td>
      <td>4.352000e+03</td>
      <td>2.024013e+07</td>
    </tr>
  </tbody>
</table>
</div>

#### [실습문제3] 위 데이터에서 버스정류장 위치를 구 별로 구분 해보기

* 'bus_station' 데이터의 정보를 확인해보세요.
* 버스정류장 ARS번호의 앞 두자리가 구를 의미합니다.
* '자치구' column 추가 -> 정류장이 위치한 구 이름을 등록

```python
# "버스정류장ARS번호" 컬럼 확인하기

bus_station["버스정류장ARS번호"]
```

<pre>
0           6178
1          22337
2          22336
3          22334
4          22333
           ...  
1048570     1837
1048571     1831
1048572     1514
1048573     8454
1048574     1587
Name: 버스정류장ARS번호, Length: 1048575, dtype: object
</pre>

```python
# 버스정류장 ARS번호에서 시작하는 앞자리 2개로 '자치구'라는 새로운 컬럼 생성
# str() : 정수나 실수를 문자열 형태로 바꿔주는 함수, slice()
# slice 함수는 문자열만 적용되며, 마지막 3자리를 제외한 값을 추출

bus_station['자치구'] = bus_station["버스정류장ARS번호"].str.slice(start=0,stop=-3)
bus_station['자치구']
```

<pre>
0           6
1          22
2          22
3          22
4          22
           ..
1048570     1
1048571     1
1048572     1
1048573     8
1048574     1
Name: 자치구, Length: 1048575, dtype: object
</pre>

* 버스정류장 ARS 번호 : 01~25까지 앞 숫자 두개가 위치한 구를 의미

    01. 종로구
    02. 중구
    03. 용산구
    04. 성동구
    05. 광진구
    06. 동대문구
    07. 중랑구
    08. 성북구
    09. 강북구
    10. 도봉구
    11. 노원구
    12. 은평구
    13. 서대문구
    14. 마포구
    15. 양천구
    16. 강서구
    17. 구로구
    18. 금천구
    19. 영등포구
    20. 동작구
    21. 관악구
    22. 서초구
    23. 강남구
    24. 송파구
    25. 강동구

```python
# 구 코드를 구 이름으로 변환하기
# map() : 반복 가능한 데이터 집합을 다른 요소로 변환하는 함수

bus_station['자치구'] = bus_station['자치구'].map({
    '1': '종로구',
    '2': '중구',
    '3': '용산구',
    '4': '성동구',
    '5': '광진구',
    '6': '동대문구',
    '7': '중랑구',
    '8': '성북구',
    '9': '강북구',
    '10': '도봉구',
    '11': '노원구',
    '12': '은평구',
    '13': '서대문구',
    '14': '마포구',
    '15': '양천구',
    '16': '강서구',
    '17': '구로구',
    '18': '금천구',
    '19': '영등포구',
    '20': '동작구',
    '21': '관악구',
    '22': '서초구',
    '23': '강남구',
    '24': '송파구',
    '25': '강동구'})
```

```python
# 아래에 실습코드를 작성하고 변환된 결과를 확인합니다.
# tail(10)

bus_station.tail(10)
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>사용일자</th>
      <th>노선번호</th>
      <th>노선명</th>
      <th>버스정류장ARS번호</th>
      <th>역명</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
      <th>등록일자</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1048565</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1849</td>
      <td>강북삼성병원(00027)</td>
      <td>6</td>
      <td>175</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1048566</th>
      <td>20240126</td>
      <td>종로03</td>
      <td>종로03(낙산공원~종로5가)</td>
      <td>1825</td>
      <td>창신초교(00021)</td>
      <td>63</td>
      <td>86</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1048567</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1796</td>
      <td>배화여중고.매동초교(00017)</td>
      <td>22</td>
      <td>91</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1048568</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1820</td>
      <td>교남동주민센터(00022)</td>
      <td>7</td>
      <td>25</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1048569</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1554</td>
      <td>독립문역3번출구(00006)</td>
      <td>343</td>
      <td>191</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1048570</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1837</td>
      <td>스위스대사관(00025)</td>
      <td>1</td>
      <td>19</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1048571</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1831</td>
      <td>월암공원(00024)</td>
      <td>25</td>
      <td>21</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1048572</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1514</td>
      <td>적십자병원후문앞(00002)</td>
      <td>9</td>
      <td>6</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1048573</th>
      <td>20240126</td>
      <td>성북07</td>
      <td>성북07(정릉4동종점~길음역)</td>
      <td>8454</td>
      <td>정릉4동종점(00014)</td>
      <td>0</td>
      <td>181</td>
      <td>20240129</td>
      <td>성북구</td>
    </tr>
    <tr>
      <th>1048574</th>
      <td>20240126</td>
      <td>종로05</td>
      <td>종로05(서대문역~배화여중고)</td>
      <td>1587</td>
      <td>신학대학교총회본부(00011)</td>
      <td>13</td>
      <td>68</td>
      <td>20240129</td>
      <td>종로구</td>
    </tr>
  </tbody>
</table>
</div>

#### [실습문제4] 결측치 처리하기

```python
# (가상), (기점가상) 정류장은 ARS번호가 '~'로 나옵니다.
# (가상) 정류장 : 버스정보시스템 상에서 위치 정보를 표시하기 위해 임의로 가상 정류장을 설정, 실제하지 않음
# '버스정류장ARS번호'가 '~'인 곳을 확인해주세요.
# DataFrame.loc[조건] :주어진 조건을 만족하는 모든 행을 선택

bus_station.loc[bus_station['버스정류장ARS번호'] == '~']
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>사용일자</th>
      <th>노선번호</th>
      <th>노선명</th>
      <th>버스정류장ARS번호</th>
      <th>역명</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
      <th>등록일자</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>699</th>
      <td>20240101</td>
      <td>441</td>
      <td>441번(월암공영차고지~신사사거리)</td>
      <td>~</td>
      <td>월암차고지(종점가상)(00126)</td>
      <td>0</td>
      <td>1</td>
      <td>20240104</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1261</th>
      <td>20240101</td>
      <td>7021</td>
      <td>7021번(은평공영차고지~롯데백화점)</td>
      <td>~</td>
      <td>은평공영차고지(가상)(00076)</td>
      <td>0</td>
      <td>10</td>
      <td>20240104</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1337</th>
      <td>20240101</td>
      <td>7017</td>
      <td>7017번(은평공영차고지~롯데백화점)</td>
      <td>~</td>
      <td>은평공영차고지(가상)(00090)</td>
      <td>0</td>
      <td>10</td>
      <td>20240104</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1427</th>
      <td>20240101</td>
      <td>7016</td>
      <td>7016번(은평차고지~상명대)</td>
      <td>~</td>
      <td>은평공영차고지(가상)(00107)</td>
      <td>0</td>
      <td>16</td>
      <td>20240104</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3332</th>
      <td>20240101</td>
      <td>750B</td>
      <td>750B번(은평차고지~서울대)</td>
      <td>~</td>
      <td>은평공영차고지(가상)(00076)</td>
      <td>0</td>
      <td>15</td>
      <td>20240104</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1040945</th>
      <td>20240126</td>
      <td>271</td>
      <td>271번(용마문화복지센터~월드컵파크7단지)</td>
      <td>~</td>
      <td>경성여객(종점가상)(00125)</td>
      <td>0</td>
      <td>35</td>
      <td>20240129</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1040953</th>
      <td>20240126</td>
      <td>271</td>
      <td>271번(용마문화복지센터~월드컵파크7단지)</td>
      <td>~</td>
      <td>경성여객(기점가상)(00001)</td>
      <td>61</td>
      <td>12</td>
      <td>20240129</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1041836</th>
      <td>20240126</td>
      <td>N64</td>
      <td>N64번(염곡공영차고지~강서공영차고지)</td>
      <td>~</td>
      <td>대흥교통(기점가상)(00001)</td>
      <td>0</td>
      <td>1</td>
      <td>20240129</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1042754</th>
      <td>20240126</td>
      <td>N72</td>
      <td>N72중랑 (중랑공영차고지~은평공영차고지)</td>
      <td>~</td>
      <td>중랑공영차고지(기점가상)(00001)</td>
      <td>3</td>
      <td>0</td>
      <td>20240129</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1043252</th>
      <td>20240126</td>
      <td>01A</td>
      <td>01A번(예장주차장~예장주차장)</td>
      <td>~</td>
      <td>남산예장버스환승주차장(종점가상)(00025)</td>
      <td>2</td>
      <td>165</td>
      <td>20240129</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>4358 rows × 9 columns</p>
</div>

```python
# NaN 값을 제거 해주세요.
# dropna()

bus_station = bus_station.dropna()
```

```python
# 컬럼별 NaN 값이 있는지 확인, info()

bus_station.info()
```

<pre>
<class 'pandas.core.frame.DataFrame'>
Index: 960811 entries, 0 to 1048574
Data columns (total 9 columns):
 #   Column      Non-Null Count   Dtype 
---  ------      --------------   ----- 
 0   사용일자        960811 non-null  int64 
 1   노선번호        960811 non-null  object
 2   노선명         960811 non-null  object
 3   버스정류장ARS번호  960811 non-null  object
 4   역명          960811 non-null  object
 5   승차총승객수      960811 non-null  int64 
 6   하차총승객수      960811 non-null  int64 
 7   등록일자        960811 non-null  int64 
 8   자치구         960811 non-null  object
dtypes: int64(4), object(5)
memory usage: 73.3+ MB
</pre>

```python
# "버스정류장ARS번호" dtype을 정수형(int)으로 변경

bus_station = bus_station.astype({"버스정류장ARS번호":'int64'})
```

```python
# 정수형으로 변경되었는지 확인

bus_station.info()
```

<pre>
<class 'pandas.core.frame.DataFrame'>
Index: 960811 entries, 0 to 1048574
Data columns (total 9 columns):
 #   Column      Non-Null Count   Dtype 
---  ------      --------------   ----- 
 0   사용일자        960811 non-null  int64 
 1   노선번호        960811 non-null  object
 2   노선명         960811 non-null  object
 3   버스정류장ARS번호  960811 non-null  int64 
 4   역명          960811 non-null  object
 5   승차총승객수      960811 non-null  int64 
 6   하차총승객수      960811 non-null  int64 
 7   등록일자        960811 non-null  int64 
 8   자치구         960811 non-null  object
dtypes: int64(5), object(4)
memory usage: 73.3+ MB
</pre>

#### [실습문제5] 구별로 버스정류장의 개수 확인하기 (서울시)

```python
# 자치구별 버스정류장 고유값들의 갯수를 출력하여 'bus_station_count' 변수로 저장
# nunique(), groupby()

bus_station_count = bus_station.groupby("자치구")["버스정류장ARS번호"].nunique()
bus_station_count
```

<pre>
자치구
강남구     501
강동구     367
강북구     410
강서구     567
관악구     468
광진구     280
구로구     486
금천구     347
노원구     496
도봉구     368
동대문구    308
동작구     441
마포구     565
서대문구    460
서초구     601
성동구     433
성북구     599
송파구     470
양천구     323
영등포구    467
용산구     326
은평구     497
종로구     357
중구      174
중랑구     428
Name: 버스정류장ARS번호, dtype: int64
</pre>

```python
# 중랑구에 428개의 버스정류장이 있다는데, 실제 ARS번호를 확인해봅시다.
# 자치구별 버스정류장 고유값들을 출력하여 'bus_station_unique' 변수로 저장
# 중랑구 버스정류장ARS번호 전체 배열 출력

bus_station_unique = bus_station.groupby("자치구")["버스정류장ARS번호"].unique()
print(bus_station_unique['중랑구'])
np.set_printoptions(threshold=sys.maxsize)
```

<pre>
[7142 7136 7138 7465 7440 7438 7432 7433 7435 7434 7008 7007 7336 7335
 7334 7333 7297 7296 7295 7294 7274 7273 7272 7271 7270 7269 7249 7247
 7245 7243 7233 7231 7229 7227 7225 7223 7222 7221 7220 7219 7218 7217
 7216 7199 7197 7195 7194 7145 7144 7131 7129 7117 7006 7005 7004 7003
 7002 7001 7616 7817 7830 7828 7831 7021 7587 7595 7592 7593 7594 7820
 7818 7819 7516 7515 7502 7501 7554 7553 7500 7499 7498 7496 7494 7821
 7829 7832 7043 7045 7060 7057 7054 7058 7020 7014 7011 7013 7015 7016
 7446 7551 7466 7463 7464 7462 7451 7450 7454 7455 7452 7453 7456 7448
 7332 7331 7330 7329 7328 7327 7325 7300 7299 7298 7250 7248 7246 7244
 7242 7232 7230 7228 7226 7224 7211 7210 7209 7208 7207 7206 7205 7204
 7203 7192 7191 7190 7189 7188 7187 7143 7141 7140 7118 7410 7476 7302
 7304 7305 7306 7337 7418 7010 7009 7550 7303 7307 7420 7421 7424 7012
 7178 7180 7181 7182 7183 7184 7185 7186 7111 7112 7113 7114 7115 7116
 7275 7276 7277 7278 7279 7280 7261 7262 7263 7264 7265 7266 7267 7268
 7443 7408 7444 7409 7411 7119 7120 7121 7122 7123 7146 7147 7148 7149
 7150 7151 7152 7153 7154 7155 7156 7157 7158 7159 7160 7161 7162 7163
 7164 7165 7193 7196 7439 7442 7447 7457 7460 7459 7458 7166 7167 7171
 7172 7174 7175 7176 7179 7168 7170 7173 7177 7169 7240 7241 7415 7101
 7102 7103 7104 7128 7105 7106 7107 7108 7109 7110 7425 7426 7134 7198
 7200 7308 7309 7251 7252 7395 7397 7530 7523 7521 7508 7504 7436 7527
 7525 7519 7517 7512 7253 7510 7505 7254 7524 7255 7529 7256 7507 7526
 7257 7528 7511 7258 7509 7518 7259 7260 7281 7282 7288 7289 7290 7291
 7292 7293 7347 7354 7430 7431 7135 7212 7213 7286 7355 7356 7357 7358
 7359 7360 7361 7362 7363 7364 7365 7366 7367 7369 7370 7371 7372 7373
 7375 7376 7377 7378 7380 7417 7429 7467 7124 7316 7319 7321 7348 7349
 7350 7351 7352 7353 7379 7381 7382 7383 7384 7385 7386 7387 7388 7389
 7390 7391 7392 7393 7394 7396 7398 7399 7422 7234 7235 7236 7237 7238
 7239 7324 7346 7284 7461 7132 7133 7137 7401 7402 7403 7404 7405 7406
 7407 7214 7215 7202 7201 7310 7311 7312 7313 7314 7315 7125 7283 7285
 7287 7437 7130 7301 7317 7318 7320 7427 7017 7055 7491 7495 7552 7588
 7827 7674 7675 7822 7506 7520 7503 7018]
</pre>

```python
# 서울 지역 외 '버스정류장ARS번호' 샘플 확인 
# 중랑구 버스정류장ARS번호 7674 인 정류장 확인해보기
# 네이버지도에서 버스정류장 '07674' 확인해보기 (서울시 버스정류장 아님)

bus_station[bus_station['버스정류장ARS번호'] == 7674]
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>사용일자</th>
      <th>노선번호</th>
      <th>노선명</th>
      <th>버스정류장ARS번호</th>
      <th>역명</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
      <th>등록일자</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>43608</th>
      <td>20240102</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>1</td>
      <td>1</td>
      <td>20240105</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>84449</th>
      <td>20240103</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>0</td>
      <td>1</td>
      <td>20240106</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>206641</th>
      <td>20240106</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>3</td>
      <td>0</td>
      <td>20240109</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>287124</th>
      <td>20240108</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>0</td>
      <td>2</td>
      <td>20240111</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>327856</th>
      <td>20240109</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>1</td>
      <td>4</td>
      <td>20240112</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>450342</th>
      <td>20240112</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>1</td>
      <td>0</td>
      <td>20240115</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>612051</th>
      <td>20240116</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>0</td>
      <td>1</td>
      <td>20240119</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>652849</th>
      <td>20240117</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>1</td>
      <td>0</td>
      <td>20240120</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>693641</th>
      <td>20240118</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>0</td>
      <td>1</td>
      <td>20240121</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>814818</th>
      <td>20240121</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>2</td>
      <td>0</td>
      <td>20240124</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>855341</th>
      <td>20240122</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>0</td>
      <td>1</td>
      <td>20240125</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>896148</th>
      <td>20240123</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>0</td>
      <td>2</td>
      <td>20240126</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>977959</th>
      <td>20240125</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>0</td>
      <td>1</td>
      <td>20240128</td>
      <td>중랑구</td>
    </tr>
    <tr>
      <th>1018890</th>
      <td>20240126</td>
      <td>9409</td>
      <td>9409번(구미동차고지~신사역)</td>
      <td>7674</td>
      <td>이우중고(00005)</td>
      <td>0</td>
      <td>2</td>
      <td>20240129</td>
      <td>중랑구</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 서울의 버스 정류장 데이터만 포함하고 있는 excel 파일 열기 ('1.1 bus_station_202401.xlsx')
# https://data.seoul.go.kr/dataList/OA-15067/S/1/datasetView.do (출처:서울열린데이터광장)
# 'only_seoul' 변수로 저장

only_seoul = pd.read_excel('1.1 bus_station_202401.xlsx')
```

```python
# 데이터 구조 확인, info()

only_seoul.info()
```

<pre>
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 11263 entries, 0 to 11262
Data columns (total 2 columns):
 #   Column  Non-Null Count  Dtype 
---  ------  --------------  ----- 
 0   ARS_ID  11263 non-null  int64 
 1   정류소명    11263 non-null  object
dtypes: int64(1), object(1)
memory usage: 176.1+ KB
</pre>

```python
# 데이터 확인

only_seoul
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ARS_ID</th>
      <th>정류소명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1001</td>
      <td>종로2가사거리</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1002</td>
      <td>창경궁.서울대학교병원</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1003</td>
      <td>명륜3가.성대입구</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1004</td>
      <td>종로2가.삼일교</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1005</td>
      <td>혜화동로터리.여운형활동터</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>11258</th>
      <td>25995</td>
      <td>우성아파트</td>
    </tr>
    <tr>
      <th>11259</th>
      <td>25996</td>
      <td>우성아파트</td>
    </tr>
    <tr>
      <th>11260</th>
      <td>25997</td>
      <td>조일약국</td>
    </tr>
    <tr>
      <th>11261</th>
      <td>25998</td>
      <td>성내시장</td>
    </tr>
    <tr>
      <th>11262</th>
      <td>25999</td>
      <td>천호우체국.로데오거리</td>
    </tr>
  </tbody>
</table>
<p>11263 rows × 2 columns</p>
</div>

```python
only_seoul.info()
```

<pre>
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 11263 entries, 0 to 11262
Data columns (total 2 columns):
 #   Column  Non-Null Count  Dtype 
---  ------  --------------  ----- 
 0   ARS_ID  11263 non-null  int64 
 1   정류소명    11263 non-null  object
dtypes: int64(1), object(1)
memory usage: 176.1+ KB
</pre>

```python
# 서울 지역 외 '버스정류장ARS번호' 샘플 확인해보기

only_seoul.loc[only_seoul['ARS_ID'] == 7674]
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ARS_ID</th>
      <th>정류소명</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>

```python
# 'ARS-ID'열 이름을 '버스정류장ARS번호'로 바꾸기

only_seoul.rename(columns={'ARS_ID':'버스정류장ARS번호'}, inplace=True)
```

```python
# 'only_seoul'과 'bus_station' 데이터 병합

df = pd.merge(only_seoul,bus_station,how='inner', on='버스정류장ARS번호')
```

```python
df
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>버스정류장ARS번호</th>
      <th>정류소명</th>
      <th>사용일자</th>
      <th>노선번호</th>
      <th>노선명</th>
      <th>역명</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
      <th>등록일자</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1001</td>
      <td>종로2가사거리</td>
      <td>20240101</td>
      <td>N37</td>
      <td>N37번(송파공영차고지~진관공영차고지)</td>
      <td>종로2가사거리(00032)</td>
      <td>3</td>
      <td>5</td>
      <td>20240104</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1001</td>
      <td>종로2가사거리</td>
      <td>20240101</td>
      <td>N37</td>
      <td>N37번(진관공영차고지~송파공영차고지)</td>
      <td>종로2가사거리(00089)</td>
      <td>21</td>
      <td>11</td>
      <td>20240104</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1001</td>
      <td>종로2가사거리</td>
      <td>20240101</td>
      <td>470</td>
      <td>470번(상암차고지~안골마을)</td>
      <td>종로2가사거리(00066)</td>
      <td>98</td>
      <td>117</td>
      <td>20240104</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1001</td>
      <td>종로2가사거리</td>
      <td>20240101</td>
      <td>741</td>
      <td>741번(진관차고지~헌인릉입구)</td>
      <td>종로2가사거리(00075)</td>
      <td>92</td>
      <td>116</td>
      <td>20240104</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1001</td>
      <td>종로2가사거리</td>
      <td>20240102</td>
      <td>N37</td>
      <td>N37번(송파공영차고지~진관공영차고지)</td>
      <td>종로2가사거리(00032)</td>
      <td>2</td>
      <td>11</td>
      <td>20240105</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>957604</th>
      <td>25990</td>
      <td>암사삼성.현대아파트</td>
      <td>20240122</td>
      <td>강동02</td>
      <td>강동02(가래여울~암사동서원마을)</td>
      <td>암사삼성.현대아파트(00044)</td>
      <td>80</td>
      <td>27</td>
      <td>20240125</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>957605</th>
      <td>25990</td>
      <td>암사삼성.현대아파트</td>
      <td>20240123</td>
      <td>강동02</td>
      <td>강동02(가래여울~암사동서원마을)</td>
      <td>암사삼성.현대아파트(00044)</td>
      <td>90</td>
      <td>29</td>
      <td>20240126</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>957606</th>
      <td>25990</td>
      <td>암사삼성.현대아파트</td>
      <td>20240124</td>
      <td>강동02</td>
      <td>강동02(가래여울~암사동서원마을)</td>
      <td>암사삼성.현대아파트(00044)</td>
      <td>90</td>
      <td>23</td>
      <td>20240127</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>957607</th>
      <td>25990</td>
      <td>암사삼성.현대아파트</td>
      <td>20240125</td>
      <td>강동02</td>
      <td>강동02(가래여울~암사동서원마을)</td>
      <td>암사삼성.현대아파트(00044)</td>
      <td>88</td>
      <td>30</td>
      <td>20240128</td>
      <td>강동구</td>
    </tr>
    <tr>
      <th>957608</th>
      <td>25990</td>
      <td>암사삼성.현대아파트</td>
      <td>20240126</td>
      <td>강동02</td>
      <td>강동02(가래여울~암사동서원마을)</td>
      <td>암사삼성.현대아파트(00044)</td>
      <td>64</td>
      <td>31</td>
      <td>20240129</td>
      <td>강동구</td>
    </tr>
  </tbody>
</table>
<p>957609 rows × 10 columns</p>
</div>

```python
# 구 별로 버스 정류장 개수 확인하기, 'seoul_bus_station_ARS' 변수로 저장

seoul_bus_station_ARS = df.groupby(by=["자치구"], as_index=False)["버스정류장ARS번호"].nunique()
seoul_bus_station_ARS
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>자치구</th>
      <th>버스정류장ARS번호</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>강남구</td>
      <td>501</td>
    </tr>
    <tr>
      <th>1</th>
      <td>강동구</td>
      <td>367</td>
    </tr>
    <tr>
      <th>2</th>
      <td>강북구</td>
      <td>410</td>
    </tr>
    <tr>
      <th>3</th>
      <td>강서구</td>
      <td>567</td>
    </tr>
    <tr>
      <th>4</th>
      <td>관악구</td>
      <td>466</td>
    </tr>
    <tr>
      <th>5</th>
      <td>광진구</td>
      <td>274</td>
    </tr>
    <tr>
      <th>6</th>
      <td>구로구</td>
      <td>486</td>
    </tr>
    <tr>
      <th>7</th>
      <td>금천구</td>
      <td>346</td>
    </tr>
    <tr>
      <th>8</th>
      <td>노원구</td>
      <td>495</td>
    </tr>
    <tr>
      <th>9</th>
      <td>도봉구</td>
      <td>366</td>
    </tr>
    <tr>
      <th>10</th>
      <td>동대문구</td>
      <td>307</td>
    </tr>
    <tr>
      <th>11</th>
      <td>동작구</td>
      <td>435</td>
    </tr>
    <tr>
      <th>12</th>
      <td>마포구</td>
      <td>558</td>
    </tr>
    <tr>
      <th>13</th>
      <td>서대문구</td>
      <td>456</td>
    </tr>
    <tr>
      <th>14</th>
      <td>서초구</td>
      <td>601</td>
    </tr>
    <tr>
      <th>15</th>
      <td>성동구</td>
      <td>432</td>
    </tr>
    <tr>
      <th>16</th>
      <td>성북구</td>
      <td>595</td>
    </tr>
    <tr>
      <th>17</th>
      <td>송파구</td>
      <td>470</td>
    </tr>
    <tr>
      <th>18</th>
      <td>양천구</td>
      <td>319</td>
    </tr>
    <tr>
      <th>19</th>
      <td>영등포구</td>
      <td>465</td>
    </tr>
    <tr>
      <th>20</th>
      <td>용산구</td>
      <td>326</td>
    </tr>
    <tr>
      <th>21</th>
      <td>은평구</td>
      <td>497</td>
    </tr>
    <tr>
      <th>22</th>
      <td>종로구</td>
      <td>356</td>
    </tr>
    <tr>
      <th>23</th>
      <td>중구</td>
      <td>173</td>
    </tr>
    <tr>
      <th>24</th>
      <td>중랑구</td>
      <td>384</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 서울시에 있는 버스정류장 개수 구하기

df['버스정류장ARS번호'].nunique()
```

<pre>
10652
</pre>

#### [실습문제6] 구 별로 버스 노선의 개수 확인하기

```python
# 자치구별 노선번호의 개수 구하기, 'seoul_bus_station_line' 변수로 저장

seoul_bus_station_line = df.groupby(by=["자치구"], as_index=False)["노선번호"].nunique()
seoul_bus_station_line
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>자치구</th>
      <th>노선번호</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>강남구</td>
      <td>98</td>
    </tr>
    <tr>
      <th>1</th>
      <td>강동구</td>
      <td>22</td>
    </tr>
    <tr>
      <th>2</th>
      <td>강북구</td>
      <td>71</td>
    </tr>
    <tr>
      <th>3</th>
      <td>강서구</td>
      <td>51</td>
    </tr>
    <tr>
      <th>4</th>
      <td>관악구</td>
      <td>81</td>
    </tr>
    <tr>
      <th>5</th>
      <td>광진구</td>
      <td>43</td>
    </tr>
    <tr>
      <th>6</th>
      <td>구로구</td>
      <td>80</td>
    </tr>
    <tr>
      <th>7</th>
      <td>금천구</td>
      <td>56</td>
    </tr>
    <tr>
      <th>8</th>
      <td>노원구</td>
      <td>58</td>
    </tr>
    <tr>
      <th>9</th>
      <td>도봉구</td>
      <td>54</td>
    </tr>
    <tr>
      <th>10</th>
      <td>동대문구</td>
      <td>74</td>
    </tr>
    <tr>
      <th>11</th>
      <td>동작구</td>
      <td>93</td>
    </tr>
    <tr>
      <th>12</th>
      <td>마포구</td>
      <td>100</td>
    </tr>
    <tr>
      <th>13</th>
      <td>서대문구</td>
      <td>109</td>
    </tr>
    <tr>
      <th>14</th>
      <td>서초구</td>
      <td>99</td>
    </tr>
    <tr>
      <th>15</th>
      <td>성동구</td>
      <td>58</td>
    </tr>
    <tr>
      <th>16</th>
      <td>성북구</td>
      <td>98</td>
    </tr>
    <tr>
      <th>17</th>
      <td>송파구</td>
      <td>60</td>
    </tr>
    <tr>
      <th>18</th>
      <td>양천구</td>
      <td>57</td>
    </tr>
    <tr>
      <th>19</th>
      <td>영등포구</td>
      <td>100</td>
    </tr>
    <tr>
      <th>20</th>
      <td>용산구</td>
      <td>69</td>
    </tr>
    <tr>
      <th>21</th>
      <td>은평구</td>
      <td>74</td>
    </tr>
    <tr>
      <th>22</th>
      <td>종로구</td>
      <td>105</td>
    </tr>
    <tr>
      <th>23</th>
      <td>중구</td>
      <td>102</td>
    </tr>
    <tr>
      <th>24</th>
      <td>중랑구</td>
      <td>50</td>
    </tr>
  </tbody>
</table>
</div>

#### [실습문제7] 각 구별로 승차 총 승객수, 하차 총 승객수 구하기

```python
# 자치구별 "승차총승객수","하차총승객수"의 합 구하기, 'seoul_bus_station_sum' 변수로 저장
# groupby()

seoul_bus_station_sum = df.groupby(by=["자치구"], as_index=False)[["승차총승객수","하차총승객수"]].sum()
seoul_bus_station_sum
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>자치구</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>강남구</td>
      <td>6960336</td>
      <td>6597087</td>
    </tr>
    <tr>
      <th>1</th>
      <td>강동구</td>
      <td>2515582</td>
      <td>2460905</td>
    </tr>
    <tr>
      <th>2</th>
      <td>강북구</td>
      <td>3998077</td>
      <td>3858057</td>
    </tr>
    <tr>
      <th>3</th>
      <td>강서구</td>
      <td>3981173</td>
      <td>3963283</td>
    </tr>
    <tr>
      <th>4</th>
      <td>관악구</td>
      <td>5862490</td>
      <td>5996915</td>
    </tr>
    <tr>
      <th>5</th>
      <td>광진구</td>
      <td>2365355</td>
      <td>2382437</td>
    </tr>
    <tr>
      <th>6</th>
      <td>구로구</td>
      <td>4204229</td>
      <td>4023135</td>
    </tr>
    <tr>
      <th>7</th>
      <td>금천구</td>
      <td>3133461</td>
      <td>3014364</td>
    </tr>
    <tr>
      <th>8</th>
      <td>노원구</td>
      <td>3553485</td>
      <td>3497450</td>
    </tr>
    <tr>
      <th>9</th>
      <td>도봉구</td>
      <td>2771076</td>
      <td>2695540</td>
    </tr>
    <tr>
      <th>10</th>
      <td>동대문구</td>
      <td>4530373</td>
      <td>4426822</td>
    </tr>
    <tr>
      <th>11</th>
      <td>동작구</td>
      <td>4125466</td>
      <td>3979142</td>
    </tr>
    <tr>
      <th>12</th>
      <td>마포구</td>
      <td>4517711</td>
      <td>4395035</td>
    </tr>
    <tr>
      <th>13</th>
      <td>서대문구</td>
      <td>5069197</td>
      <td>4978622</td>
    </tr>
    <tr>
      <th>14</th>
      <td>서초구</td>
      <td>5919552</td>
      <td>5755058</td>
    </tr>
    <tr>
      <th>15</th>
      <td>성동구</td>
      <td>2371151</td>
      <td>2331836</td>
    </tr>
    <tr>
      <th>16</th>
      <td>성북구</td>
      <td>5051648</td>
      <td>5060251</td>
    </tr>
    <tr>
      <th>17</th>
      <td>송파구</td>
      <td>4746623</td>
      <td>4744766</td>
    </tr>
    <tr>
      <th>18</th>
      <td>양천구</td>
      <td>3478159</td>
      <td>3344254</td>
    </tr>
    <tr>
      <th>19</th>
      <td>영등포구</td>
      <td>4987187</td>
      <td>5041026</td>
    </tr>
    <tr>
      <th>20</th>
      <td>용산구</td>
      <td>3495720</td>
      <td>3422432</td>
    </tr>
    <tr>
      <th>21</th>
      <td>은평구</td>
      <td>4296944</td>
      <td>4223666</td>
    </tr>
    <tr>
      <th>22</th>
      <td>종로구</td>
      <td>4500874</td>
      <td>4348356</td>
    </tr>
    <tr>
      <th>23</th>
      <td>중구</td>
      <td>3138112</td>
      <td>3050645</td>
    </tr>
    <tr>
      <th>24</th>
      <td>중랑구</td>
      <td>3200879</td>
      <td>3155827</td>
    </tr>
  </tbody>
</table>
</div>

#### [실습문제8] 각 구별 승차 평균 승객수, 하차 평균 승객수 구하기

```python
# 자치구별 "승차총승객수","하차총승객수"의 평균 구하기, 'seoul_bus_station_mean' 변수로 저장
# '승차총승객수' -> '승차평균승객수', '하차총승객수' -> '하차평균승객수'로 열이름 변경

seoul_bus_station_mean = df.groupby(by=["자치구"], as_index=False)[["승차총승객수","하차총승객수"]].mean()
seoul_bus_station_mean.rename(columns={'승차총승객수':'승차평균승객수','하차총승객수':'하차평균승객수'}, inplace=True)
seoul_bus_station_mean
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>자치구</th>
      <th>승차평균승객수</th>
      <th>하차평균승객수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>강남구</td>
      <td>123.257234</td>
      <td>116.824633</td>
    </tr>
    <tr>
      <th>1</th>
      <td>강동구</td>
      <td>91.578944</td>
      <td>89.588445</td>
    </tr>
    <tr>
      <th>2</th>
      <td>강북구</td>
      <td>126.465395</td>
      <td>122.036345</td>
    </tr>
    <tr>
      <th>3</th>
      <td>강서구</td>
      <td>86.932767</td>
      <td>86.542122</td>
    </tr>
    <tr>
      <th>4</th>
      <td>관악구</td>
      <td>134.946712</td>
      <td>138.040996</td>
    </tr>
    <tr>
      <th>5</th>
      <td>광진구</td>
      <td>107.491706</td>
      <td>108.267985</td>
    </tr>
    <tr>
      <th>6</th>
      <td>구로구</td>
      <td>114.700415</td>
      <td>109.759781</td>
    </tr>
    <tr>
      <th>7</th>
      <td>금천구</td>
      <td>123.088384</td>
      <td>118.410025</td>
    </tr>
    <tr>
      <th>8</th>
      <td>노원구</td>
      <td>83.356439</td>
      <td>82.041989</td>
    </tr>
    <tr>
      <th>9</th>
      <td>도봉구</td>
      <td>101.649829</td>
      <td>98.878985</td>
    </tr>
    <tr>
      <th>10</th>
      <td>동대문구</td>
      <td>127.573018</td>
      <td>124.657074</td>
    </tr>
    <tr>
      <th>11</th>
      <td>동작구</td>
      <td>108.467845</td>
      <td>104.620655</td>
    </tr>
    <tr>
      <th>12</th>
      <td>마포구</td>
      <td>95.578543</td>
      <td>92.983159</td>
    </tr>
    <tr>
      <th>13</th>
      <td>서대문구</td>
      <td>104.720330</td>
      <td>102.849216</td>
    </tr>
    <tr>
      <th>14</th>
      <td>서초구</td>
      <td>113.621221</td>
      <td>110.463886</td>
    </tr>
    <tr>
      <th>15</th>
      <td>성동구</td>
      <td>90.495039</td>
      <td>88.994581</td>
    </tr>
    <tr>
      <th>16</th>
      <td>성북구</td>
      <td>112.288788</td>
      <td>112.480017</td>
    </tr>
    <tr>
      <th>17</th>
      <td>송파구</td>
      <td>99.003483</td>
      <td>98.964751</td>
    </tr>
    <tr>
      <th>18</th>
      <td>양천구</td>
      <td>96.452095</td>
      <td>92.738804</td>
    </tr>
    <tr>
      <th>19</th>
      <td>영등포구</td>
      <td>116.711217</td>
      <td>117.971168</td>
    </tr>
    <tr>
      <th>20</th>
      <td>용산구</td>
      <td>119.962938</td>
      <td>117.447907</td>
    </tr>
    <tr>
      <th>21</th>
      <td>은평구</td>
      <td>93.725603</td>
      <td>92.127252</td>
    </tr>
    <tr>
      <th>22</th>
      <td>종로구</td>
      <td>123.298104</td>
      <td>119.119987</td>
    </tr>
    <tr>
      <th>23</th>
      <td>중구</td>
      <td>113.699710</td>
      <td>110.530616</td>
    </tr>
    <tr>
      <th>24</th>
      <td>중랑구</td>
      <td>79.082866</td>
      <td>77.969784</td>
    </tr>
  </tbody>
</table>
</div>

#### [실습문제9] 데이터 프레임 합치기

```python
# 위에 만드신 네 개 파일을 합쳐주세요.

# seoul_bus_station_ARS
# seoul_bus_station_line
# seoul_bus_station_sum
# seoul_bus_station_mean

a = pd.merge(seoul_bus_station_ARS,seoul_bus_station_line,how='inner', on='자치구')
b = pd.merge(a,seoul_bus_station_sum,how='inner', on='자치구')
seoul_bus_station = pd.merge(b,seoul_bus_station_mean,how='inner', on='자치구')
```

```python
# '버스정류장ARS번호' -> '정류장수', '노선번호' -> '노선수'로 열이름 변경

seoul_bus_station.rename(columns={'버스정류장ARS번호':'정류장수','노선번호':'노선수'}, inplace=True)
```

```python
# 데이터를 합친 결과를 확인합니다.

seoul_bus_station
```

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>자치구</th>
      <th>정류장수</th>
      <th>노선수</th>
      <th>승차총승객수</th>
      <th>하차총승객수</th>
      <th>승차평균승객수</th>
      <th>하차평균승객수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>강남구</td>
      <td>501</td>
      <td>98</td>
      <td>6960336</td>
      <td>6597087</td>
      <td>123.257234</td>
      <td>116.824633</td>
    </tr>
    <tr>
      <th>1</th>
      <td>강동구</td>
      <td>367</td>
      <td>22</td>
      <td>2515582</td>
      <td>2460905</td>
      <td>91.578944</td>
      <td>89.588445</td>
    </tr>
    <tr>
      <th>2</th>
      <td>강북구</td>
      <td>410</td>
      <td>71</td>
      <td>3998077</td>
      <td>3858057</td>
      <td>126.465395</td>
      <td>122.036345</td>
    </tr>
    <tr>
      <th>3</th>
      <td>강서구</td>
      <td>567</td>
      <td>51</td>
      <td>3981173</td>
      <td>3963283</td>
      <td>86.932767</td>
      <td>86.542122</td>
    </tr>
    <tr>
      <th>4</th>
      <td>관악구</td>
      <td>466</td>
      <td>81</td>
      <td>5862490</td>
      <td>5996915</td>
      <td>134.946712</td>
      <td>138.040996</td>
    </tr>
    <tr>
      <th>5</th>
      <td>광진구</td>
      <td>274</td>
      <td>43</td>
      <td>2365355</td>
      <td>2382437</td>
      <td>107.491706</td>
      <td>108.267985</td>
    </tr>
    <tr>
      <th>6</th>
      <td>구로구</td>
      <td>486</td>
      <td>80</td>
      <td>4204229</td>
      <td>4023135</td>
      <td>114.700415</td>
      <td>109.759781</td>
    </tr>
    <tr>
      <th>7</th>
      <td>금천구</td>
      <td>346</td>
      <td>56</td>
      <td>3133461</td>
      <td>3014364</td>
      <td>123.088384</td>
      <td>118.410025</td>
    </tr>
    <tr>
      <th>8</th>
      <td>노원구</td>
      <td>495</td>
      <td>58</td>
      <td>3553485</td>
      <td>3497450</td>
      <td>83.356439</td>
      <td>82.041989</td>
    </tr>
    <tr>
      <th>9</th>
      <td>도봉구</td>
      <td>366</td>
      <td>54</td>
      <td>2771076</td>
      <td>2695540</td>
      <td>101.649829</td>
      <td>98.878985</td>
    </tr>
    <tr>
      <th>10</th>
      <td>동대문구</td>
      <td>307</td>
      <td>74</td>
      <td>4530373</td>
      <td>4426822</td>
      <td>127.573018</td>
      <td>124.657074</td>
    </tr>
    <tr>
      <th>11</th>
      <td>동작구</td>
      <td>435</td>
      <td>93</td>
      <td>4125466</td>
      <td>3979142</td>
      <td>108.467845</td>
      <td>104.620655</td>
    </tr>
    <tr>
      <th>12</th>
      <td>마포구</td>
      <td>558</td>
      <td>100</td>
      <td>4517711</td>
      <td>4395035</td>
      <td>95.578543</td>
      <td>92.983159</td>
    </tr>
    <tr>
      <th>13</th>
      <td>서대문구</td>
      <td>456</td>
      <td>109</td>
      <td>5069197</td>
      <td>4978622</td>
      <td>104.720330</td>
      <td>102.849216</td>
    </tr>
    <tr>
      <th>14</th>
      <td>서초구</td>
      <td>601</td>
      <td>99</td>
      <td>5919552</td>
      <td>5755058</td>
      <td>113.621221</td>
      <td>110.463886</td>
    </tr>
    <tr>
      <th>15</th>
      <td>성동구</td>
      <td>432</td>
      <td>58</td>
      <td>2371151</td>
      <td>2331836</td>
      <td>90.495039</td>
      <td>88.994581</td>
    </tr>
    <tr>
      <th>16</th>
      <td>성북구</td>
      <td>595</td>
      <td>98</td>
      <td>5051648</td>
      <td>5060251</td>
      <td>112.288788</td>
      <td>112.480017</td>
    </tr>
    <tr>
      <th>17</th>
      <td>송파구</td>
      <td>470</td>
      <td>60</td>
      <td>4746623</td>
      <td>4744766</td>
      <td>99.003483</td>
      <td>98.964751</td>
    </tr>
    <tr>
      <th>18</th>
      <td>양천구</td>
      <td>319</td>
      <td>57</td>
      <td>3478159</td>
      <td>3344254</td>
      <td>96.452095</td>
      <td>92.738804</td>
    </tr>
    <tr>
      <th>19</th>
      <td>영등포구</td>
      <td>465</td>
      <td>100</td>
      <td>4987187</td>
      <td>5041026</td>
      <td>116.711217</td>
      <td>117.971168</td>
    </tr>
    <tr>
      <th>20</th>
      <td>용산구</td>
      <td>326</td>
      <td>69</td>
      <td>3495720</td>
      <td>3422432</td>
      <td>119.962938</td>
      <td>117.447907</td>
    </tr>
    <tr>
      <th>21</th>
      <td>은평구</td>
      <td>497</td>
      <td>74</td>
      <td>4296944</td>
      <td>4223666</td>
      <td>93.725603</td>
      <td>92.127252</td>
    </tr>
    <tr>
      <th>22</th>
      <td>종로구</td>
      <td>356</td>
      <td>105</td>
      <td>4500874</td>
      <td>4348356</td>
      <td>123.298104</td>
      <td>119.119987</td>
    </tr>
    <tr>
      <th>23</th>
      <td>중구</td>
      <td>173</td>
      <td>102</td>
      <td>3138112</td>
      <td>3050645</td>
      <td>113.699710</td>
      <td>110.530616</td>
    </tr>
    <tr>
      <th>24</th>
      <td>중랑구</td>
      <td>384</td>
      <td>50</td>
      <td>3200879</td>
      <td>3155827</td>
      <td>79.082866</td>
      <td>77.969784</td>
    </tr>
  </tbody>
</table>
</div>

```python
# 해당 데이터프레임을 csv 파일로 저장하세요.

# seoul_bus_station.to_csv("df_seoul_bus_station.csv", index = False)
```

---

# 3.데이터 분석하기

* KeyPoint : 데이터의 형태를 살펴보고 다양한 분석기법을 통해 모델링에 적합하도록 정제요소를 선별할 수 있다.

  * 데이터들의 패턴 탐색
  * 변수들간의 관계 파악

```python
# 시각화 한글폰트 설정
import seaborn as sns
import matplotlib.pyplot as plt

plt.rc('font', family='Malgun')
sns.set(font="Malgun Gothic", 
        rc={"axes.unicode_minus":False}, # 마이너스 부호 깨짐 현상 해결
        style='darkgrid')
```

#### [실습문제10] 데이터 분포 알아보기

* 다양한 변수를 기준으로 그래프를 그려보고 인사이트를 도출해보세요.

```python
# 자치구별 정류장 수를 볼 수 있는 그래프를 출력해주세요.

plt.figure(figsize=(20,4))
plt.plot('자치구', '정류장수', data = seoul_bus_station)
plt.xlabel('자치구')
plt.ylabel('정류장 수')
for index, row in seoul_bus_station.iterrows():
    plt.text(row['자치구'], row['정류장수'], str(row['정류장수']))
```

![z_,min_1_1_1_1](https://github.com/zacinthepark/TIL/assets/86648892/e951e809-319f-4c1a-9b17-8a9f96a567d8)

```python
# 위 차트를 통해 알게된 사실을 개인별로 정리해봅시다.
# 1. 중구가 서울시에서 정류장 수가 가장 적다.
# 2. 서울시에서 서초구 > 성북구 > 강서구 > 마포구 순서로 정류장 수가 많다.
# 3. 정류장 수가 적은 구는 동북권 또는 도심권이 많다.
```
