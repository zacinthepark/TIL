# 가설검정

![h_test_2](https://github.com/zacinthepark/TIL/assets/86648892/b668511c-9cea-400e-84e1-557543b3cd6f)

## 가설과 가설검정

- 시각화를 통한 가설검정
- 수치화를 통한 (검정 통계량에 의한) 가설 검정

### 모집단(Population)과 표본(Sample)

- 모집단: 우리가 알고 싶은 대상 전체 영역 (데이터)
    - 전수 조사
    - 인구 조사가 전수 조사의 대표적인 예

- 표본: 그 대상의 일부 영역 (데이터)
    - 표본 조사
    - **표본은 모집단 추정을 위한 것**
    - 우리는 일부분으로 전체를 추정하고자 한다

- **모집단에 대한** 가설 수립
    - 가설은 보통 x와 y의 관계를 표현
        - X에 따라 Y가 **차이** 가 있다
        - X와 Y는 **관계** 가 있다

- 표본을 가지고 가설이 진짜 그러한지 검증 (검정)

### 분포

- 평균, 표준편차, 분산 등의 정보들이 분포
- **분포** 를 안다면 **흔한** 결과인지, **드문** 결과인지 판단

### 가설 수립 (Business Understanding)

- 비즈니스 이해단계에서
    - 비즈니스 문제로부터 우리의 **관심사(Y)를 도출** 하고
    - Y에 영향을 주는 **요인(X)** 들을 뽑아서
    - 초기 **가설 수립**

- 예를 들어
    - 고객 이탈 예측(y)에 영향을 주는 요인(x)은?
        - 고객의 가입기간(x1) -> 이탈여부(y)
        - 성별(x2) -> 이탈여부(y)
    
    - 수요량(y)에 영향을 주는 요인(x)은?
        - 기온(x1) -> 수요량(y)
        - 매장지역(x2) -> 수요량(y)

### 귀무가설과 대립가설

#### 귀무가설

> 매장지역(x2)에 따라 수요량(y)에 차이가 없다.

- 영가설
- 현재의 가설
- 보수적인 입장

#### 대립가설

> 매장지역(x2)에 따라 수요량(y)에 차이가 있다.

- 연구가설
- 새로운 가설
- 내가 바라는 바

## 통계적 검정

- 표본으로부터 대립가설을 확인하고, 모집단에서도 맞을 것이라 주장
- '매장지역(x2)에 따라 수요랑(y)에 **차이** 가 있다'
    - 여기서 '차이'의 값이 큰지 작은 지는 어떻게 판단하는가

### **P-Value**

![p_value_1](https://github.com/zacinthepark/TIL/assets/86648892/ec620dbf-c8da-48ff-8d62-4e51827ba317)

![p_value_2](https://github.com/zacinthepark/TIL/assets/86648892/afb34163-f57a-48b2-90f0-4aacd0be30a8)

![p_value_3](https://github.com/zacinthepark/TIL/assets/86648892/047f67a5-0514-494b-b5cf-421f1f4ae479)

- 어떤 차이에 대한 **분포** 가 있을 때
- 이 때 **판단 기준** 으로 p-value를 계산

- 해당 차이 값 기준으로 분포 내 가장자리 면적이 p-value이며
    - 차이 값이 작다면 분포 내 차지하는 확률 면적이 작을 것이고, p-value는 커짐
- p-value가 유의수준보다 작다면, 유의하다고 볼 수 있음
    - 통상적으로 0.05(5%)이지만, 조금 더 제조, 의료 등 분야에서 더 보수적인 기준으로 0.01(1%)를 사용하기도 함
- 즉, p-value가 0.05보다 작아야, 차이가 있다고 (관계가 있다고) 판단

- 위 예시에서 만약 차이 값 8이 p-value가 0.05가 되는 값이라 가정한다면, 차이의 값이 8이 넘는다면 그 차이는 유의미한 것이라 생각하는 것

#### 가설 검정과 P-Value

- 이 때 x -> y 가설 검정을 한다면
    - x에 따른 y의 차이에 사용하는 값을 검정 통계량이라 하며, t 통계량, 카이제곱 통계량, f 통계량 등이 있음
    - - 보고자 하는 가설의 x, y에 의한 차이의 값이 유의한가? 관계가 있다고 볼 수 있는가?

- 어떤 사건이 우연히 발생할 확률 (Probability Value)
    - 통상적으로 값이 0.05보다 작으면 우연히 발생한 것이 아닌, x에 따른 y의 차이가 있는 것으로 봄 (귀무가설 기각)

- **단측검정**
    - A 매장과 B 매장 중 **어디의 수요량이 더 큰가?**

- **양측검정**
    - 매장 간에 **수요량의 차이가 있나?**

### 검정 통계량

- **검정** **(차이가 있는지 없는지 확인)** 하기 위한 **차이 값**
    - **t 통계량**
    - **카이제곱 통계량**
    - **f 통계량**

- 이들은 각각 **기준** 대비 **차이** 로 계산된다
    - 계산된 통계량 -> 각자의 분포를 가짐
    - 분포를 통해서 그 값이 ( **차이** )가 큰지, 작은지 판단 가능
    - 이를 손쉽게 판단할 수 있도록 계산해준 것이 p-value

- 사용하는 검정 통계량에 따라 검정 방식이 다름

### 가설 검정

- 우리가 세운 가설 (대립가설)
    - 오존 농도(공기 오염도)를 예측하고자 할 때
    - '온도에 따라 오존 농도는 달라질 것이다'

- p-value를 구했더니, 0.001이라면
    - 기준(유의수준)으로 정한 5%보다 작으므로
    - 우리가 세운 가설이 (모집단에서) 맞을 것이라 판단할 수 있음

- 이러한 절차를 **가설 검정** 이라고 한다

> X와 Y의 관계가 강한지, 약한지를 살펴보기 위해 다음과 같은 도구들을 이용

![h_test_1](https://github.com/zacinthepark/TIL/assets/86648892/46556604-8849-420a-943f-5085c5f3b4a3)
